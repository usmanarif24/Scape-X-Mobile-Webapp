var SxmWeb=function(Pe){"use strict";var uu=Object.defineProperty;var sa=Pe=>{throw TypeError(Pe)};var hu=(Pe,Me,qe)=>Me in Pe?uu(Pe,Me,{enumerable:!0,configurable:!0,writable:!0,value:qe}):Pe[Me]=qe;var Ee=(Pe,Me,qe)=>hu(Pe,typeof Me!="symbol"?Me+"":Me,qe),Cn=(Pe,Me,qe)=>Me.has(Pe)||sa("Cannot "+qe);var P=(Pe,Me,qe)=>(Cn(Pe,Me,"read from private field"),qe?qe.call(Pe):Me.get(Pe)),Re=(Pe,Me,qe)=>Me.has(Pe)?sa("Cannot add the same private member more than once"):Me instanceof WeakSet?Me.add(Pe):Me.set(Pe,qe),Ae=(Pe,Me,qe,Jt)=>(Cn(Pe,Me,"write to private field"),Jt?Jt.call(Pe,qe):Me.set(Pe,qe),qe),_e=(Pe,Me,qe)=>(Cn(Pe,Me,"access private method"),qe);var Ur=(Pe,Me,qe,Jt)=>({set _(jr){Ae(Pe,Me,jr,qe)},get _(){return P(Pe,Me,Jt)}});var Me=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,Jt=Object.getOwnPropertyNames,jr=Object.prototype.hasOwnProperty,Ye=(e,r)=>()=>(e&&(r=e(e=0)),r),be=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),xt=(e,r)=>{for(var t in r)Me(e,t,{get:r[t],enumerable:!0})},ba=(e,r,t,l)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of Jt(r))!jr.call(e,c)&&c!==t&&Me(e,c,{get:()=>r[c],enumerable:!(l=qe(r,c))||l.enumerable});return e},Le=e=>ba(Me({},"__esModule",{value:!0}),e),et,se=Ye(()=>{et={deviceMemory:8,hardwareConcurrency:8,language:"en-US"}}),Be={};xt(Be,{_debugEnd:()=>yi,_debugProcess:()=>mi,_events:()=>xi,_eventsCount:()=>Ui,_exiting:()=>ii,_fatalExceptions:()=>pi,_getActiveHandles:()=>Fn,_getActiveRequests:()=>Dn,_kill:()=>si,_linkedBinding:()=>Nn,_maxListeners:()=>Mi,_preload_modules:()=>Ri,_rawDebug:()=>ei,_startProfilerIdleNotifier:()=>wi,_stopProfilerIdleNotifier:()=>vi,_tickCallback:()=>bi,abort:()=>Ai,addListener:()=>Li,allowedNodeEnvironmentFlags:()=>fi,arch:()=>Wr,argv:()=>Vr,argv0:()=>Oi,assert:()=>Wn,binding:()=>Yr,chdir:()=>Xr,config:()=>ni,cpuUsage:()=>nr,cwd:()=>Jr,debugPort:()=>Ci,default:()=>Vi,dlopen:()=>jn,domain:()=>ri,emit:()=>Wi,emitWarning:()=>Qr,env:()=>qr,execArgv:()=>Hr,execPath:()=>Ti,exit:()=>hi,features:()=>di,hasUncaughtExceptionCaptureCallback:()=>$n,hrtime:()=>dr,kill:()=>ui,listeners:()=>Vn,memoryUsage:()=>li,moduleLoadList:()=>ti,nextTick:()=>Un,off:()=>ji,on:()=>gt,once:()=>Ni,openStdin:()=>ci,pid:()=>Ii,platform:()=>$r,ppid:()=>ki,prependListener:()=>$i,prependOnceListener:()=>qi,reallyExit:()=>oi,release:()=>Zr,removeAllListeners:()=>Fi,removeListener:()=>Di,resourceUsage:()=>ai,setSourceMapsEnabled:()=>Pi,setUncaughtExceptionCaptureCallback:()=>gi,stderr:()=>Ei,stdin:()=>Si,stdout:()=>_i,title:()=>Fr,umask:()=>Gr,uptime:()=>qn,version:()=>zr,versions:()=>Kr});function Dr(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function ma(){!Ut||!Lt||(Ut=!1,Lt.length?ct=Lt.concat(ct):ir=-1,ct.length&&xn())}function xn(){if(!Ut){var e=setTimeout(ma,0);Ut=!0;for(var r=ct.length;r;){for(Lt=ct,ct=[];++ir<r;)Lt&&Lt[ir].run();ir=-1,r=ct.length}Lt=null,Ut=!1,clearTimeout(e)}}function Un(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];ct.push(new Ln(e,r)),ct.length===1&&!Ut&&setTimeout(xn,0)}function Ln(e,r){this.fun=e,this.array=r}function Ze(){}function Nn(e){Dr("_linkedBinding")}function jn(e){Dr("dlopen")}function Dn(){return[]}function Fn(){return[]}function Wn(e,r){if(!e)throw new Error(r||"assertion error")}function $n(){return!1}function qn(){return bt.now()/1e3}function dr(e){var r=Math.floor((Date.now()-bt.now())*.001),t=bt.now()*.001,l=Math.floor(t)+r,c=Math.floor(t%1*1e9);return e&&(l=l-e[0],c=c-e[1],c<0&&(l--,c+=pr)),[l,c]}function gt(){return Vi}function Vn(e){return[]}var ct,Ut,Lt,ir,Fr,Wr,$r,qr,Vr,Hr,zr,Kr,Qr,Yr,Gr,Jr,Xr,Zr,ei,ti,ri,ii,ni,oi,si,nr,ai,li,ui,hi,ci,fi,di,pi,gi,bi,mi,yi,wi,vi,_i,Ei,Si,Ai,Ii,ki,Ti,Ci,Oi,Ri,Pi,bt,Bi,pr,Mi,xi,Ui,Li,Ni,ji,Di,Fi,Wi,$i,qi,Vi,ya=Ye(()=>{le(),ae(),se(),ct=[],Ut=!1,ir=-1,Ln.prototype.run=function(){this.fun.apply(null,this.array)},Fr="browser",Wr="x64",$r="browser",qr={PATH:"/usr/bin",LANG:et.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Vr=["/usr/bin/node"],Hr=[],zr="v16.8.0",Kr={},Qr=function(e,r){console.warn((r?r+": ":"")+e)},Yr=function(e){Dr("binding")},Gr=function(e){return 0},Jr=function(){return"/"},Xr=function(e){},Zr={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},ei=Ze,ti=[],ri={},ii=!1,ni={},oi=Ze,si=Ze,nr=function(){return{}},ai=nr,li=nr,ui=Ze,hi=Ze,ci=Ze,fi={},di={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},pi=Ze,gi=Ze,bi=Ze,mi=Ze,yi=Ze,wi=Ze,vi=Ze,_i=void 0,Ei=void 0,Si=void 0,Ai=Ze,Ii=2,ki=1,Ti="/bin/usr/node",Ci=9229,Oi="node",Ri=[],Pi=Ze,bt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},bt.now===void 0&&(Bi=Date.now(),bt.timing&&bt.timing.navigationStart&&(Bi=bt.timing.navigationStart),bt.now=()=>Date.now()-Bi),pr=1e9,dr.bigint=function(e){var r=dr(e);return typeof BigInt>"u"?r[0]*pr+r[1]:BigInt(r[0]*pr)+BigInt(r[1])},Mi=10,xi={},Ui=0,Li=gt,Ni=gt,ji=gt,Di=gt,Fi=gt,Wi=Ze,$i=gt,qi=gt,Vi={version:zr,versions:Kr,arch:Wr,platform:$r,release:Zr,_rawDebug:ei,moduleLoadList:ti,binding:Yr,_linkedBinding:Nn,_events:xi,_eventsCount:Ui,_maxListeners:Mi,on:gt,addListener:Li,once:Ni,off:ji,removeListener:Di,removeAllListeners:Fi,emit:Wi,prependListener:$i,prependOnceListener:qi,listeners:Vn,domain:ri,_exiting:ii,config:ni,dlopen:jn,uptime:qn,_getActiveRequests:Dn,_getActiveHandles:Fn,reallyExit:oi,_kill:si,cpuUsage:nr,resourceUsage:ai,memoryUsage:li,kill:ui,exit:hi,openStdin:ci,allowedNodeEnvironmentFlags:fi,assert:Wn,features:di,_fatalExceptions:pi,setUncaughtExceptionCaptureCallback:gi,hasUncaughtExceptionCaptureCallback:$n,emitWarning:Qr,nextTick:Un,_tickCallback:bi,_debugProcess:mi,_debugEnd:yi,_startProfilerIdleNotifier:wi,_stopProfilerIdleNotifier:vi,stdout:_i,stdin:Si,stderr:Ei,abort:Ai,umask:Gr,chdir:Xr,cwd:Jr,env:qr,title:Fr,argv:Vr,execArgv:Hr,pid:Ii,ppid:ki,execPath:Ti,debugPort:Ci,hrtime:dr,argv0:Oi,_preload_modules:Ri,setSourceMapsEnabled:Pi}}),ae=Ye(()=>{ya()}),Ge={};xt(Ge,{Buffer:()=>gr,INSPECT_MAX_BYTES:()=>Hn,default:()=>mt,kMaxLength:()=>zn});function wa(){if(Hi)return Xt;Hi=!0,Xt.byteLength=s,Xt.toByteArray=a,Xt.fromByteArray=g;for(var e=[],r=[],t=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,o=l.length;c<o;++c)e[c]=l[c],r[l.charCodeAt(c)]=c;r[45]=62,r[95]=63;function i(b){var m=b.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=b.indexOf("=");y===-1&&(y=m);var I=y===m?0:4-y%4;return[y,I]}function s(b){var m=i(b),y=m[0],I=m[1];return(y+I)*3/4-I}function n(b,m,y){return(m+y)*3/4-y}function a(b){var m,y=i(b),I=y[0],x=y[1],_=new t(n(b,I,x)),A=0,N=x>0?I-4:I,D;for(D=0;D<N;D+=4)m=r[b.charCodeAt(D)]<<18|r[b.charCodeAt(D+1)]<<12|r[b.charCodeAt(D+2)]<<6|r[b.charCodeAt(D+3)],_[A++]=m>>16&255,_[A++]=m>>8&255,_[A++]=m&255;return x===2&&(m=r[b.charCodeAt(D)]<<2|r[b.charCodeAt(D+1)]>>4,_[A++]=m&255),x===1&&(m=r[b.charCodeAt(D)]<<10|r[b.charCodeAt(D+1)]<<4|r[b.charCodeAt(D+2)]>>2,_[A++]=m>>8&255,_[A++]=m&255),_}function f(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function p(b,m,y){for(var I,x=[],_=m;_<y;_+=3)I=(b[_]<<16&16711680)+(b[_+1]<<8&65280)+(b[_+2]&255),x.push(f(I));return x.join("")}function g(b){for(var m,y=b.length,I=y%3,x=[],_=16383,A=0,N=y-I;A<N;A+=_)x.push(p(b,A,A+_>N?N:A+_));return I===1?(m=b[y-1],x.push(e[m>>2]+e[m<<4&63]+"==")):I===2&&(m=(b[y-2]<<8)+b[y-1],x.push(e[m>>10]+e[m>>4&63]+e[m<<2&63]+"=")),x.join("")}return Xt}function va(){return zi?or:(zi=!0,or.read=function(e,r,t,l,c){var o,i,s=c*8-l-1,n=(1<<s)-1,a=n>>1,f=-7,p=t?c-1:0,g=t?-1:1,b=e[r+p];for(p+=g,o=b&(1<<-f)-1,b>>=-f,f+=s;f>0;o=o*256+e[r+p],p+=g,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=l;f>0;i=i*256+e[r+p],p+=g,f-=8);if(o===0)o=1-a;else{if(o===n)return i?NaN:(b?-1:1)*(1/0);i=i+Math.pow(2,l),o=o-a}return(b?-1:1)*i*Math.pow(2,o-l)},or.write=function(e,r,t,l,c,o){var i,s,n,a=o*8-c-1,f=(1<<a)-1,p=f>>1,g=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=l?0:o-1,m=l?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,i=f):(i=Math.floor(Math.log(r)/Math.LN2),r*(n=Math.pow(2,-i))<1&&(i--,n*=2),i+p>=1?r+=g/n:r+=g*Math.pow(2,1-p),r*n>=2&&(i++,n/=2),i+p>=f?(s=0,i=f):i+p>=1?(s=(r*n-1)*Math.pow(2,c),i=i+p):(s=r*Math.pow(2,p-1)*Math.pow(2,c),i=0));c>=8;e[t+b]=s&255,b+=m,s/=256,c-=8);for(i=i<<c|s,a+=c;a>0;e[t+b]=i&255,b+=m,i/=256,a-=8);e[t+b-m]|=y*128},or)}function _a(){if(Ki)return Ot;Ki=!0;let e=wa(),r=va(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ot.Buffer=i,Ot.SlowBuffer=x,Ot.INSPECT_MAX_BYTES=50;let l=2147483647;Ot.kMaxLength=l,i.TYPED_ARRAY_SUPPORT=c(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let h=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(h,u),h.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function o(h){if(h>l)throw new RangeError('The value "'+h+'" is invalid for option "size"');let u=new Uint8Array(h);return Object.setPrototypeOf(u,i.prototype),u}function i(h,u,d){if(typeof h=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(h)}return s(h,u,d)}i.poolSize=8192;function s(h,u,d){if(typeof h=="string")return p(h,u);if(ArrayBuffer.isView(h))return b(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(z(h,ArrayBuffer)||h&&z(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(z(h,SharedArrayBuffer)||h&&z(h.buffer,SharedArrayBuffer)))return m(h,u,d);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let w=h.valueOf&&h.valueOf();if(w!=null&&w!==h)return i.from(w,u,d);let k=y(h);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return i.from(h[Symbol.toPrimitive]("string"),u,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}i.from=function(h,u,d){return s(h,u,d)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function n(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function a(h,u,d){return n(h),h<=0?o(h):u!==void 0?typeof d=="string"?o(h).fill(u,d):o(h).fill(u):o(h)}i.alloc=function(h,u,d){return a(h,u,d)};function f(h){return n(h),o(h<0?0:I(h)|0)}i.allocUnsafe=function(h){return f(h)},i.allocUnsafeSlow=function(h){return f(h)};function p(h,u){if((typeof u!="string"||u==="")&&(u="utf8"),!i.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let d=_(h,u)|0,w=o(d),k=w.write(h,u);return k!==d&&(w=w.slice(0,k)),w}function g(h){let u=h.length<0?0:I(h.length)|0,d=o(u);for(let w=0;w<u;w+=1)d[w]=h[w]&255;return d}function b(h){if(z(h,Uint8Array)){let u=new Uint8Array(h);return m(u.buffer,u.byteOffset,u.byteLength)}return g(h)}function m(h,u,d){if(u<0||h.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<u+(d||0))throw new RangeError('"length" is outside of buffer bounds');let w;return u===void 0&&d===void 0?w=new Uint8Array(h):d===void 0?w=new Uint8Array(h,u):w=new Uint8Array(h,u,d),Object.setPrototypeOf(w,i.prototype),w}function y(h){if(i.isBuffer(h)){let u=I(h.length)|0,d=o(u);return d.length===0||h.copy(d,0,0,u),d}if(h.length!==void 0)return typeof h.length!="number"||O(h.length)?o(0):g(h);if(h.type==="Buffer"&&Array.isArray(h.data))return g(h.data)}function I(h){if(h>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return h|0}function x(h){return+h!=h&&(h=0),i.alloc(+h)}i.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==i.prototype},i.compare=function(h,u){if(z(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),z(u,Uint8Array)&&(u=i.from(u,u.offset,u.byteLength)),!i.isBuffer(h)||!i.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===u)return 0;let d=h.length,w=u.length;for(let k=0,W=Math.min(d,w);k<W;++k)if(h[k]!==u[k]){d=h[k],w=u[k];break}return d<w?-1:w<d?1:0},i.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(h,u){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return i.alloc(0);let d;if(u===void 0)for(u=0,d=0;d<h.length;++d)u+=h[d].length;let w=i.allocUnsafe(u),k=0;for(d=0;d<h.length;++d){let W=h[d];if(z(W,Uint8Array))k+W.length>w.length?(i.isBuffer(W)||(W=i.from(W)),W.copy(w,k)):Uint8Array.prototype.set.call(w,W,k);else if(i.isBuffer(W))W.copy(w,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=W.length}return w};function _(h,u){if(i.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||z(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);let d=h.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&d===0)return 0;let k=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return j(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return J(h).length;default:if(k)return w?-1:j(h).length;u=(""+u).toLowerCase(),k=!0}}i.byteLength=_;function A(h,u,d){let w=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,u>>>=0,d<=u))return"";for(h||(h="utf8");;)switch(h){case"hex":return V(this,u,d);case"utf8":case"utf-8":return H(this,u,d);case"ascii":return ge(this,u,d);case"latin1":case"binary":return oe(this,u,d);case"base64":return S(this,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,u,d);default:if(w)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),w=!0}}i.prototype._isBuffer=!0;function N(h,u,d){let w=h[u];h[u]=h[d],h[d]=w}i.prototype.swap16=function(){let h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<h;u+=2)N(this,u,u+1);return this},i.prototype.swap32=function(){let h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<h;u+=4)N(this,u,u+3),N(this,u+1,u+2);return this},i.prototype.swap64=function(){let h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<h;u+=8)N(this,u,u+7),N(this,u+1,u+6),N(this,u+2,u+5),N(this,u+3,u+4);return this},i.prototype.toString=function(){let h=this.length;return h===0?"":arguments.length===0?H(this,0,h):A.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(h){if(!i.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:i.compare(this,h)===0},i.prototype.inspect=function(){let h="",u=Ot.INSPECT_MAX_BYTES;return h=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(h+=" ... "),"<Buffer "+h+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(h,u,d,w,k){if(z(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),!i.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(u===void 0&&(u=0),d===void 0&&(d=h?h.length:0),w===void 0&&(w=0),k===void 0&&(k=this.length),u<0||d>h.length||w<0||k>this.length)throw new RangeError("out of range index");if(w>=k&&u>=d)return 0;if(w>=k)return-1;if(u>=d)return 1;if(u>>>=0,d>>>=0,w>>>=0,k>>>=0,this===h)return 0;let W=k-w,Z=d-u,Ie=Math.min(W,Z),Ce=this.slice(w,k),Oe=h.slice(u,d);for(let Se=0;Se<Ie;++Se)if(Ce[Se]!==Oe[Se]){W=Ce[Se],Z=Oe[Se];break}return W<Z?-1:Z<W?1:0};function D(h,u,d,w,k){if(h.length===0)return-1;if(typeof d=="string"?(w=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,O(d)&&(d=k?0:h.length-1),d<0&&(d=h.length+d),d>=h.length){if(k)return-1;d=h.length-1}else if(d<0)if(k)d=0;else return-1;if(typeof u=="string"&&(u=i.from(u,w)),i.isBuffer(u))return u.length===0?-1:C(h,u,d,w,k);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(h,u,d):Uint8Array.prototype.lastIndexOf.call(h,u,d):C(h,[u],d,w,k);throw new TypeError("val must be string, number or Buffer")}function C(h,u,d,w,k){let W=1,Z=h.length,Ie=u.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(h.length<2||u.length<2)return-1;W=2,Z/=2,Ie/=2,d/=2}function Ce(Se,Te){return W===1?Se[Te]:Se.readUInt16BE(Te*W)}let Oe;if(k){let Se=-1;for(Oe=d;Oe<Z;Oe++)if(Ce(h,Oe)===Ce(u,Se===-1?0:Oe-Se)){if(Se===-1&&(Se=Oe),Oe-Se+1===Ie)return Se*W}else Se!==-1&&(Oe-=Oe-Se),Se=-1}else for(d+Ie>Z&&(d=Z-Ie),Oe=d;Oe>=0;Oe--){let Se=!0;for(let Te=0;Te<Ie;Te++)if(Ce(h,Oe+Te)!==Ce(u,Te)){Se=!1;break}if(Se)return Oe}return-1}i.prototype.includes=function(h,u,d){return this.indexOf(h,u,d)!==-1},i.prototype.indexOf=function(h,u,d){return D(this,h,u,d,!0)},i.prototype.lastIndexOf=function(h,u,d){return D(this,h,u,d,!1)};function T(h,u,d,w){d=Number(d)||0;let k=h.length-d;w?(w=Number(w),w>k&&(w=k)):w=k;let W=u.length;w>W/2&&(w=W/2);let Z;for(Z=0;Z<w;++Z){let Ie=parseInt(u.substr(Z*2,2),16);if(O(Ie))return Z;h[d+Z]=Ie}return Z}function M(h,u,d,w){return U(j(u,h.length-d),h,d,w)}function $(h,u,d,w){return U(F(u),h,d,w)}function G(h,u,d,w){return U(J(u),h,d,w)}function re(h,u,d,w){return U(ie(u,h.length-d),h,d,w)}i.prototype.write=function(h,u,d,w){if(u===void 0)w="utf8",d=this.length,u=0;else if(d===void 0&&typeof u=="string")w=u,d=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(d)?(d=d>>>0,w===void 0&&(w="utf8")):(w=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let k=this.length-u;if((d===void 0||d>k)&&(d=k),h.length>0&&(d<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let W=!1;for(;;)switch(w){case"hex":return T(this,h,u,d);case"utf8":case"utf-8":return M(this,h,u,d);case"ascii":case"latin1":case"binary":return $(this,h,u,d);case"base64":return G(this,h,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,h,u,d);default:if(W)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),W=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(h,u,d){return u===0&&d===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(u,d))}function H(h,u,d){d=Math.min(h.length,d);let w=[],k=u;for(;k<d;){let W=h[k],Z=null,Ie=W>239?4:W>223?3:W>191?2:1;if(k+Ie<=d){let Ce,Oe,Se,Te;switch(Ie){case 1:W<128&&(Z=W);break;case 2:Ce=h[k+1],(Ce&192)===128&&(Te=(W&31)<<6|Ce&63,Te>127&&(Z=Te));break;case 3:Ce=h[k+1],Oe=h[k+2],(Ce&192)===128&&(Oe&192)===128&&(Te=(W&15)<<12|(Ce&63)<<6|Oe&63,Te>2047&&(Te<55296||Te>57343)&&(Z=Te));break;case 4:Ce=h[k+1],Oe=h[k+2],Se=h[k+3],(Ce&192)===128&&(Oe&192)===128&&(Se&192)===128&&(Te=(W&15)<<18|(Ce&63)<<12|(Oe&63)<<6|Se&63,Te>65535&&Te<1114112&&(Z=Te))}}Z===null?(Z=65533,Ie=1):Z>65535&&(Z-=65536,w.push(Z>>>10&1023|55296),Z=56320|Z&1023),w.push(Z),k+=Ie}return Q(w)}let te=4096;function Q(h){let u=h.length;if(u<=te)return String.fromCharCode.apply(String,h);let d="",w=0;for(;w<u;)d+=String.fromCharCode.apply(String,h.slice(w,w+=te));return d}function ge(h,u,d){let w="";d=Math.min(h.length,d);for(let k=u;k<d;++k)w+=String.fromCharCode(h[k]&127);return w}function oe(h,u,d){let w="";d=Math.min(h.length,d);for(let k=u;k<d;++k)w+=String.fromCharCode(h[k]);return w}function V(h,u,d){let w=h.length;(!u||u<0)&&(u=0),(!d||d<0||d>w)&&(d=w);let k="";for(let W=u;W<d;++W)k+=L[h[W]];return k}function me(h,u,d){let w=h.slice(u,d),k="";for(let W=0;W<w.length-1;W+=2)k+=String.fromCharCode(w[W]+w[W+1]*256);return k}i.prototype.slice=function(h,u){let d=this.length;h=~~h,u=u===void 0?d:~~u,h<0?(h+=d,h<0&&(h=0)):h>d&&(h=d),u<0?(u+=d,u<0&&(u=0)):u>d&&(u=d),u<h&&(u=h);let w=this.subarray(h,u);return Object.setPrototypeOf(w,i.prototype),w};function ne(h,u,d){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+u>d)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(h,u,d){h=h>>>0,u=u>>>0,d||ne(h,u,this.length);let w=this[h],k=1,W=0;for(;++W<u&&(k*=256);)w+=this[h+W]*k;return w},i.prototype.readUintBE=i.prototype.readUIntBE=function(h,u,d){h=h>>>0,u=u>>>0,d||ne(h,u,this.length);let w=this[h+--u],k=1;for(;u>0&&(k*=256);)w+=this[h+--u]*k;return w},i.prototype.readUint8=i.prototype.readUInt8=function(h,u){return h=h>>>0,u||ne(h,1,this.length),this[h]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(h,u){return h=h>>>0,u||ne(h,2,this.length),this[h]|this[h+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(h,u){return h=h>>>0,u||ne(h,2,this.length),this[h]<<8|this[h+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(h,u){return h=h>>>0,u||ne(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(h,u){return h=h>>>0,u||ne(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},i.prototype.readBigUInt64LE=q(function(h){h=h>>>0,X(h,"offset");let u=this[h],d=this[h+7];(u===void 0||d===void 0)&&ye(h,this.length-8);let w=u+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,k=this[++h]+this[++h]*2**8+this[++h]*2**16+d*2**24;return BigInt(w)+(BigInt(k)<<BigInt(32))}),i.prototype.readBigUInt64BE=q(function(h){h=h>>>0,X(h,"offset");let u=this[h],d=this[h+7];(u===void 0||d===void 0)&&ye(h,this.length-8);let w=u*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],k=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+d;return(BigInt(w)<<BigInt(32))+BigInt(k)}),i.prototype.readIntLE=function(h,u,d){h=h>>>0,u=u>>>0,d||ne(h,u,this.length);let w=this[h],k=1,W=0;for(;++W<u&&(k*=256);)w+=this[h+W]*k;return k*=128,w>=k&&(w-=Math.pow(2,8*u)),w},i.prototype.readIntBE=function(h,u,d){h=h>>>0,u=u>>>0,d||ne(h,u,this.length);let w=u,k=1,W=this[h+--w];for(;w>0&&(k*=256);)W+=this[h+--w]*k;return k*=128,W>=k&&(W-=Math.pow(2,8*u)),W},i.prototype.readInt8=function(h,u){return h=h>>>0,u||ne(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},i.prototype.readInt16LE=function(h,u){h=h>>>0,u||ne(h,2,this.length);let d=this[h]|this[h+1]<<8;return d&32768?d|4294901760:d},i.prototype.readInt16BE=function(h,u){h=h>>>0,u||ne(h,2,this.length);let d=this[h+1]|this[h]<<8;return d&32768?d|4294901760:d},i.prototype.readInt32LE=function(h,u){return h=h>>>0,u||ne(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},i.prototype.readInt32BE=function(h,u){return h=h>>>0,u||ne(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},i.prototype.readBigInt64LE=q(function(h){h=h>>>0,X(h,"offset");let u=this[h],d=this[h+7];(u===void 0||d===void 0)&&ye(h,this.length-8);let w=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(d<<24);return(BigInt(w)<<BigInt(32))+BigInt(u+this[++h]*256+this[++h]*65536+this[++h]*16777216)}),i.prototype.readBigInt64BE=q(function(h){h=h>>>0,X(h,"offset");let u=this[h],d=this[h+7];(u===void 0||d===void 0)&&ye(h,this.length-8);let w=(u<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(w)<<BigInt(32))+BigInt(this[++h]*16777216+this[++h]*65536+this[++h]*256+d)}),i.prototype.readFloatLE=function(h,u){return h=h>>>0,u||ne(h,4,this.length),r.read(this,h,!0,23,4)},i.prototype.readFloatBE=function(h,u){return h=h>>>0,u||ne(h,4,this.length),r.read(this,h,!1,23,4)},i.prototype.readDoubleLE=function(h,u){return h=h>>>0,u||ne(h,8,this.length),r.read(this,h,!0,52,8)},i.prototype.readDoubleBE=function(h,u){return h=h>>>0,u||ne(h,8,this.length),r.read(this,h,!1,52,8)};function we(h,u,d,w,k,W){if(!i.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>k||u<W)throw new RangeError('"value" argument is out of bounds');if(d+w>h.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(h,u,d,w){if(h=+h,u=u>>>0,d=d>>>0,!w){let Z=Math.pow(2,8*d)-1;we(this,h,u,d,Z,0)}let k=1,W=0;for(this[u]=h&255;++W<d&&(k*=256);)this[u+W]=h/k&255;return u+d},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(h,u,d,w){if(h=+h,u=u>>>0,d=d>>>0,!w){let Z=Math.pow(2,8*d)-1;we(this,h,u,d,Z,0)}let k=d-1,W=1;for(this[u+k]=h&255;--k>=0&&(W*=256);)this[u+k]=h/W&255;return u+d},i.prototype.writeUint8=i.prototype.writeUInt8=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,1,255,0),this[u]=h&255,u+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,2,65535,0),this[u]=h&255,this[u+1]=h>>>8,u+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,2,65535,0),this[u]=h>>>8,this[u+1]=h&255,u+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,4,4294967295,0),this[u+3]=h>>>24,this[u+2]=h>>>16,this[u+1]=h>>>8,this[u]=h&255,u+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,4,4294967295,0),this[u]=h>>>24,this[u+1]=h>>>16,this[u+2]=h>>>8,this[u+3]=h&255,u+4};function v(h,u,d,w,k){ee(u,w,k,h,d,7);let W=Number(u&BigInt(4294967295));h[d++]=W,W=W>>8,h[d++]=W,W=W>>8,h[d++]=W,W=W>>8,h[d++]=W;let Z=Number(u>>BigInt(32)&BigInt(4294967295));return h[d++]=Z,Z=Z>>8,h[d++]=Z,Z=Z>>8,h[d++]=Z,Z=Z>>8,h[d++]=Z,d}function Y(h,u,d,w,k){ee(u,w,k,h,d,7);let W=Number(u&BigInt(4294967295));h[d+7]=W,W=W>>8,h[d+6]=W,W=W>>8,h[d+5]=W,W=W>>8,h[d+4]=W;let Z=Number(u>>BigInt(32)&BigInt(4294967295));return h[d+3]=Z,Z=Z>>8,h[d+2]=Z,Z=Z>>8,h[d+1]=Z,Z=Z>>8,h[d]=Z,d+8}i.prototype.writeBigUInt64LE=q(function(h,u=0){return v(this,h,u,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=q(function(h,u=0){return Y(this,h,u,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(h,u,d,w){if(h=+h,u=u>>>0,!w){let Ie=Math.pow(2,8*d-1);we(this,h,u,d,Ie-1,-Ie)}let k=0,W=1,Z=0;for(this[u]=h&255;++k<d&&(W*=256);)h<0&&Z===0&&this[u+k-1]!==0&&(Z=1),this[u+k]=(h/W>>0)-Z&255;return u+d},i.prototype.writeIntBE=function(h,u,d,w){if(h=+h,u=u>>>0,!w){let Ie=Math.pow(2,8*d-1);we(this,h,u,d,Ie-1,-Ie)}let k=d-1,W=1,Z=0;for(this[u+k]=h&255;--k>=0&&(W*=256);)h<0&&Z===0&&this[u+k+1]!==0&&(Z=1),this[u+k]=(h/W>>0)-Z&255;return u+d},i.prototype.writeInt8=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,1,127,-128),h<0&&(h=255+h+1),this[u]=h&255,u+1},i.prototype.writeInt16LE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,2,32767,-32768),this[u]=h&255,this[u+1]=h>>>8,u+2},i.prototype.writeInt16BE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,2,32767,-32768),this[u]=h>>>8,this[u+1]=h&255,u+2},i.prototype.writeInt32LE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,4,2147483647,-2147483648),this[u]=h&255,this[u+1]=h>>>8,this[u+2]=h>>>16,this[u+3]=h>>>24,u+4},i.prototype.writeInt32BE=function(h,u,d){return h=+h,u=u>>>0,d||we(this,h,u,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[u]=h>>>24,this[u+1]=h>>>16,this[u+2]=h>>>8,this[u+3]=h&255,u+4},i.prototype.writeBigInt64LE=q(function(h,u=0){return v(this,h,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=q(function(h,u=0){return Y(this,h,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(h,u,d,w,k,W){if(d+w>h.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function ve(h,u,d,w,k){return u=+u,d=d>>>0,k||fe(h,u,d,4),r.write(h,u,d,w,23,4),d+4}i.prototype.writeFloatLE=function(h,u,d){return ve(this,h,u,!0,d)},i.prototype.writeFloatBE=function(h,u,d){return ve(this,h,u,!1,d)};function he(h,u,d,w,k){return u=+u,d=d>>>0,k||fe(h,u,d,8),r.write(h,u,d,w,52,8),d+8}i.prototype.writeDoubleLE=function(h,u,d){return he(this,h,u,!0,d)},i.prototype.writeDoubleBE=function(h,u,d){return he(this,h,u,!1,d)},i.prototype.copy=function(h,u,d,w){if(!i.isBuffer(h))throw new TypeError("argument should be a Buffer");if(d||(d=0),!w&&w!==0&&(w=this.length),u>=h.length&&(u=h.length),u||(u=0),w>0&&w<d&&(w=d),w===d||h.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),h.length-u<w-d&&(w=h.length-u+d);let k=w-d;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,d,w):Uint8Array.prototype.set.call(h,this.subarray(d,w),u),k},i.prototype.fill=function(h,u,d,w){if(typeof h=="string"){if(typeof u=="string"?(w=u,u=0,d=this.length):typeof d=="string"&&(w=d,d=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!i.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(h.length===1){let W=h.charCodeAt(0);(w==="utf8"&&W<128||w==="latin1")&&(h=W)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(u<0||this.length<u||this.length<d)throw new RangeError("Out of range index");if(d<=u)return this;u=u>>>0,d=d===void 0?this.length:d>>>0,h||(h=0);let k;if(typeof h=="number")for(k=u;k<d;++k)this[k]=h;else{let W=i.isBuffer(h)?h:i.from(h,w),Z=W.length;if(Z===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(k=0;k<d-u;++k)this[k+u]=W[k%Z]}return this};let B={};function E(h,u,d){B[h]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}E("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(h,u){return`The "${h}" argument must be of type number. Received type ${typeof u}`},TypeError),E("ERR_OUT_OF_RANGE",function(h,u,d){let w=`The value of "${h}" is out of range.`,k=d;return Number.isInteger(d)&&Math.abs(d)>4294967296?k=K(String(d)):typeof d=="bigint"&&(k=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(k=K(k)),k+="n"),w+=` It must be ${u}. Received ${k}`,w},RangeError);function K(h){let u="",d=h.length,w=h[0]==="-"?1:0;for(;d>=w+4;d-=3)u=`_${h.slice(d-3,d)}${u}`;return`${h.slice(0,d)}${u}`}function ce(h,u,d){X(u,"offset"),(h[u]===void 0||h[u+d]===void 0)&&ye(u,h.length-(d+1))}function ee(h,u,d,w,k,W){if(h>d||h<u){let Z=typeof u=="bigint"?"n":"",Ie;throw u===0||u===BigInt(0)?Ie=`>= 0${Z} and < 2${Z} ** ${(W+1)*8}${Z}`:Ie=`>= -(2${Z} ** ${(W+1)*8-1}${Z}) and < 2 ** ${(W+1)*8-1}${Z}`,new B.ERR_OUT_OF_RANGE("value",Ie,h)}ce(w,k,W)}function X(h,u){if(typeof h!="number")throw new B.ERR_INVALID_ARG_TYPE(u,"number",h)}function ye(h,u,d){throw Math.floor(h)!==h?(X(h,d),new B.ERR_OUT_OF_RANGE("offset","an integer",h)):u<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,h)}let pe=/[^+/0-9A-Za-z-_]/g;function R(h){if(h=h.split("=")[0],h=h.trim().replace(pe,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function j(h,u){u=u||1/0;let d,w=h.length,k=null,W=[];for(let Z=0;Z<w;++Z){if(d=h.charCodeAt(Z),d>55295&&d<57344){if(!k){if(d>56319){(u-=3)>-1&&W.push(239,191,189);continue}else if(Z+1===w){(u-=3)>-1&&W.push(239,191,189);continue}k=d;continue}if(d<56320){(u-=3)>-1&&W.push(239,191,189),k=d;continue}d=(k-55296<<10|d-56320)+65536}else k&&(u-=3)>-1&&W.push(239,191,189);if(k=null,d<128){if((u-=1)<0)break;W.push(d)}else if(d<2048){if((u-=2)<0)break;W.push(d>>6|192,d&63|128)}else if(d<65536){if((u-=3)<0)break;W.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((u-=4)<0)break;W.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return W}function F(h){let u=[];for(let d=0;d<h.length;++d)u.push(h.charCodeAt(d)&255);return u}function ie(h,u){let d,w,k,W=[];for(let Z=0;Z<h.length&&!((u-=2)<0);++Z)d=h.charCodeAt(Z),w=d>>8,k=d%256,W.push(k),W.push(w);return W}function J(h){return e.toByteArray(R(h))}function U(h,u,d,w){let k;for(k=0;k<w&&!(k+d>=u.length||k>=h.length);++k)u[k+d]=h[k];return k}function z(h,u){return h instanceof u||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===u.name}function O(h){return h!==h}let L=function(){let h="0123456789abcdef",u=new Array(256);for(let d=0;d<16;++d){let w=d*16;for(let k=0;k<16;++k)u[w+k]=h[d]+h[k]}return u}();function q(h){return typeof BigInt>"u"?ue:h}function ue(){throw new Error("BigInt not supported")}return Ot}var Xt,Hi,or,zi,Ot,Ki,mt,gr,Hn,zn,Je=Ye(()=>{le(),ae(),se(),Xt={},Hi=!1,or={},zi=!1,Ot={},Ki=!1,mt=_a(),mt.Buffer,mt.SlowBuffer,mt.INSPECT_MAX_BYTES,mt.kMaxLength,gr=mt.Buffer,Hn=mt.INSPECT_MAX_BYTES,zn=mt.kMaxLength}),le=Ye(()=>{Je()}),Ea=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,l){return l===0||l>this.max?!1:(this.aliasToTopic[l]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=r}),He=be((e,r)=>{le(),ae(),se(),r.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,l){return t.includes(l)},ArrayPrototypeIndexOf(t,l){return t.indexOf(l)},ArrayPrototypeJoin(t,l){return t.join(l)},ArrayPrototypeMap(t,l){return t.map(l)},ArrayPrototypePop(t,l){return t.pop(l)},ArrayPrototypePush(t,l){return t.push(l)},ArrayPrototypeSlice(t,l,c){return t.slice(l,c)},Error,FunctionPrototypeCall(t,l,...c){return t.call(l,...c)},FunctionPrototypeSymbolHasInstance(t,l){return Function.prototype[Symbol.hasInstance].call(t,l)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,l){return Object.defineProperties(t,l)},ObjectDefineProperty(t,l,c){return Object.defineProperty(t,l,c)},ObjectGetOwnPropertyDescriptor(t,l){return Object.getOwnPropertyDescriptor(t,l)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,l){return Object.setPrototypeOf(t,l)},Promise,PromisePrototypeCatch(t,l){return t.catch(l)},PromisePrototypeThen(t,l,c){return t.then(l,c)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,l){return t.test(l)},SafeSet:Set,String,StringPrototypeSlice(t,l,c){return t.slice(l,c)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,l,c){return t.set(l,c)},Uint8Array}}),yt=be((e,r)=>{le(),ae(),se();var t=(Je(),Le(Ge)),l=Object.getPrototypeOf(async function(){}).constructor,c=globalThis.Blob||t.Blob,o=typeof c<"u"?function(s){return s instanceof c}:function(s){return!1},i=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let n="";for(let a=0;a<s.length;a++)n+=`    ${s[a].stack}
`;super(n),this.name="AggregateError",this.errors=s}};r.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(s){let n=!1;return function(...a){n||(n=!0,s.apply(this,a))}},createDeferredPromise:function(){let s,n;return{promise:new Promise((a,f)=>{s=a,n=f}),resolve:s,reject:n}},promisify(s){return new Promise((n,a)=>{s((f,...p)=>f?a(f):n(...p))})},debuglog(){return function(){}},format(s,...n){return s.replace(/%([sdifj])/g,function(...[a,f]){let p=n.shift();return f==="f"?p.toFixed(6):f==="j"?JSON.stringify(p):f==="s"&&typeof p=="object"?`${p.constructor!==Object?p.constructor.name:""} {}`.trim():p.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof l},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:o},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Qi=be((e,r)=>{le(),ae(),se();var{AbortController:t,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;r.exports=t,r.exports.AbortSignal=l,r.exports.default=t}),rt=be((e,r)=>{le(),ae(),se();var{format:t,inspect:l,AggregateError:c}=yt(),o=globalThis.AggregateError||c,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],n=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",f={};function p(_,A){if(!_)throw new f.ERR_INTERNAL_ASSERTION(A)}function g(_){let A="",N=_.length,D=_[0]==="-"?1:0;for(;N>=D+4;N-=3)A=`_${_.slice(N-3,N)}${A}`;return`${_.slice(0,N)}${A}`}function b(_,A,N){if(typeof A=="function")return p(A.length<=N.length,`Code: ${_}; The provided arguments length (${N.length}) does not match the required ones (${A.length}).`),A(...N);let D=(A.match(/%[dfijoOs]/g)||[]).length;return p(D===N.length,`Code: ${_}; The provided arguments length (${N.length}) does not match the required ones (${D}).`),N.length===0?A:t(A,...N)}function m(_,A,N){N||(N=Error);class D extends N{constructor(...T){super(b(_,A,T))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(D.prototype,{name:{value:N.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),D.prototype.code=_,D.prototype[i]=!0,f[_]=D}function y(_){let A=a+_.name;return Object.defineProperty(_,"name",{value:A}),_}function I(_,A){if(_&&A&&_!==A){if(Array.isArray(A.errors))return A.errors.push(_),A;let N=new o([A,_],A.message);return N.code=A.code,N}return _||A}var x=class extends Error{constructor(_="The operation was aborted",A=void 0){if(A!==void 0&&typeof A!="object")throw new f.ERR_INVALID_ARG_TYPE("options","Object",A);super(_,A),this.code="ABORT_ERR",this.name="AbortError"}};m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(_,A,N)=>{p(typeof _=="string","'name' must be a string"),Array.isArray(A)||(A=[A]);let D="The ";_.endsWith(" argument")?D+=`${_} `:D+=`"${_}" ${_.includes(".")?"property":"argument"} `,D+="must be ";let C=[],T=[],M=[];for(let G of A)p(typeof G=="string","All expected entries have to be of type string"),s.includes(G)?C.push(G.toLowerCase()):n.test(G)?T.push(G):(p(G!=="object",'The value "object" should be written as "Object"'),M.push(G));if(T.length>0){let G=C.indexOf("object");G!==-1&&(C.splice(C,G,1),T.push("Object"))}if(C.length>0){switch(C.length){case 1:D+=`of type ${C[0]}`;break;case 2:D+=`one of type ${C[0]} or ${C[1]}`;break;default:{let G=C.pop();D+=`one of type ${C.join(", ")}, or ${G}`}}(T.length>0||M.length>0)&&(D+=" or ")}if(T.length>0){switch(T.length){case 1:D+=`an instance of ${T[0]}`;break;case 2:D+=`an instance of ${T[0]} or ${T[1]}`;break;default:{let G=T.pop();D+=`an instance of ${T.join(", ")}, or ${G}`}}M.length>0&&(D+=" or ")}switch(M.length){case 0:break;case 1:M[0].toLowerCase()!==M[0]&&(D+="an "),D+=`${M[0]}`;break;case 2:D+=`one of ${M[0]} or ${M[1]}`;break;default:{let G=M.pop();D+=`one of ${M.join(", ")}, or ${G}`}}if(N==null)D+=`. Received ${N}`;else if(typeof N=="function"&&N.name)D+=`. Received function ${N.name}`;else if(typeof N=="object"){var $;if(($=N.constructor)!==null&&$!==void 0&&$.name)D+=`. Received an instance of ${N.constructor.name}`;else{let G=l(N,{depth:-1});D+=`. Received ${G}`}}else{let G=l(N,{colors:!1});G.length>25&&(G=`${G.slice(0,25)}...`),D+=`. Received type ${typeof N} (${G})`}return D},TypeError),m("ERR_INVALID_ARG_VALUE",(_,A,N="is invalid")=>{let D=l(A);return D.length>128&&(D=D.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${N}. Received ${D}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(_,A,N)=>{var D;let C=N!=null&&(D=N.constructor)!==null&&D!==void 0&&D.name?`instance of ${N.constructor.name}`:`type ${typeof N}`;return`Expected ${_} to be returned from the "${A}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(..._)=>{p(_.length>0,"At least one arg needs to be specified");let A,N=_.length;switch(_=(Array.isArray(_)?_:[_]).map(D=>`"${D}"`).join(" or "),N){case 1:A+=`The ${_[0]} argument`;break;case 2:A+=`The ${_[0]} and ${_[1]} arguments`;break;default:{let D=_.pop();A+=`The ${_.join(", ")}, and ${D} arguments`}break}return`${A} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(_,A,N)=>{p(A,'Missing "range" argument');let D;return Number.isInteger(N)&&Math.abs(N)>2**32?D=g(String(N)):typeof N=="bigint"?(D=String(N),(N>2n**32n||N<-(2n**32n))&&(D=g(D)),D+="n"):D=l(N),`The value of "${_}" is out of range. It must be ${A}. Received ${D}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),r.exports={AbortError:x,aggregateTwoErrors:y(I),hideStackFrames:y,codes:f}}),br=be((e,r)=>{le(),ae(),se();var{ArrayIsArray:t,ArrayPrototypeIncludes:l,ArrayPrototypeJoin:c,ArrayPrototypeMap:o,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:n,NumberMIN_SAFE_INTEGER:a,NumberParseInt:f,ObjectPrototypeHasOwnProperty:p,RegExpPrototypeExec:g,String:b,StringPrototypeToUpperCase:m,StringPrototypeTrim:y}=He(),{hideStackFrames:I,codes:{ERR_SOCKET_BAD_PORT:x,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:A,ERR_OUT_OF_RANGE:N,ERR_UNKNOWN_SIGNAL:D}}=rt(),{normalizeEncoding:C}=yt(),{isAsyncFunction:T,isArrayBufferView:M}=yt().types,$={};function G(U){return U===(U|0)}function re(U){return U===U>>>0}var S=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function te(U,z,O){if(typeof U>"u"&&(U=O),typeof U=="string"){if(g(S,U)===null)throw new A(z,U,H);U=f(U,8)}return oe(U,z),U}var Q=I((U,z,O=a,L=n)=>{if(typeof U!="number")throw new _(z,"number",U);if(!i(U))throw new N(z,"an integer",U);if(U<O||U>L)throw new N(z,`>= ${O} && <= ${L}`,U)}),ge=I((U,z,O=-2147483648,L=2147483647)=>{if(typeof U!="number")throw new _(z,"number",U);if(!i(U))throw new N(z,"an integer",U);if(U<O||U>L)throw new N(z,`>= ${O} && <= ${L}`,U)}),oe=I((U,z,O=!1)=>{if(typeof U!="number")throw new _(z,"number",U);if(!i(U))throw new N(z,"an integer",U);let L=O?1:0,q=4294967295;if(U<L||U>q)throw new N(z,`>= ${L} && <= ${q}`,U)});function V(U,z){if(typeof U!="string")throw new _(z,"string",U)}function me(U,z,O=void 0,L){if(typeof U!="number")throw new _(z,"number",U);if(O!=null&&U<O||L!=null&&U>L||(O!=null||L!=null)&&s(U))throw new N(z,`${O!=null?`>= ${O}`:""}${O!=null&&L!=null?" && ":""}${L!=null?`<= ${L}`:""}`,U)}var ne=I((U,z,O)=>{if(!l(O,U)){let L="must be one of: "+c(o(O,q=>typeof q=="string"?`'${q}'`:b(q)),", ");throw new A(z,U,L)}});function we(U,z){if(typeof U!="boolean")throw new _(z,"boolean",U)}function v(U,z,O){return U==null||!p(U,z)?O:U[z]}var Y=I((U,z,O=null)=>{let L=v(O,"allowArray",!1),q=v(O,"allowFunction",!1);if(!v(O,"nullable",!1)&&U===null||!L&&t(U)||typeof U!="object"&&(!q||typeof U!="function"))throw new _(z,"Object",U)}),fe=I((U,z)=>{if(U!=null&&typeof U!="object"&&typeof U!="function")throw new _(z,"a dictionary",U)}),ve=I((U,z,O=0)=>{if(!t(U))throw new _(z,"Array",U);if(U.length<O){let L=`must be longer than ${O}`;throw new A(z,U,L)}});function he(U,z){ve(U,z);for(let O=0;O<U.length;O++)V(U[O],`${z}[${O}]`)}function B(U,z){ve(U,z);for(let O=0;O<U.length;O++)we(U[O],`${z}[${O}]`)}function E(U,z="signal"){if(V(U,z),$[U]===void 0)throw $[m(U)]!==void 0?new D(U+" (signals must use all capital letters)"):new D(U)}var K=I((U,z="buffer")=>{if(!M(U))throw new _(z,["Buffer","TypedArray","DataView"],U)});function ce(U,z){let O=C(z),L=U.length;if(O==="hex"&&L%2!==0)throw new A("encoding",z,`is invalid for data of length ${L}`)}function ee(U,z="Port",O=!0){if(typeof U!="number"&&typeof U!="string"||typeof U=="string"&&y(U).length===0||+U!==+U>>>0||U>65535||U===0&&!O)throw new x(z,U,O);return U|0}var X=I((U,z)=>{if(U!==void 0&&(U===null||typeof U!="object"||!("aborted"in U)))throw new _(z,"AbortSignal",U)}),ye=I((U,z)=>{if(typeof U!="function")throw new _(z,"Function",U)}),pe=I((U,z)=>{if(typeof U!="function"||T(U))throw new _(z,"Function",U)}),R=I((U,z)=>{if(U!==void 0)throw new _(z,"undefined",U)});function j(U,z,O){if(!l(O,U))throw new _(z,`('${c(O,"|")}')`,U)}var F=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ie(U,z){if(typeof U>"u"||!g(F,U))throw new A(z,U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function J(U){if(typeof U=="string")return ie(U,"hints"),U;if(t(U)){let z=U.length,O="";if(z===0)return O;for(let L=0;L<z;L++){let q=U[L];ie(q,"hints"),O+=q,L!==z-1&&(O+=", ")}return O}throw new A("hints",U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}r.exports={isInt32:G,isUint32:re,parseFileMode:te,validateArray:ve,validateStringArray:he,validateBooleanArray:B,validateBoolean:we,validateBuffer:K,validateDictionary:fe,validateEncoding:ce,validateFunction:ye,validateInt32:ge,validateInteger:Q,validateNumber:me,validateObject:Y,validateOneOf:ne,validatePlainFunction:pe,validatePort:ee,validateSignalName:E,validateString:V,validateUint32:oe,validateUndefined:R,validateUnion:j,validateAbortSignal:X,validateLinkHeaderValue:J}}),Nt=be((e,r)=>{le(),ae(),se();var t=r.exports={},l,c;function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=o}catch{l=o}try{typeof clearTimeout=="function"?c=clearTimeout:c=i}catch{c=i}})();function s(x){if(l===setTimeout)return setTimeout(x,0);if((l===o||!l)&&setTimeout)return l=setTimeout,setTimeout(x,0);try{return l(x,0)}catch{try{return l.call(null,x,0)}catch{return l.call(this,x,0)}}}function n(x){if(c===clearTimeout)return clearTimeout(x);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(x);try{return c(x)}catch{try{return c.call(null,x)}catch{return c.call(this,x)}}}var a=[],f=!1,p,g=-1;function b(){!f||!p||(f=!1,p.length?a=p.concat(a):g=-1,a.length&&m())}function m(){if(!f){var x=s(b);f=!0;for(var _=a.length;_;){for(p=a,a=[];++g<_;)p&&p[g].run();g=-1,_=a.length}p=null,f=!1,n(x)}}t.nextTick=function(x){var _=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)_[A-1]=arguments[A];a.push(new y(x,_)),a.length===1&&!f&&s(m)};function y(x,_){this.fun=x,this.array=_}y.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function I(){}t.on=I,t.addListener=I,t.once=I,t.off=I,t.removeListener=I,t.removeAllListeners=I,t.emit=I,t.prependListener=I,t.prependOnceListener=I,t.listeners=function(x){return[]},t.binding=function(x){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(x){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),wt=be((e,r)=>{le(),ae(),se();var{Symbol:t,SymbolAsyncIterator:l,SymbolIterator:c,SymbolFor:o}=He(),i=t("kDestroyed"),s=t("kIsErrored"),n=t("kIsReadable"),a=t("kIsDisturbed"),f=o("nodejs.webstream.isClosedPromise"),p=o("nodejs.webstream.controllerErrorFunction");function g(v,Y=!1){var fe;return!!(v&&typeof v.pipe=="function"&&typeof v.on=="function"&&(!Y||typeof v.pause=="function"&&typeof v.resume=="function")&&(!v._writableState||((fe=v._readableState)===null||fe===void 0?void 0:fe.readable)!==!1)&&(!v._writableState||v._readableState))}function b(v){var Y;return!!(v&&typeof v.write=="function"&&typeof v.on=="function"&&(!v._readableState||((Y=v._writableState)===null||Y===void 0?void 0:Y.writable)!==!1))}function m(v){return!!(v&&typeof v.pipe=="function"&&v._readableState&&typeof v.on=="function"&&typeof v.write=="function")}function y(v){return v&&(v._readableState||v._writableState||typeof v.write=="function"&&typeof v.on=="function"||typeof v.pipe=="function"&&typeof v.on=="function")}function I(v){return!!(v&&!y(v)&&typeof v.pipeThrough=="function"&&typeof v.getReader=="function"&&typeof v.cancel=="function")}function x(v){return!!(v&&!y(v)&&typeof v.getWriter=="function"&&typeof v.abort=="function")}function _(v){return!!(v&&!y(v)&&typeof v.readable=="object"&&typeof v.writable=="object")}function A(v){return I(v)||x(v)||_(v)}function N(v,Y){return v==null?!1:Y===!0?typeof v[l]=="function":Y===!1?typeof v[c]=="function":typeof v[l]=="function"||typeof v[c]=="function"}function D(v){if(!y(v))return null;let Y=v._writableState,fe=v._readableState,ve=Y||fe;return!!(v.destroyed||v[i]||ve!=null&&ve.destroyed)}function C(v){if(!b(v))return null;if(v.writableEnded===!0)return!0;let Y=v._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function T(v,Y){if(!b(v))return null;if(v.writableFinished===!0)return!0;let fe=v._writableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.finished)!="boolean"?null:!!(fe.finished||Y===!1&&fe.ended===!0&&fe.length===0)}function M(v){if(!g(v))return null;if(v.readableEnded===!0)return!0;let Y=v._readableState;return!Y||Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function $(v,Y){if(!g(v))return null;let fe=v._readableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.endEmitted)!="boolean"?null:!!(fe.endEmitted||Y===!1&&fe.ended===!0&&fe.length===0)}function G(v){return v&&v[n]!=null?v[n]:typeof(v==null?void 0:v.readable)!="boolean"?null:D(v)?!1:g(v)&&v.readable&&!$(v)}function re(v){return typeof(v==null?void 0:v.writable)!="boolean"?null:D(v)?!1:b(v)&&v.writable&&!C(v)}function S(v,Y){return y(v)?D(v)?!0:!((Y==null?void 0:Y.readable)!==!1&&G(v)||(Y==null?void 0:Y.writable)!==!1&&re(v)):null}function H(v){var Y,fe;return y(v)?v.writableErrored?v.writableErrored:(Y=(fe=v._writableState)===null||fe===void 0?void 0:fe.errored)!==null&&Y!==void 0?Y:null:null}function te(v){var Y,fe;return y(v)?v.readableErrored?v.readableErrored:(Y=(fe=v._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&Y!==void 0?Y:null:null}function Q(v){if(!y(v))return null;if(typeof v.closed=="boolean")return v.closed;let Y=v._writableState,fe=v._readableState;return typeof(Y==null?void 0:Y.closed)=="boolean"||typeof(fe==null?void 0:fe.closed)=="boolean"?(Y==null?void 0:Y.closed)||(fe==null?void 0:fe.closed):typeof v._closed=="boolean"&&ge(v)?v._closed:null}function ge(v){return typeof v._closed=="boolean"&&typeof v._defaultKeepAlive=="boolean"&&typeof v._removedConnection=="boolean"&&typeof v._removedContLen=="boolean"}function oe(v){return typeof v._sent100=="boolean"&&ge(v)}function V(v){var Y;return typeof v._consuming=="boolean"&&typeof v._dumped=="boolean"&&((Y=v.req)===null||Y===void 0?void 0:Y.upgradeOrConnect)===void 0}function me(v){if(!y(v))return null;let Y=v._writableState,fe=v._readableState,ve=Y||fe;return!ve&&oe(v)||!!(ve&&ve.autoDestroy&&ve.emitClose&&ve.closed===!1)}function ne(v){var Y;return!!(v&&((Y=v[a])!==null&&Y!==void 0?Y:v.readableDidRead||v.readableAborted))}function we(v){var Y,fe,ve,he,B,E,K,ce,ee,X;return!!(v&&((Y=(fe=(ve=(he=(B=(E=v[s])!==null&&E!==void 0?E:v.readableErrored)!==null&&B!==void 0?B:v.writableErrored)!==null&&he!==void 0?he:(K=v._readableState)===null||K===void 0?void 0:K.errorEmitted)!==null&&ve!==void 0?ve:(ce=v._writableState)===null||ce===void 0?void 0:ce.errorEmitted)!==null&&fe!==void 0?fe:(ee=v._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&Y!==void 0?Y:!((X=v._writableState)===null||X===void 0)&&X.errored))}r.exports={kDestroyed:i,isDisturbed:ne,kIsDisturbed:a,isErrored:we,kIsErrored:s,isReadable:G,kIsReadable:n,kIsClosedPromise:f,kControllerErrorFunction:p,isClosed:Q,isDestroyed:D,isDuplexNodeStream:m,isFinished:S,isIterable:N,isReadableNodeStream:g,isReadableStream:I,isReadableEnded:M,isReadableFinished:$,isReadableErrored:te,isNodeStream:y,isWebStream:A,isWritable:re,isWritableNodeStream:b,isWritableStream:x,isWritableEnded:C,isWritableFinished:T,isWritableErrored:H,isServerRequest:V,isServerResponse:oe,willEmitClose:me,isTransformStream:_}}),Rt=be((e,r)=>{le(),ae(),se();var t=Nt(),{AbortError:l,codes:c}=rt(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:i}=c,{kEmptyObject:s,once:n}=yt(),{validateAbortSignal:a,validateFunction:f,validateObject:p,validateBoolean:g}=br(),{Promise:b,PromisePrototypeThen:m}=He(),{isClosed:y,isReadable:I,isReadableNodeStream:x,isReadableStream:_,isReadableFinished:A,isReadableErrored:N,isWritable:D,isWritableNodeStream:C,isWritableStream:T,isWritableFinished:M,isWritableErrored:$,isNodeStream:G,willEmitClose:re,kIsClosedPromise:S}=wt();function H(V){return V.setHeader&&typeof V.abort=="function"}var te=()=>{};function Q(V,me,ne){var we,v;if(arguments.length===2?(ne=me,me=s):me==null?me=s:p(me,"options"),f(ne,"callback"),a(me.signal,"options.signal"),ne=n(ne),_(V)||T(V))return ge(V,me,ne);if(!G(V))throw new o("stream",["ReadableStream","WritableStream","Stream"],V);let Y=(we=me.readable)!==null&&we!==void 0?we:x(V),fe=(v=me.writable)!==null&&v!==void 0?v:C(V),ve=V._writableState,he=V._readableState,B=()=>{V.writable||ce()},E=re(V)&&x(V)===Y&&C(V)===fe,K=M(V,!1),ce=()=>{K=!0,V.destroyed&&(E=!1),!(E&&(!V.readable||Y))&&(!Y||ee)&&ne.call(V)},ee=A(V,!1),X=()=>{ee=!0,V.destroyed&&(E=!1),!(E&&(!V.writable||fe))&&(!fe||K)&&ne.call(V)},ye=J=>{ne.call(V,J)},pe=y(V),R=()=>{pe=!0;let J=$(V)||N(V);if(J&&typeof J!="boolean")return ne.call(V,J);if(Y&&!ee&&x(V,!0)&&!A(V,!1))return ne.call(V,new i);if(fe&&!K&&!M(V,!1))return ne.call(V,new i);ne.call(V)},j=()=>{pe=!0;let J=$(V)||N(V);if(J&&typeof J!="boolean")return ne.call(V,J);ne.call(V)},F=()=>{V.req.on("finish",ce)};H(V)?(V.on("complete",ce),E||V.on("abort",R),V.req?F():V.on("request",F)):fe&&!ve&&(V.on("end",B),V.on("close",B)),!E&&typeof V.aborted=="boolean"&&V.on("aborted",R),V.on("end",X),V.on("finish",ce),me.error!==!1&&V.on("error",ye),V.on("close",R),pe?t.nextTick(R):ve!=null&&ve.errorEmitted||he!=null&&he.errorEmitted?E||t.nextTick(j):(!Y&&(!E||I(V))&&(K||D(V)===!1)||!fe&&(!E||D(V))&&(ee||I(V)===!1)||he&&V.req&&V.aborted)&&t.nextTick(j);let ie=()=>{ne=te,V.removeListener("aborted",R),V.removeListener("complete",ce),V.removeListener("abort",R),V.removeListener("request",F),V.req&&V.req.removeListener("finish",ce),V.removeListener("end",B),V.removeListener("close",B),V.removeListener("finish",ce),V.removeListener("end",X),V.removeListener("error",ye),V.removeListener("close",R)};if(me.signal&&!pe){let J=()=>{let U=ne;ie(),U.call(V,new l(void 0,{cause:me.signal.reason}))};if(me.signal.aborted)t.nextTick(J);else{let U=ne;ne=n((...z)=>{me.signal.removeEventListener("abort",J),U.apply(V,z)}),me.signal.addEventListener("abort",J)}}return ie}function ge(V,me,ne){let we=!1,v=te;if(me.signal)if(v=()=>{we=!0,ne.call(V,new l(void 0,{cause:me.signal.reason}))},me.signal.aborted)t.nextTick(v);else{let fe=ne;ne=n((...ve)=>{me.signal.removeEventListener("abort",v),fe.apply(V,ve)}),me.signal.addEventListener("abort",v)}let Y=(...fe)=>{we||t.nextTick(()=>ne.apply(V,fe))};return m(V[S].promise,Y,Y),te}function oe(V,me){var ne;let we=!1;return me===null&&(me=s),(ne=me)!==null&&ne!==void 0&&ne.cleanup&&(g(me.cleanup,"cleanup"),we=me.cleanup),new b((v,Y)=>{let fe=Q(V,me,ve=>{we&&fe(),ve?Y(ve):v()})})}r.exports=Q,r.exports.finished=oe}),Zt=be((e,r)=>{le(),ae(),se();var t=Nt(),{aggregateTwoErrors:l,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:o}=rt(),{Symbol:i}=He(),{kDestroyed:s,isDestroyed:n,isFinished:a,isServerRequest:f}=wt(),p=i("kDestroy"),g=i("kConstruct");function b(S,H,te){S&&(S.stack,H&&!H.errored&&(H.errored=S),te&&!te.errored&&(te.errored=S))}function m(S,H){let te=this._readableState,Q=this._writableState,ge=Q||te;return Q!=null&&Q.destroyed||te!=null&&te.destroyed?(typeof H=="function"&&H(),this):(b(S,Q,te),Q&&(Q.destroyed=!0),te&&(te.destroyed=!0),ge.constructed?y(this,S,H):this.once(p,function(oe){y(this,l(oe,S),H)}),this)}function y(S,H,te){let Q=!1;function ge(oe){if(Q)return;Q=!0;let V=S._readableState,me=S._writableState;b(oe,me,V),me&&(me.closed=!0),V&&(V.closed=!0),typeof te=="function"&&te(oe),oe?t.nextTick(I,S,oe):t.nextTick(x,S)}try{S._destroy(H||null,ge)}catch(oe){ge(oe)}}function I(S,H){_(S,H),x(S)}function x(S){let H=S._readableState,te=S._writableState;te&&(te.closeEmitted=!0),H&&(H.closeEmitted=!0),(te!=null&&te.emitClose||H!=null&&H.emitClose)&&S.emit("close")}function _(S,H){let te=S._readableState,Q=S._writableState;Q!=null&&Q.errorEmitted||te!=null&&te.errorEmitted||(Q&&(Q.errorEmitted=!0),te&&(te.errorEmitted=!0),S.emit("error",H))}function A(){let S=this._readableState,H=this._writableState;S&&(S.constructed=!0,S.closed=!1,S.closeEmitted=!1,S.destroyed=!1,S.errored=null,S.errorEmitted=!1,S.reading=!1,S.ended=S.readable===!1,S.endEmitted=S.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function N(S,H,te){let Q=S._readableState,ge=S._writableState;if(ge!=null&&ge.destroyed||Q!=null&&Q.destroyed)return this;Q!=null&&Q.autoDestroy||ge!=null&&ge.autoDestroy?S.destroy(H):H&&(H.stack,ge&&!ge.errored&&(ge.errored=H),Q&&!Q.errored&&(Q.errored=H),te?t.nextTick(_,S,H):_(S,H))}function D(S,H){if(typeof S._construct!="function")return;let te=S._readableState,Q=S._writableState;te&&(te.constructed=!1),Q&&(Q.constructed=!1),S.once(g,H),!(S.listenerCount(g)>1)&&t.nextTick(C,S)}function C(S){let H=!1;function te(Q){if(H){N(S,Q??new c);return}H=!0;let ge=S._readableState,oe=S._writableState,V=oe||ge;ge&&(ge.constructed=!0),oe&&(oe.constructed=!0),V.destroyed?S.emit(p,Q):Q?N(S,Q,!0):t.nextTick(T,S)}try{S._construct(Q=>{t.nextTick(te,Q)})}catch(Q){t.nextTick(te,Q)}}function T(S){S.emit(g)}function M(S){return(S==null?void 0:S.setHeader)&&typeof S.abort=="function"}function $(S){S.emit("close")}function G(S,H){S.emit("error",H),t.nextTick($,S)}function re(S,H){!S||n(S)||(!H&&!a(S)&&(H=new o),f(S)?(S.socket=null,S.destroy(H)):M(S)?S.abort():M(S.req)?S.req.abort():typeof S.destroy=="function"?S.destroy(H):typeof S.close=="function"?S.close():H?t.nextTick(G,S,H):t.nextTick($,S),S.destroyed||(S[s]=!0))}r.exports={construct:D,destroyer:re,destroy:m,undestroy:A,errorOrDestroy:N}});function xe(){xe.init.call(this)}function mr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Kn(e){return e._maxListeners===void 0?xe.defaultMaxListeners:e._maxListeners}function Qn(e,r,t,l){var c,o,i,s;if(mr(t),(o=e._events)===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),o=e._events),i=o[r]),i===void 0)i=o[r]=t,++e._eventsCount;else if(typeof i=="function"?i=o[r]=l?[t,i]:[i,t]:l?i.unshift(t):i.push(t),(c=Kn(e))>0&&i.length>c&&!i.warned){i.warned=!0;var n=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");n.name="MaxListenersExceededWarning",n.emitter=e,n.type=r,n.count=i.length,s=n,console&&console.warn&&console.warn(s)}return e}function Sa(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Yn(e,r,t){var l={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},c=Sa.bind(l);return c.listener=t,l.wrapFn=c,c}function Gn(e,r,t){var l=e._events;if(l===void 0)return[];var c=l[r];return c===void 0?[]:typeof c=="function"?t?[c.listener||c]:[c]:t?function(o){for(var i=new Array(o.length),s=0;s<i.length;++s)i[s]=o[s].listener||o[s];return i}(c):Xn(c,c.length)}function Jn(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function Xn(e,r){for(var t=new Array(r),l=0;l<r;++l)t[l]=e[l];return t}var Zn,eo,jt,Yi,Gi,Ji,nt,to=Ye(()=>{le(),ae(),se(),jt=typeof Reflect=="object"?Reflect:null,Yi=jt&&typeof jt.apply=="function"?jt.apply:function(e,r,t){return Function.prototype.apply.call(e,r,t)},eo=jt&&typeof jt.ownKeys=="function"?jt.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Gi=Number.isNaN||function(e){return e!=e},Zn=xe,xe.EventEmitter=xe,xe.prototype._events=void 0,xe.prototype._eventsCount=0,xe.prototype._maxListeners=void 0,Ji=10,Object.defineProperty(xe,"defaultMaxListeners",{enumerable:!0,get:function(){return Ji},set:function(e){if(typeof e!="number"||e<0||Gi(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ji=e}}),xe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},xe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Gi(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},xe.prototype.getMaxListeners=function(){return Kn(this)},xe.prototype.emit=function(e){for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);var l=e==="error",c=this._events;if(c!==void 0)l=l&&c.error===void 0;else if(!l)return!1;if(l){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var i=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw i.context=o,i}var s=c[e];if(s===void 0)return!1;if(typeof s=="function")Yi(s,this,r);else{var n=s.length,a=Xn(s,n);for(t=0;t<n;++t)Yi(a[t],this,r)}return!0},xe.prototype.addListener=function(e,r){return Qn(this,e,r,!1)},xe.prototype.on=xe.prototype.addListener,xe.prototype.prependListener=function(e,r){return Qn(this,e,r,!0)},xe.prototype.once=function(e,r){return mr(r),this.on(e,Yn(this,e,r)),this},xe.prototype.prependOnceListener=function(e,r){return mr(r),this.prependListener(e,Yn(this,e,r)),this},xe.prototype.removeListener=function(e,r){var t,l,c,o,i;if(mr(r),(l=this._events)===void 0)return this;if((t=l[e])===void 0)return this;if(t===r||t.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,t.listener||r));else if(typeof t!="function"){for(c=-1,o=t.length-1;o>=0;o--)if(t[o]===r||t[o].listener===r){i=t[o].listener,c=o;break}if(c<0)return this;c===0?t.shift():function(s,n){for(;n+1<s.length;n++)s[n]=s[n+1];s.pop()}(t,c),t.length===1&&(l[e]=t[0]),l.removeListener!==void 0&&this.emit("removeListener",e,i||r)}return this},xe.prototype.off=xe.prototype.removeListener,xe.prototype.removeAllListeners=function(e){var r,t,l;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var c,o=Object.keys(t);for(l=0;l<o.length;++l)(c=o[l])!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(r=t[e])=="function")this.removeListener(e,r);else if(r!==void 0)for(l=r.length-1;l>=0;l--)this.removeListener(e,r[l]);return this},xe.prototype.listeners=function(e){return Gn(this,e,!0)},xe.prototype.rawListeners=function(e){return Gn(this,e,!1)},xe.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):Jn.call(e,r)},xe.prototype.listenerCount=Jn,xe.prototype.eventNames=function(){return this._eventsCount>0?eo(this._events):[]},nt=Zn,nt.EventEmitter,nt.defaultMaxListeners,nt.init,nt.listenerCount,nt.EventEmitter,nt.defaultMaxListeners,nt.init,nt.listenerCount}),Dt={};xt(Dt,{EventEmitter:()=>ro,default:()=>nt,defaultMaxListeners:()=>io,init:()=>no,listenerCount:()=>oo,on:()=>so,once:()=>ao});var ro,io,no,oo,so,ao,er=Ye(()=>{le(),ae(),se(),to(),to(),nt.once=function(e,r){return new Promise((t,l)=>{function c(...i){o!==void 0&&e.removeListener("error",o),t(i)}let o;r!=="error"&&(o=i=>{e.removeListener(name,c),l(i)},e.once("error",o)),e.once(r,c)})},nt.on=function(e,r){let t=[],l=[],c=null,o=!1,i={async next(){let a=t.shift();if(a)return createIterResult(a,!1);if(c){let f=Promise.reject(c);return c=null,f}return o?createIterResult(void 0,!0):new Promise((f,p)=>l.push({resolve:f,reject:p}))},async return(){e.removeListener(r,s),e.removeListener("error",n),o=!0;for(let a of l)a.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(a){c=a,e.removeListener(r,s),e.removeListener("error",n)},[Symbol.asyncIterator](){return this}};return e.on(r,s),e.on("error",n),i;function s(...a){let f=l.shift();f?f.resolve(createIterResult(a,!1)):t.push(a)}function n(a){o=!0;let f=l.shift();f?f.reject(a):c=a,i.return()}},{EventEmitter:ro,defaultMaxListeners:io,init:no,listenerCount:oo,on:so,once:ao}=nt}),Xi=be((e,r)=>{le(),ae(),se();var{ArrayIsArray:t,ObjectSetPrototypeOf:l}=He(),{EventEmitter:c}=(er(),Le(Dt));function o(s){c.call(this,s)}l(o.prototype,c.prototype),l(o,c),o.prototype.pipe=function(s,n){let a=this;function f(x){s.writable&&s.write(x)===!1&&a.pause&&a.pause()}a.on("data",f);function p(){a.readable&&a.resume&&a.resume()}s.on("drain",p),!s._isStdio&&(!n||n.end!==!1)&&(a.on("end",b),a.on("close",m));let g=!1;function b(){g||(g=!0,s.end())}function m(){g||(g=!0,typeof s.destroy=="function"&&s.destroy())}function y(x){I(),c.listenerCount(this,"error")===0&&this.emit("error",x)}i(a,"error",y),i(s,"error",y);function I(){a.removeListener("data",f),s.removeListener("drain",p),a.removeListener("end",b),a.removeListener("close",m),a.removeListener("error",y),s.removeListener("error",y),a.removeListener("end",I),a.removeListener("close",I),s.removeListener("close",I)}return a.on("end",I),a.on("close",I),s.on("close",I),s.emit("pipe",a),s};function i(s,n,a){if(typeof s.prependListener=="function")return s.prependListener(n,a);!s._events||!s._events[n]?s.on(n,a):t(s._events[n])?s._events[n].unshift(a):s._events[n]=[a,s._events[n]]}r.exports={Stream:o,prependListener:i}}),yr=be((e,r)=>{le(),ae(),se();var{AbortError:t,codes:l}=rt(),{isNodeStream:c,isWebStream:o,kControllerErrorFunction:i}=wt(),s=Rt(),{ERR_INVALID_ARG_TYPE:n}=l,a=(f,p)=>{if(typeof f!="object"||!("aborted"in f))throw new n(p,"AbortSignal",f)};r.exports.addAbortSignal=function(f,p){if(a(f,"signal"),!c(p)&&!o(p))throw new n("stream",["ReadableStream","WritableStream","Stream"],p);return r.exports.addAbortSignalNoValidate(f,p)},r.exports.addAbortSignalNoValidate=function(f,p){if(typeof f!="object"||!("aborted"in f))return p;let g=c(p)?()=>{p.destroy(new t(void 0,{cause:f.reason}))}:()=>{p[i](new t(void 0,{cause:f.reason}))};return f.aborted?g():(f.addEventListener("abort",g),s(p,()=>f.removeEventListener("abort",g))),p}}),Aa=be((e,r)=>{le(),ae(),se();var{StringPrototypeSlice:t,SymbolIterator:l,TypedArrayPrototypeSet:c,Uint8Array:o}=He(),{Buffer:i}=(Je(),Le(Ge)),{inspect:s}=yt();r.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(n){let a={data:n,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length}unshift(n){let a={data:n,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length}shift(){if(this.length===0)return;let n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}clear(){this.head=this.tail=null,this.length=0}join(n){if(this.length===0)return"";let a=this.head,f=""+a.data;for(;(a=a.next)!==null;)f+=n+a.data;return f}concat(n){if(this.length===0)return i.alloc(0);let a=i.allocUnsafe(n>>>0),f=this.head,p=0;for(;f;)c(a,f.data,p),p+=f.data.length,f=f.next;return a}consume(n,a){let f=this.head.data;if(n<f.length){let p=f.slice(0,n);return this.head.data=f.slice(n),p}return n===f.length?this.shift():a?this._getString(n):this._getBuffer(n)}first(){return this.head.data}*[l](){for(let n=this.head;n;n=n.next)yield n.data}_getString(n){let a="",f=this.head,p=0;do{let g=f.data;if(n>g.length)a+=g,n-=g.length;else{n===g.length?(a+=g,++p,f.next?this.head=f.next:this.head=this.tail=null):(a+=t(g,0,n),this.head=f,f.data=t(g,n));break}++p}while((f=f.next)!==null);return this.length-=p,a}_getBuffer(n){let a=i.allocUnsafe(n),f=n,p=this.head,g=0;do{let b=p.data;if(n>b.length)c(a,b,f-n),n-=b.length;else{n===b.length?(c(a,b,f-n),++g,p.next?this.head=p.next:this.head=this.tail=null):(c(a,new o(b.buffer,b.byteOffset,n),f-n),this.head=p,p.data=b.slice(n));break}++g}while((p=p.next)!==null);return this.length-=g,a}[Symbol.for("nodejs.util.inspect.custom")](n,a){return s(this,{...a,depth:0,customInspect:!1})}}}),Zi=be((e,r)=>{le(),ae(),se();var{MathFloor:t,NumberIsInteger:l}=He(),{ERR_INVALID_ARG_VALUE:c}=rt().codes;function o(n,a,f){return n.highWaterMark!=null?n.highWaterMark:a?n[f]:null}function i(n){return n?16:16*1024}function s(n,a,f,p){let g=o(a,p,f);if(g!=null){if(!l(g)||g<0){let b=p?`options.${f}`:"options.highWaterMark";throw new c(b,g)}return t(g)}return i(n.objectMode)}r.exports={getHighWaterMark:s,getDefaultHighWaterMark:i}});function lo(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=r),[t,t===r?0:4-t%4]}function Ia(e,r,t){for(var l,c,o=[],i=r;i<t;i+=3)l=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(at[(c=l)>>18&63]+at[c>>12&63]+at[c>>6&63]+at[63&c]);return o.join("")}function vt(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,de.prototype),r}function de(e,r,t){if(typeof e=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return en(e)}return uo(e,r,t)}function uo(e,r,t){if(typeof e=="string")return function(o,i){if(typeof i=="string"&&i!==""||(i="utf8"),!de.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s=0|co(o,i),n=vt(s),a=n.write(o,i);return a!==s&&(n=n.slice(0,a)),n}(e,r);if(ArrayBuffer.isView(e))return tn(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(_t(e,ArrayBuffer)||e&&_t(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_t(e,SharedArrayBuffer)||e&&_t(e.buffer,SharedArrayBuffer)))return ka(e,r,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var l=e.valueOf&&e.valueOf();if(l!=null&&l!==e)return de.from(l,r,t);var c=function(o){if(de.isBuffer(o)){var i=0|rn(o.length),s=vt(i);return s.length===0||o.copy(s,0,0,i),s}if(o.length!==void 0)return typeof o.length!="number"||on(o.length)?vt(0):tn(o);if(o.type==="Buffer"&&Array.isArray(o.data))return tn(o.data)}(e);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return de.from(e[Symbol.toPrimitive]("string"),r,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function ho(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function en(e){return ho(e),vt(e<0?0:0|rn(e))}function tn(e){for(var r=e.length<0?0:0|rn(e.length),t=vt(r),l=0;l<r;l+=1)t[l]=255&e[l];return t}function ka(e,r,t){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(t||0))throw new RangeError('"length" is outside of buffer bounds');var l;return l=r===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,r):new Uint8Array(e,r,t),Object.setPrototypeOf(l,de.prototype),l}function rn(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function co(e,r){if(de.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||_t(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&t===0)return 0;for(var c=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return nn(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return vo(e).length;default:if(c)return l?-1:nn(e).length;r=(""+r).toLowerCase(),c=!0}}function Ta(e,r,t){var l=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return La(this,r,t);case"utf8":case"utf-8":return bo(this,r,t);case"ascii":return xa(this,r,t);case"latin1":case"binary":return Ua(this,r,t);case"base64":return Ma(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Na(this,r,t);default:if(l)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),l=!0}}function Ft(e,r,t){var l=e[r];e[r]=e[t],e[t]=l}function fo(e,r,t,l,c){if(e.length===0)return-1;if(typeof t=="string"?(l=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),on(t=+t)&&(t=c?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(c)return-1;t=e.length-1}else if(t<0){if(!c)return-1;t=0}if(typeof r=="string"&&(r=de.from(r,l)),de.isBuffer(r))return r.length===0?-1:po(e,r,t,l,c);if(typeof r=="number")return r&=255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):po(e,[r],t,l,c);throw new TypeError("val must be string, number or Buffer")}function po(e,r,t,l,c){var o,i=1,s=e.length,n=r.length;if(l!==void 0&&((l=String(l).toLowerCase())==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(e.length<2||r.length<2)return-1;i=2,s/=2,n/=2,t/=2}function a(b,m){return i===1?b[m]:b.readUInt16BE(m*i)}if(c){var f=-1;for(o=t;o<s;o++)if(a(e,o)===a(r,f===-1?0:o-f)){if(f===-1&&(f=o),o-f+1===n)return f*i}else f!==-1&&(o-=o-f),f=-1}else for(t+n>s&&(t=s-n),o=t;o>=0;o--){for(var p=!0,g=0;g<n;g++)if(a(e,o+g)!==a(r,g)){p=!1;break}if(p)return o}return-1}function Ca(e,r,t,l){t=Number(t)||0;var c=e.length-t;l?(l=Number(l))>c&&(l=c):l=c;var o=r.length;l>o/2&&(l=o/2);for(var i=0;i<l;++i){var s=parseInt(r.substr(2*i,2),16);if(on(s))return i;e[t+i]=s}return i}function Oa(e,r,t,l){return wr(nn(r,e.length-t),e,t,l)}function go(e,r,t,l){return wr(function(c){for(var o=[],i=0;i<c.length;++i)o.push(255&c.charCodeAt(i));return o}(r),e,t,l)}function Ra(e,r,t,l){return go(e,r,t,l)}function Pa(e,r,t,l){return wr(vo(r),e,t,l)}function Ba(e,r,t,l){return wr(function(c,o){for(var i,s,n,a=[],f=0;f<c.length&&!((o-=2)<0);++f)i=c.charCodeAt(f),s=i>>8,n=i%256,a.push(n),a.push(s);return a}(r,e.length-t),e,t,l)}function Ma(e,r,t){return r===0&&t===e.length?_r.fromByteArray(e):_r.fromByteArray(e.slice(r,t))}function bo(e,r,t){t=Math.min(e.length,t);for(var l=[],c=r;c<t;){var o,i,s,n,a=e[c],f=null,p=a>239?4:a>223?3:a>191?2:1;if(c+p<=t)switch(p){case 1:a<128&&(f=a);break;case 2:(192&(o=e[c+1]))==128&&(n=(31&a)<<6|63&o)>127&&(f=n);break;case 3:o=e[c+1],i=e[c+2],(192&o)==128&&(192&i)==128&&(n=(15&a)<<12|(63&o)<<6|63&i)>2047&&(n<55296||n>57343)&&(f=n);break;case 4:o=e[c+1],i=e[c+2],s=e[c+3],(192&o)==128&&(192&i)==128&&(192&s)==128&&(n=(15&a)<<18|(63&o)<<12|(63&i)<<6|63&s)>65535&&n<1114112&&(f=n)}f===null?(f=65533,p=1):f>65535&&(f-=65536,l.push(f>>>10&1023|55296),f=56320|1023&f),l.push(f),c+=p}return function(g){var b=g.length;if(b<=4096)return String.fromCharCode.apply(String,g);for(var m="",y=0;y<b;)m+=String.fromCharCode.apply(String,g.slice(y,y+=4096));return m}(l)}function xa(e,r,t){var l="";t=Math.min(e.length,t);for(var c=r;c<t;++c)l+=String.fromCharCode(127&e[c]);return l}function Ua(e,r,t){var l="";t=Math.min(e.length,t);for(var c=r;c<t;++c)l+=String.fromCharCode(e[c]);return l}function La(e,r,t){var l=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>l)&&(t=l);for(var c="",o=r;o<t;++o)c+=To[e[o]];return c}function Na(e,r,t){for(var l=e.slice(r,t),c="",o=0;o<l.length;o+=2)c+=String.fromCharCode(l[o]+256*l[o+1]);return c}function ze(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function it(e,r,t,l,c,o){if(!de.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>c||r<o)throw new RangeError('"value" argument is out of bounds');if(t+l>e.length)throw new RangeError("Index out of range")}function mo(e,r,t,l,c,o){if(t+l>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function yo(e,r,t,l,c){return r=+r,t>>>=0,c||mo(e,0,t,4),qt.write(e,r,t,l,23,4),t+4}function wo(e,r,t,l,c){return r=+r,t>>>=0,c||mo(e,0,t,8),qt.write(e,r,t,l,52,8),t+8}function nn(e,r){var t;r=r||1/0;for(var l=e.length,c=null,o=[],i=0;i<l;++i){if((t=e.charCodeAt(i))>55295&&t<57344){if(!c){if(t>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(i+1===l){(r-=3)>-1&&o.push(239,191,189);continue}c=t;continue}if(t<56320){(r-=3)>-1&&o.push(239,191,189),c=t;continue}t=65536+(c-55296<<10|t-56320)}else c&&(r-=3)>-1&&o.push(239,191,189);if(c=null,t<128){if((r-=1)<0)break;o.push(t)}else if(t<2048){if((r-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function vo(e){return _r.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(ko,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(e))}function wr(e,r,t,l){for(var c=0;c<l&&!(c+t>=r.length||c>=e.length);++c)r[c+t]=e[c];return c}function _t(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function on(e){return e!=e}function _o(e,r){for(var t in e)r[t]=e[t]}function Wt(e,r,t){return lt(e,r,t)}function sr(e){var r;switch(this.encoding=function(t){var l=function(c){if(!c)return"utf8";for(var o;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(o)return;c=(""+c).toLowerCase(),o=!0}}(t);if(typeof l!="string"&&(Er.isEncoding===ln||!ln(t)))throw new Error("Unknown encoding: "+t);return l||t}(e),this.encoding){case"utf16le":this.text=Da,this.end=Fa,r=4;break;case"utf8":this.fillLast=ja,r=4;break;case"base64":this.text=Wa,this.end=$a,r=3;break;default:return this.write=qa,this.end=Va,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=Er.allocUnsafe(r)}function sn(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function ja(e){var r=this.lastTotal-this.lastNeed,t=function(l,c,o){if((192&c[0])!=128)return l.lastNeed=0,"";if(l.lastNeed>1&&c.length>1){if((192&c[1])!=128)return l.lastNeed=1,"";if(l.lastNeed>2&&c.length>2&&(192&c[2])!=128)return l.lastNeed=2,""}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length,void 0)}function Da(e,r){if((e.length-r)%2==0){var t=e.toString("utf16le",r);if(t){var l=t.charCodeAt(t.length-1);if(l>=55296&&l<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function Fa(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function Wa(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function $a(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function qa(e){return e.toString(this.encoding)}function Va(e){return e&&e.length?this.write(e):""}var Eo,at,ot,So,vr,$t,Ao,Io,ft,_r,qt,an,ko,To,ar,lr,lt,Co,tr,Er,ln,Oo=Ye(()=>{for(le(),ae(),se(),Eo={byteLength:function(e){var r=lo(e),t=r[0],l=r[1];return 3*(t+l)/4-l},toByteArray:function(e){var r,t,l=lo(e),c=l[0],o=l[1],i=new So(function(a,f,p){return 3*(f+p)/4-p}(0,c,o)),s=0,n=o>0?c-4:c;for(t=0;t<n;t+=4)r=ot[e.charCodeAt(t)]<<18|ot[e.charCodeAt(t+1)]<<12|ot[e.charCodeAt(t+2)]<<6|ot[e.charCodeAt(t+3)],i[s++]=r>>16&255,i[s++]=r>>8&255,i[s++]=255&r;return o===2&&(r=ot[e.charCodeAt(t)]<<2|ot[e.charCodeAt(t+1)]>>4,i[s++]=255&r),o===1&&(r=ot[e.charCodeAt(t)]<<10|ot[e.charCodeAt(t+1)]<<4|ot[e.charCodeAt(t+2)]>>2,i[s++]=r>>8&255,i[s++]=255&r),i},fromByteArray:function(e){for(var r,t=e.length,l=t%3,c=[],o=0,i=t-l;o<i;o+=16383)c.push(Ia(e,o,o+16383>i?i:o+16383));return l===1?(r=e[t-1],c.push(at[r>>2]+at[r<<4&63]+"==")):l===2&&(r=(e[t-2]<<8)+e[t-1],c.push(at[r>>10]+at[r>>4&63]+at[r<<2&63]+"=")),c.join("")}},at=[],ot=[],So=typeof Uint8Array<"u"?Uint8Array:Array,vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$t=0,Ao=vr.length;$t<Ao;++$t)at[$t]=vr[$t],ot[vr.charCodeAt($t)]=$t;ot[45]=62,ot[95]=63,Io={read:function(e,r,t,l,c){var o,i,s=8*c-l-1,n=(1<<s)-1,a=n>>1,f=-7,p=t?c-1:0,g=t?-1:1,b=e[r+p];for(p+=g,o=b&(1<<-f)-1,b>>=-f,f+=s;f>0;o=256*o+e[r+p],p+=g,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=l;f>0;i=256*i+e[r+p],p+=g,f-=8);if(o===0)o=1-a;else{if(o===n)return i?NaN:1/0*(b?-1:1);i+=Math.pow(2,l),o-=a}return(b?-1:1)*i*Math.pow(2,o-l)},write:function(e,r,t,l,c,o){var i,s,n,a=8*o-c-1,f=(1<<a)-1,p=f>>1,g=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=l?0:o-1,m=l?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,i=f):(i=Math.floor(Math.log(r)/Math.LN2),r*(n=Math.pow(2,-i))<1&&(i--,n*=2),(r+=i+p>=1?g/n:g*Math.pow(2,1-p))*n>=2&&(i++,n/=2),i+p>=f?(s=0,i=f):i+p>=1?(s=(r*n-1)*Math.pow(2,c),i+=p):(s=r*Math.pow(2,p-1)*Math.pow(2,c),i=0));c>=8;e[t+b]=255&s,b+=m,s/=256,c-=8);for(i=i<<c|s,a+=c;a>0;e[t+b]=255&i,b+=m,i/=256,a-=8);e[t+b-m]|=128*y}},ft={},_r=Eo,qt=Io,an=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,ft.Buffer=de,ft.SlowBuffer=function(e){return+e!=e&&(e=0),de.alloc(+e)},ft.INSPECT_MAX_BYTES=50,ft.kMaxLength=2147483647,de.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),e.foo()===42}catch{return!1}}(),de.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(de.prototype,"parent",{enumerable:!0,get:function(){if(de.isBuffer(this))return this.buffer}}),Object.defineProperty(de.prototype,"offset",{enumerable:!0,get:function(){if(de.isBuffer(this))return this.byteOffset}}),de.poolSize=8192,de.from=function(e,r,t){return uo(e,r,t)},Object.setPrototypeOf(de.prototype,Uint8Array.prototype),Object.setPrototypeOf(de,Uint8Array),de.alloc=function(e,r,t){return function(l,c,o){return ho(l),l<=0?vt(l):c!==void 0?typeof o=="string"?vt(l).fill(c,o):vt(l).fill(c):vt(l)}(e,r,t)},de.allocUnsafe=function(e){return en(e)},de.allocUnsafeSlow=function(e){return en(e)},de.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==de.prototype},de.compare=function(e,r){if(_t(e,Uint8Array)&&(e=de.from(e,e.offset,e.byteLength)),_t(r,Uint8Array)&&(r=de.from(r,r.offset,r.byteLength)),!de.isBuffer(e)||!de.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var t=e.length,l=r.length,c=0,o=Math.min(t,l);c<o;++c)if(e[c]!==r[c]){t=e[c],l=r[c];break}return t<l?-1:l<t?1:0},de.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},de.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return de.alloc(0);var t;if(r===void 0)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var l=de.allocUnsafe(r),c=0;for(t=0;t<e.length;++t){var o=e[t];if(_t(o,Uint8Array)&&(o=de.from(o)),!de.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(l,c),c+=o.length}return l},de.byteLength=co,de.prototype._isBuffer=!0,de.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Ft(this,r,r+1);return this},de.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Ft(this,r,r+3),Ft(this,r+1,r+2);return this},de.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Ft(this,r,r+7),Ft(this,r+1,r+6),Ft(this,r+2,r+5),Ft(this,r+3,r+4);return this},de.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?bo(this,0,e):Ta.apply(this,arguments)},de.prototype.toLocaleString=de.prototype.toString,de.prototype.equals=function(e){if(!de.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||de.compare(this,e)===0},de.prototype.inspect=function(){var e="",r=ft.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},an&&(de.prototype[an]=de.prototype.inspect),de.prototype.compare=function(e,r,t,l,c){if(_t(e,Uint8Array)&&(e=de.from(e,e.offset,e.byteLength)),!de.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),t===void 0&&(t=e?e.length:0),l===void 0&&(l=0),c===void 0&&(c=this.length),r<0||t>e.length||l<0||c>this.length)throw new RangeError("out of range index");if(l>=c&&r>=t)return 0;if(l>=c)return-1;if(r>=t)return 1;if(this===e)return 0;for(var o=(c>>>=0)-(l>>>=0),i=(t>>>=0)-(r>>>=0),s=Math.min(o,i),n=this.slice(l,c),a=e.slice(r,t),f=0;f<s;++f)if(n[f]!==a[f]){o=n[f],i=a[f];break}return o<i?-1:i<o?1:0},de.prototype.includes=function(e,r,t){return this.indexOf(e,r,t)!==-1},de.prototype.indexOf=function(e,r,t){return fo(this,e,r,t,!0)},de.prototype.lastIndexOf=function(e,r,t){return fo(this,e,r,t,!1)},de.prototype.write=function(e,r,t,l){if(r===void 0)l="utf8",t=this.length,r=0;else if(t===void 0&&typeof r=="string")l=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(t)?(t>>>=0,l===void 0&&(l="utf8")):(l=t,t=void 0)}var c=this.length-r;if((t===void 0||t>c)&&(t=c),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");l||(l="utf8");for(var o=!1;;)switch(l){case"hex":return Ca(this,e,r,t);case"utf8":case"utf-8":return Oa(this,e,r,t);case"ascii":return go(this,e,r,t);case"latin1":case"binary":return Ra(this,e,r,t);case"base64":return Pa(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ba(this,e,r,t);default:if(o)throw new TypeError("Unknown encoding: "+l);l=(""+l).toLowerCase(),o=!0}},de.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},de.prototype.slice=function(e,r){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(r=r===void 0?t:~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),r<e&&(r=e);var l=this.subarray(e,r);return Object.setPrototypeOf(l,de.prototype),l},de.prototype.readUIntLE=function(e,r,t){e>>>=0,r>>>=0,t||ze(e,r,this.length);for(var l=this[e],c=1,o=0;++o<r&&(c*=256);)l+=this[e+o]*c;return l},de.prototype.readUIntBE=function(e,r,t){e>>>=0,r>>>=0,t||ze(e,r,this.length);for(var l=this[e+--r],c=1;r>0&&(c*=256);)l+=this[e+--r]*c;return l},de.prototype.readUInt8=function(e,r){return e>>>=0,r||ze(e,1,this.length),this[e]},de.prototype.readUInt16LE=function(e,r){return e>>>=0,r||ze(e,2,this.length),this[e]|this[e+1]<<8},de.prototype.readUInt16BE=function(e,r){return e>>>=0,r||ze(e,2,this.length),this[e]<<8|this[e+1]},de.prototype.readUInt32LE=function(e,r){return e>>>=0,r||ze(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},de.prototype.readUInt32BE=function(e,r){return e>>>=0,r||ze(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},de.prototype.readIntLE=function(e,r,t){e>>>=0,r>>>=0,t||ze(e,r,this.length);for(var l=this[e],c=1,o=0;++o<r&&(c*=256);)l+=this[e+o]*c;return l>=(c*=128)&&(l-=Math.pow(2,8*r)),l},de.prototype.readIntBE=function(e,r,t){e>>>=0,r>>>=0,t||ze(e,r,this.length);for(var l=r,c=1,o=this[e+--l];l>0&&(c*=256);)o+=this[e+--l]*c;return o>=(c*=128)&&(o-=Math.pow(2,8*r)),o},de.prototype.readInt8=function(e,r){return e>>>=0,r||ze(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},de.prototype.readInt16LE=function(e,r){e>>>=0,r||ze(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},de.prototype.readInt16BE=function(e,r){e>>>=0,r||ze(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},de.prototype.readInt32LE=function(e,r){return e>>>=0,r||ze(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},de.prototype.readInt32BE=function(e,r){return e>>>=0,r||ze(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},de.prototype.readFloatLE=function(e,r){return e>>>=0,r||ze(e,4,this.length),qt.read(this,e,!0,23,4)},de.prototype.readFloatBE=function(e,r){return e>>>=0,r||ze(e,4,this.length),qt.read(this,e,!1,23,4)},de.prototype.readDoubleLE=function(e,r){return e>>>=0,r||ze(e,8,this.length),qt.read(this,e,!0,52,8)},de.prototype.readDoubleBE=function(e,r){return e>>>=0,r||ze(e,8,this.length),qt.read(this,e,!1,52,8)},de.prototype.writeUIntLE=function(e,r,t,l){e=+e,r>>>=0,t>>>=0,l||it(this,e,r,t,Math.pow(2,8*t)-1,0);var c=1,o=0;for(this[r]=255&e;++o<t&&(c*=256);)this[r+o]=e/c&255;return r+t},de.prototype.writeUIntBE=function(e,r,t,l){e=+e,r>>>=0,t>>>=0,l||it(this,e,r,t,Math.pow(2,8*t)-1,0);var c=t-1,o=1;for(this[r+c]=255&e;--c>=0&&(o*=256);)this[r+c]=e/o&255;return r+t},de.prototype.writeUInt8=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,1,255,0),this[r]=255&e,r+1},de.prototype.writeUInt16LE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},de.prototype.writeUInt16BE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},de.prototype.writeUInt32LE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},de.prototype.writeUInt32BE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},de.prototype.writeIntLE=function(e,r,t,l){if(e=+e,r>>>=0,!l){var c=Math.pow(2,8*t-1);it(this,e,r,t,c-1,-c)}var o=0,i=1,s=0;for(this[r]=255&e;++o<t&&(i*=256);)e<0&&s===0&&this[r+o-1]!==0&&(s=1),this[r+o]=(e/i>>0)-s&255;return r+t},de.prototype.writeIntBE=function(e,r,t,l){if(e=+e,r>>>=0,!l){var c=Math.pow(2,8*t-1);it(this,e,r,t,c-1,-c)}var o=t-1,i=1,s=0;for(this[r+o]=255&e;--o>=0&&(i*=256);)e<0&&s===0&&this[r+o+1]!==0&&(s=1),this[r+o]=(e/i>>0)-s&255;return r+t},de.prototype.writeInt8=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},de.prototype.writeInt16LE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},de.prototype.writeInt16BE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},de.prototype.writeInt32LE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},de.prototype.writeInt32BE=function(e,r,t){return e=+e,r>>>=0,t||it(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},de.prototype.writeFloatLE=function(e,r,t){return yo(this,e,r,!0,t)},de.prototype.writeFloatBE=function(e,r,t){return yo(this,e,r,!1,t)},de.prototype.writeDoubleLE=function(e,r,t){return wo(this,e,r,!0,t)},de.prototype.writeDoubleBE=function(e,r,t){return wo(this,e,r,!1,t)},de.prototype.copy=function(e,r,t,l){if(!de.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),l||l===0||(l=this.length),r>=e.length&&(r=e.length),r||(r=0),l>0&&l<t&&(l=t),l===t||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("sourceEnd out of bounds");l>this.length&&(l=this.length),e.length-r<l-t&&(l=e.length-r+t);var c=l-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(r,t,l);else if(this===e&&t<r&&r<l)for(var o=c-1;o>=0;--o)e[o+r]=this[o+t];else Uint8Array.prototype.set.call(e,this.subarray(t,l),r);return c},de.prototype.fill=function(e,r,t,l){if(typeof e=="string"){if(typeof r=="string"?(l=r,r=0,t=this.length):typeof t=="string"&&(l=t,t=this.length),l!==void 0&&typeof l!="string")throw new TypeError("encoding must be a string");if(typeof l=="string"&&!de.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(e.length===1){var c=e.charCodeAt(0);(l==="utf8"&&c<128||l==="latin1")&&(e=c)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var o;if(r>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(o=r;o<t;++o)this[o]=e;else{var i=de.isBuffer(e)?e:de.from(e,l),s=i.length;if(s===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<t-r;++o)this[o+r]=i[o%s]}return this},ko=/[^+/0-9A-Za-z-_]/g,To=function(){for(var e=new Array(256),r=0;r<16;++r)for(var t=16*r,l=0;l<16;++l)e[t+l]="0123456789abcdef"[r]+"0123456789abcdef"[l];return e}(),ft.Buffer,ft.INSPECT_MAX_BYTES,ft.kMaxLength,ar={},lr=ft,lt=lr.Buffer,lt.from&&lt.alloc&&lt.allocUnsafe&&lt.allocUnsafeSlow?ar=lr:(_o(lr,ar),ar.Buffer=Wt),Wt.prototype=Object.create(lt.prototype),_o(lt,Wt),Wt.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return lt(e,r,t)},Wt.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var l=lt(e);return r!==void 0?typeof t=="string"?l.fill(r,t):l.fill(r):l.fill(0),l},Wt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return lt(e)},Wt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return lr.SlowBuffer(e)},Co=ar,tr={},Er=Co.Buffer,ln=Er.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},tr.StringDecoder=sr,sr.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if((r=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""},sr.prototype.end=function(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"":r},sr.prototype.text=function(e,r){var t=function(c,o,i){var s=o.length-1;if(s<i)return 0;var n=sn(o[s]);return n>=0?(n>0&&(c.lastNeed=n-1),n):--s<i||n===-2?0:(n=sn(o[s]))>=0?(n>0&&(c.lastNeed=n-2),n):--s<i||n===-2?0:(n=sn(o[s]))>=0?(n>0&&(n===2?n=0:c.lastNeed=n-3),n):0}(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var l=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,l),e.toString("utf8",r,l)},sr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},tr.StringDecoder,tr.StringDecoder}),Ro={};xt(Ro,{StringDecoder:()=>Po,default:()=>tr});var Po,Ha=Ye(()=>{le(),ae(),se(),Oo(),Oo(),Po=tr.StringDecoder}),Bo=be((e,r)=>{le(),ae(),se();var t=Nt(),{PromisePrototypeThen:l,SymbolAsyncIterator:c,SymbolIterator:o}=He(),{Buffer:i}=(Je(),Le(Ge)),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:n}=rt().codes;function a(f,p,g){let b;if(typeof p=="string"||p instanceof i)return new f({objectMode:!0,...g,read(){this.push(p),this.push(null)}});let m;if(p&&p[c])m=!0,b=p[c]();else if(p&&p[o])m=!1,b=p[o]();else throw new s("iterable",["Iterable"],p);let y=new f({objectMode:!0,highWaterMark:1,...g}),I=!1;y._read=function(){I||(I=!0,_())},y._destroy=function(A,N){l(x(A),()=>t.nextTick(N,A),D=>t.nextTick(N,D||A))};async function x(A){let N=A!=null,D=typeof b.throw=="function";if(N&&D){let{value:C,done:T}=await b.throw(A);if(await C,T)return}if(typeof b.return=="function"){let{value:C}=await b.return();await C}}async function _(){for(;;){try{let{value:A,done:N}=m?await b.next():b.next();if(N)y.push(null);else{let D=A&&typeof A.then=="function"?await A:A;if(D===null)throw I=!1,new n;if(y.push(D))continue;I=!1}}catch(A){y.destroy(A)}break}}return y}r.exports=a}),Sr=be((e,r)=>{le(),ae(),se();var t=Nt(),{ArrayPrototypeIndexOf:l,NumberIsInteger:c,NumberIsNaN:o,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:n,ObjectSetPrototypeOf:a,Promise:f,SafeSet:p,SymbolAsyncIterator:g,Symbol:b}=He();r.exports=v,v.ReadableState=we;var{EventEmitter:m}=(er(),Le(Dt)),{Stream:y,prependListener:I}=Xi(),{Buffer:x}=(Je(),Le(Ge)),{addAbortSignal:_}=yr(),A=Rt(),N=yt().debuglog("stream",u=>{N=u}),D=Aa(),C=Zt(),{getHighWaterMark:T,getDefaultHighWaterMark:M}=Zi(),{aggregateTwoErrors:$,codes:{ERR_INVALID_ARG_TYPE:G,ERR_METHOD_NOT_IMPLEMENTED:re,ERR_OUT_OF_RANGE:S,ERR_STREAM_PUSH_AFTER_EOF:H,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:te}}=rt(),{validateObject:Q}=br(),ge=b("kPaused"),{StringDecoder:oe}=(Ha(),Le(Ro)),V=Bo();a(v.prototype,y.prototype),a(v,y);var me=()=>{},{errorOrDestroy:ne}=C;function we(u,d,w){typeof w!="boolean"&&(w=d instanceof Et()),this.objectMode=!!(u&&u.objectMode),w&&(this.objectMode=this.objectMode||!!(u&&u.readableObjectMode)),this.highWaterMark=u?T(this,u,"readableHighWaterMark",w):M(!1),this.buffer=new D,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[ge]=null,this.errorEmitted=!1,this.emitClose=!u||u.emitClose!==!1,this.autoDestroy=!u||u.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=u&&u.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,u&&u.encoding&&(this.decoder=new oe(u.encoding),this.encoding=u.encoding)}function v(u){if(!(this instanceof v))return new v(u);let d=this instanceof Et();this._readableState=new we(u,this,d),u&&(typeof u.read=="function"&&(this._read=u.read),typeof u.destroy=="function"&&(this._destroy=u.destroy),typeof u.construct=="function"&&(this._construct=u.construct),u.signal&&!d&&_(u.signal,this)),y.call(this,u),C.construct(this,()=>{this._readableState.needReadable&&ee(this,this._readableState)})}v.prototype.destroy=C.destroy,v.prototype._undestroy=C.undestroy,v.prototype._destroy=function(u,d){d(u)},v.prototype[m.captureRejectionSymbol]=function(u){this.destroy(u)},v.prototype.push=function(u,d){return Y(this,u,d,!1)},v.prototype.unshift=function(u,d){return Y(this,u,d,!0)};function Y(u,d,w,k){N("readableAddChunk",d);let W=u._readableState,Z;if(W.objectMode||(typeof d=="string"?(w=w||W.defaultEncoding,W.encoding!==w&&(k&&W.encoding?d=x.from(d,w).toString(W.encoding):(d=x.from(d,w),w=""))):d instanceof x?w="":y._isUint8Array(d)?(d=y._uint8ArrayToBuffer(d),w=""):d!=null&&(Z=new G("chunk",["string","Buffer","Uint8Array"],d))),Z)ne(u,Z);else if(d===null)W.reading=!1,E(u,W);else if(W.objectMode||d&&d.length>0)if(k)if(W.endEmitted)ne(u,new te);else{if(W.destroyed||W.errored)return!1;fe(u,W,d,!0)}else if(W.ended)ne(u,new H);else{if(W.destroyed||W.errored)return!1;W.reading=!1,W.decoder&&!w?(d=W.decoder.write(d),W.objectMode||d.length!==0?fe(u,W,d,!1):ee(u,W)):fe(u,W,d,!1)}else k||(W.reading=!1,ee(u,W));return!W.ended&&(W.length<W.highWaterMark||W.length===0)}function fe(u,d,w,k){d.flowing&&d.length===0&&!d.sync&&u.listenerCount("data")>0?(d.multiAwaitDrain?d.awaitDrainWriters.clear():d.awaitDrainWriters=null,d.dataEmitted=!0,u.emit("data",w)):(d.length+=d.objectMode?1:w.length,k?d.buffer.unshift(w):d.buffer.push(w),d.needReadable&&K(u)),ee(u,d)}v.prototype.isPaused=function(){let u=this._readableState;return u[ge]===!0||u.flowing===!1},v.prototype.setEncoding=function(u){let d=new oe(u);this._readableState.decoder=d,this._readableState.encoding=this._readableState.decoder.encoding;let w=this._readableState.buffer,k="";for(let W of w)k+=d.write(W);return w.clear(),k!==""&&w.push(k),this._readableState.length=k.length,this};var ve=1073741824;function he(u){if(u>ve)throw new S("size","<= 1GiB",u);return u--,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u++,u}function B(u,d){return u<=0||d.length===0&&d.ended?0:d.objectMode?1:o(u)?d.flowing&&d.length?d.buffer.first().length:d.length:u<=d.length?u:d.ended?d.length:0}v.prototype.read=function(u){N("read",u),u===void 0?u=NaN:c(u)||(u=i(u,10));let d=this._readableState,w=u;if(u>d.highWaterMark&&(d.highWaterMark=he(u)),u!==0&&(d.emittedReadable=!1),u===0&&d.needReadable&&((d.highWaterMark!==0?d.length>=d.highWaterMark:d.length>0)||d.ended))return N("read: emitReadable",d.length,d.ended),d.length===0&&d.ended?O(this):K(this),null;if(u=B(u,d),u===0&&d.ended)return d.length===0&&O(this),null;let k=d.needReadable;if(N("need readable",k),(d.length===0||d.length-u<d.highWaterMark)&&(k=!0,N("length less than watermark",k)),d.ended||d.reading||d.destroyed||d.errored||!d.constructed)k=!1,N("reading, ended or constructing",k);else if(k){N("do read"),d.reading=!0,d.sync=!0,d.length===0&&(d.needReadable=!0);try{this._read(d.highWaterMark)}catch(Z){ne(this,Z)}d.sync=!1,d.reading||(u=B(w,d))}let W;return u>0?W=z(u,d):W=null,W===null?(d.needReadable=d.length<=d.highWaterMark,u=0):(d.length-=u,d.multiAwaitDrain?d.awaitDrainWriters.clear():d.awaitDrainWriters=null),d.length===0&&(d.ended||(d.needReadable=!0),w!==u&&d.ended&&O(this)),W!==null&&!d.errorEmitted&&!d.closeEmitted&&(d.dataEmitted=!0,this.emit("data",W)),W};function E(u,d){if(N("onEofChunk"),!d.ended){if(d.decoder){let w=d.decoder.end();w&&w.length&&(d.buffer.push(w),d.length+=d.objectMode?1:w.length)}d.ended=!0,d.sync?K(u):(d.needReadable=!1,d.emittedReadable=!0,ce(u))}}function K(u){let d=u._readableState;N("emitReadable",d.needReadable,d.emittedReadable),d.needReadable=!1,d.emittedReadable||(N("emitReadable",d.flowing),d.emittedReadable=!0,t.nextTick(ce,u))}function ce(u){let d=u._readableState;N("emitReadable_",d.destroyed,d.length,d.ended),!d.destroyed&&!d.errored&&(d.length||d.ended)&&(u.emit("readable"),d.emittedReadable=!1),d.needReadable=!d.flowing&&!d.ended&&d.length<=d.highWaterMark,ie(u)}function ee(u,d){!d.readingMore&&d.constructed&&(d.readingMore=!0,t.nextTick(X,u,d))}function X(u,d){for(;!d.reading&&!d.ended&&(d.length<d.highWaterMark||d.flowing&&d.length===0);){let w=d.length;if(N("maybeReadMore read 0"),u.read(0),w===d.length)break}d.readingMore=!1}v.prototype._read=function(u){throw new re("_read()")},v.prototype.pipe=function(u,d){let w=this,k=this._readableState;k.pipes.length===1&&(k.multiAwaitDrain||(k.multiAwaitDrain=!0,k.awaitDrainWriters=new p(k.awaitDrainWriters?[k.awaitDrainWriters]:[]))),k.pipes.push(u),N("pipe count=%d opts=%j",k.pipes.length,d);let W=(!d||d.end!==!1)&&u!==t.stdout&&u!==t.stderr?Ie:Xe;k.endEmitted?t.nextTick(W):w.once("end",W),u.on("unpipe",Z);function Z(tt,Qe){N("onunpipe"),tt===w&&Qe&&Qe.hasUnpiped===!1&&(Qe.hasUnpiped=!0,Se())}function Ie(){N("onend"),u.end()}let Ce,Oe=!1;function Se(){N("cleanup"),u.removeListener("close",Ke),u.removeListener("finish",Ve),Ce&&u.removeListener("drain",Ce),u.removeListener("error",Ne),u.removeListener("unpipe",Z),w.removeListener("end",Ie),w.removeListener("end",Xe),w.removeListener("data",ke),Oe=!0,Ce&&k.awaitDrainWriters&&(!u._writableState||u._writableState.needDrain)&&Ce()}function Te(){Oe||(k.pipes.length===1&&k.pipes[0]===u?(N("false write response, pause",0),k.awaitDrainWriters=u,k.multiAwaitDrain=!1):k.pipes.length>1&&k.pipes.includes(u)&&(N("false write response, pause",k.awaitDrainWriters.size),k.awaitDrainWriters.add(u)),w.pause()),Ce||(Ce=ye(w,u),u.on("drain",Ce))}w.on("data",ke);function ke(tt){N("ondata");let Qe=u.write(tt);N("dest.write",Qe),Qe===!1&&Te()}function Ne(tt){if(N("onerror",tt),Xe(),u.removeListener("error",Ne),u.listenerCount("error")===0){let Qe=u._writableState||u._readableState;Qe&&!Qe.errorEmitted?ne(u,tt):u.emit("error",tt)}}I(u,"error",Ne);function Ke(){u.removeListener("finish",Ve),Xe()}u.once("close",Ke);function Ve(){N("onfinish"),u.removeListener("close",Ke),Xe()}u.once("finish",Ve);function Xe(){N("unpipe"),w.unpipe(u)}return u.emit("pipe",w),u.writableNeedDrain===!0?k.flowing&&Te():k.flowing||(N("pipe resume"),w.resume()),u};function ye(u,d){return function(){let w=u._readableState;w.awaitDrainWriters===d?(N("pipeOnDrain",1),w.awaitDrainWriters=null):w.multiAwaitDrain&&(N("pipeOnDrain",w.awaitDrainWriters.size),w.awaitDrainWriters.delete(d)),(!w.awaitDrainWriters||w.awaitDrainWriters.size===0)&&u.listenerCount("data")&&u.resume()}}v.prototype.unpipe=function(u){let d=this._readableState,w={hasUnpiped:!1};if(d.pipes.length===0)return this;if(!u){let W=d.pipes;d.pipes=[],this.pause();for(let Z=0;Z<W.length;Z++)W[Z].emit("unpipe",this,{hasUnpiped:!1});return this}let k=l(d.pipes,u);return k===-1?this:(d.pipes.splice(k,1),d.pipes.length===0&&this.pause(),u.emit("unpipe",this,w),this)},v.prototype.on=function(u,d){let w=y.prototype.on.call(this,u,d),k=this._readableState;return u==="data"?(k.readableListening=this.listenerCount("readable")>0,k.flowing!==!1&&this.resume()):u==="readable"&&!k.endEmitted&&!k.readableListening&&(k.readableListening=k.needReadable=!0,k.flowing=!1,k.emittedReadable=!1,N("on readable",k.length,k.reading),k.length?K(this):k.reading||t.nextTick(R,this)),w},v.prototype.addListener=v.prototype.on,v.prototype.removeListener=function(u,d){let w=y.prototype.removeListener.call(this,u,d);return u==="readable"&&t.nextTick(pe,this),w},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(u){let d=y.prototype.removeAllListeners.apply(this,arguments);return(u==="readable"||u===void 0)&&t.nextTick(pe,this),d};function pe(u){let d=u._readableState;d.readableListening=u.listenerCount("readable")>0,d.resumeScheduled&&d[ge]===!1?d.flowing=!0:u.listenerCount("data")>0?u.resume():d.readableListening||(d.flowing=null)}function R(u){N("readable nexttick read 0"),u.read(0)}v.prototype.resume=function(){let u=this._readableState;return u.flowing||(N("resume"),u.flowing=!u.readableListening,j(this,u)),u[ge]=!1,this};function j(u,d){d.resumeScheduled||(d.resumeScheduled=!0,t.nextTick(F,u,d))}function F(u,d){N("resume",d.reading),d.reading||u.read(0),d.resumeScheduled=!1,u.emit("resume"),ie(u),d.flowing&&!d.reading&&u.read(0)}v.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ge]=!0,this};function ie(u){let d=u._readableState;for(N("flow",d.flowing);d.flowing&&u.read()!==null;);}v.prototype.wrap=function(u){let d=!1;u.on("data",k=>{!this.push(k)&&u.pause&&(d=!0,u.pause())}),u.on("end",()=>{this.push(null)}),u.on("error",k=>{ne(this,k)}),u.on("close",()=>{this.destroy()}),u.on("destroy",()=>{this.destroy()}),this._read=()=>{d&&u.resume&&(d=!1,u.resume())};let w=n(u);for(let k=1;k<w.length;k++){let W=w[k];this[W]===void 0&&typeof u[W]=="function"&&(this[W]=u[W].bind(u))}return this},v.prototype[g]=function(){return J(this)},v.prototype.iterator=function(u){return u!==void 0&&Q(u,"options"),J(this,u)};function J(u,d){typeof u.read!="function"&&(u=v.wrap(u,{objectMode:!0}));let w=U(u,d);return w.stream=u,w}async function*U(u,d){let w=me;function k(Ie){this===u?(w(),w=me):w=Ie}u.on("readable",k);let W,Z=A(u,{writable:!1},Ie=>{W=Ie?$(W,Ie):null,w(),w=me});try{for(;;){let Ie=u.destroyed?null:u.read();if(Ie!==null)yield Ie;else{if(W)throw W;if(W===null)return;await new f(k)}}}catch(Ie){throw W=$(W,Ie),W}finally{(W||(d==null?void 0:d.destroyOnReturn)!==!1)&&(W===void 0||u._readableState.autoDestroy)?C.destroyer(u,null):(u.off("readable",k),Z())}}s(v.prototype,{readable:{__proto__:null,get(){let u=this._readableState;return!!u&&u.readable!==!1&&!u.destroyed&&!u.errorEmitted&&!u.endEmitted},set(u){this._readableState&&(this._readableState.readable=!!u)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(u){this._readableState&&(this._readableState.destroyed=u)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(we.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ge]!==!1},set(u){this[ge]=!!u}}}),v._fromList=z;function z(u,d){if(d.length===0)return null;let w;return d.objectMode?w=d.buffer.shift():!u||u>=d.length?(d.decoder?w=d.buffer.join(""):d.buffer.length===1?w=d.buffer.first():w=d.buffer.concat(d.length),d.buffer.clear()):w=d.buffer.consume(u,d.decoder),w}function O(u){let d=u._readableState;N("endReadable",d.endEmitted),d.endEmitted||(d.ended=!0,t.nextTick(L,d,u))}function L(u,d){if(N("endReadableNT",u.endEmitted,u.length),!u.errored&&!u.closeEmitted&&!u.endEmitted&&u.length===0){if(u.endEmitted=!0,d.emit("end"),d.writable&&d.allowHalfOpen===!1)t.nextTick(q,d);else if(u.autoDestroy){let w=d._writableState;(!w||w.autoDestroy&&(w.finished||w.writable===!1))&&d.destroy()}}}function q(u){u.writable&&!u.writableEnded&&!u.destroyed&&u.end()}v.from=function(u,d){return V(v,u,d)};var ue;function h(){return ue===void 0&&(ue={}),ue}v.fromWeb=function(u,d){return h().newStreamReadableFromReadableStream(u,d)},v.toWeb=function(u,d){return h().newReadableStreamFromStreamReadable(u,d)},v.wrap=function(u,d){var w,k;return new v({objectMode:(w=(k=u.readableObjectMode)!==null&&k!==void 0?k:u.objectMode)!==null&&w!==void 0?w:!0,...d,destroy(W,Z){C.destroyer(u,W),Z(W)}}).wrap(u)}}),Mo=be((e,r)=>{le(),ae(),se();var t=Nt(),{ArrayPrototypeSlice:l,Error:c,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:n,StringPrototypeToLowerCase:a,Symbol:f,SymbolHasInstance:p}=He();r.exports=oe,oe.WritableState=Q;var{EventEmitter:g}=(er(),Le(Dt)),b=Xi().Stream,{Buffer:m}=(Je(),Le(Ge)),y=Zt(),{addAbortSignal:I}=yr(),{getHighWaterMark:x,getDefaultHighWaterMark:_}=Zi(),{ERR_INVALID_ARG_TYPE:A,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_MULTIPLE_CALLBACK:D,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:M,ERR_STREAM_NULL_VALUES:$,ERR_STREAM_WRITE_AFTER_END:G,ERR_UNKNOWN_ENCODING:re}=rt().codes,{errorOrDestroy:S}=y;n(oe.prototype,b.prototype),n(oe,b);function H(){}var te=f("kOnFinished");function Q(R,j,F){typeof F!="boolean"&&(F=j instanceof Et()),this.objectMode=!!(R&&R.objectMode),F&&(this.objectMode=this.objectMode||!!(R&&R.writableObjectMode)),this.highWaterMark=R?x(this,R,"writableHighWaterMark",F):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ie=!!(R&&R.decodeStrings===!1);this.decodeStrings=!ie,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=v.bind(void 0,j),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ge(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!R||R.emitClose!==!1,this.autoDestroy=!R||R.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[te]=[]}function ge(R){R.buffered=[],R.bufferedIndex=0,R.allBuffers=!0,R.allNoop=!0}Q.prototype.getBuffer=function(){return l(this.buffered,this.bufferedIndex)},i(Q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function oe(R){let j=this instanceof Et();if(!j&&!o(oe,this))return new oe(R);this._writableState=new Q(R,this,j),R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&I(R.signal,this)),b.call(this,R),y.construct(this,()=>{let F=this._writableState;F.writing||he(this,F),ce(this,F)})}i(oe,p,{__proto__:null,value:function(R){return o(this,R)?!0:this!==oe?!1:R&&R._writableState instanceof Q}}),oe.prototype.pipe=function(){S(this,new C)};function V(R,j,F,ie){let J=R._writableState;if(typeof F=="function")ie=F,F=J.defaultEncoding;else{if(!F)F=J.defaultEncoding;else if(F!=="buffer"&&!m.isEncoding(F))throw new re(F);typeof ie!="function"&&(ie=H)}if(j===null)throw new $;if(!J.objectMode)if(typeof j=="string")J.decodeStrings!==!1&&(j=m.from(j,F),F="buffer");else if(j instanceof m)F="buffer";else if(b._isUint8Array(j))j=b._uint8ArrayToBuffer(j),F="buffer";else throw new A("chunk",["string","Buffer","Uint8Array"],j);let U;return J.ending?U=new G:J.destroyed&&(U=new T("write")),U?(t.nextTick(ie,U),S(R,U,!0),U):(J.pendingcb++,me(R,J,j,F,ie))}oe.prototype.write=function(R,j,F){return V(this,R,j,F)===!0},oe.prototype.cork=function(){this._writableState.corked++},oe.prototype.uncork=function(){let R=this._writableState;R.corked&&(R.corked--,R.writing||he(this,R))},oe.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=a(R)),!m.isEncoding(R))throw new re(R);return this._writableState.defaultEncoding=R,this};function me(R,j,F,ie,J){let U=j.objectMode?1:F.length;j.length+=U;let z=j.length<j.highWaterMark;return z||(j.needDrain=!0),j.writing||j.corked||j.errored||!j.constructed?(j.buffered.push({chunk:F,encoding:ie,callback:J}),j.allBuffers&&ie!=="buffer"&&(j.allBuffers=!1),j.allNoop&&J!==H&&(j.allNoop=!1)):(j.writelen=U,j.writecb=J,j.writing=!0,j.sync=!0,R._write(F,ie,j.onwrite),j.sync=!1),z&&!j.errored&&!j.destroyed}function ne(R,j,F,ie,J,U,z){j.writelen=ie,j.writecb=z,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new T("write")):F?R._writev(J,j.onwrite):R._write(J,U,j.onwrite),j.sync=!1}function we(R,j,F,ie){--j.pendingcb,ie(F),ve(j),S(R,F)}function v(R,j){let F=R._writableState,ie=F.sync,J=F.writecb;if(typeof J!="function"){S(R,new D);return}F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0,j?(j.stack,F.errored||(F.errored=j),R._readableState&&!R._readableState.errored&&(R._readableState.errored=j),ie?t.nextTick(we,R,F,j,J):we(R,F,j,J)):(F.buffered.length>F.bufferedIndex&&he(R,F),ie?F.afterWriteTickInfo!==null&&F.afterWriteTickInfo.cb===J?F.afterWriteTickInfo.count++:(F.afterWriteTickInfo={count:1,cb:J,stream:R,state:F},t.nextTick(Y,F.afterWriteTickInfo)):fe(R,F,1,J))}function Y({stream:R,state:j,count:F,cb:ie}){return j.afterWriteTickInfo=null,fe(R,j,F,ie)}function fe(R,j,F,ie){for(!j.ending&&!R.destroyed&&j.length===0&&j.needDrain&&(j.needDrain=!1,R.emit("drain"));F-- >0;)j.pendingcb--,ie();j.destroyed&&ve(j),ce(R,j)}function ve(R){if(R.writing)return;for(let J=R.bufferedIndex;J<R.buffered.length;++J){var j;let{chunk:U,callback:z}=R.buffered[J],O=R.objectMode?1:U.length;R.length-=O,z((j=R.errored)!==null&&j!==void 0?j:new T("write"))}let F=R[te].splice(0);for(let J=0;J<F.length;J++){var ie;F[J]((ie=R.errored)!==null&&ie!==void 0?ie:new T("end"))}ge(R)}function he(R,j){if(j.corked||j.bufferProcessing||j.destroyed||!j.constructed)return;let{buffered:F,bufferedIndex:ie,objectMode:J}=j,U=F.length-ie;if(!U)return;let z=ie;if(j.bufferProcessing=!0,U>1&&R._writev){j.pendingcb-=U-1;let O=j.allNoop?H:q=>{for(let ue=z;ue<F.length;++ue)F[ue].callback(q)},L=j.allNoop&&z===0?F:l(F,z);L.allBuffers=j.allBuffers,ne(R,j,!0,j.length,L,"",O),ge(j)}else{do{let{chunk:O,encoding:L,callback:q}=F[z];F[z++]=null;let ue=J?1:O.length;ne(R,j,!1,ue,O,L,q)}while(z<F.length&&!j.writing);z===F.length?ge(j):z>256?(F.splice(0,z),j.bufferedIndex=0):j.bufferedIndex=z}j.bufferProcessing=!1}oe.prototype._write=function(R,j,F){if(this._writev)this._writev([{chunk:R,encoding:j}],F);else throw new N("_write()")},oe.prototype._writev=null,oe.prototype.end=function(R,j,F){let ie=this._writableState;typeof R=="function"?(F=R,R=null,j=null):typeof j=="function"&&(F=j,j=null);let J;if(R!=null){let U=V(this,R,j);U instanceof c&&(J=U)}return ie.corked&&(ie.corked=1,this.uncork()),J||(!ie.errored&&!ie.ending?(ie.ending=!0,ce(this,ie,!0),ie.ended=!0):ie.finished?J=new M("end"):ie.destroyed&&(J=new T("end"))),typeof F=="function"&&(J||ie.finished?t.nextTick(F,J):ie[te].push(F)),this};function B(R){return R.ending&&!R.destroyed&&R.constructed&&R.length===0&&!R.errored&&R.buffered.length===0&&!R.finished&&!R.writing&&!R.errorEmitted&&!R.closeEmitted}function E(R,j){let F=!1;function ie(J){if(F){S(R,J??D());return}if(F=!0,j.pendingcb--,J){let U=j[te].splice(0);for(let z=0;z<U.length;z++)U[z](J);S(R,J,j.sync)}else B(j)&&(j.prefinished=!0,R.emit("prefinish"),j.pendingcb++,t.nextTick(ee,R,j))}j.sync=!0,j.pendingcb++;try{R._final(ie)}catch(J){ie(J)}j.sync=!1}function K(R,j){!j.prefinished&&!j.finalCalled&&(typeof R._final=="function"&&!j.destroyed?(j.finalCalled=!0,E(R,j)):(j.prefinished=!0,R.emit("prefinish")))}function ce(R,j,F){B(j)&&(K(R,j),j.pendingcb===0&&(F?(j.pendingcb++,t.nextTick((ie,J)=>{B(J)?ee(ie,J):J.pendingcb--},R,j)):B(j)&&(j.pendingcb++,ee(R,j))))}function ee(R,j){j.pendingcb--,j.finished=!0;let F=j[te].splice(0);for(let ie=0;ie<F.length;ie++)F[ie]();if(R.emit("finish"),j.autoDestroy){let ie=R._readableState;(!ie||ie.autoDestroy&&(ie.endEmitted||ie.readable===!1))&&R.destroy()}}s(oe.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(R){this._writableState&&(this._writableState.destroyed=R)}},writable:{__proto__:null,get(){let R=this._writableState;return!!R&&R.writable!==!1&&!R.destroyed&&!R.errored&&!R.ending&&!R.ended},set(R){this._writableState&&(this._writableState.writable=!!R)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let R=this._writableState;return R?!R.destroyed&&!R.ending&&R.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var X=y.destroy;oe.prototype.destroy=function(R,j){let F=this._writableState;return!F.destroyed&&(F.bufferedIndex<F.buffered.length||F[te].length)&&t.nextTick(ve,F),X.call(this,R,j),this},oe.prototype._undestroy=y.undestroy,oe.prototype._destroy=function(R,j){j(R)},oe.prototype[g.captureRejectionSymbol]=function(R){this.destroy(R)};var ye;function pe(){return ye===void 0&&(ye={}),ye}oe.fromWeb=function(R,j){return pe().newStreamWritableFromWritableStream(R,j)},oe.toWeb=function(R){return pe().newWritableStreamFromStreamWritable(R)}}),za=be((e,r)=>{le(),ae(),se();var t=Nt(),l=(Je(),Le(Ge)),{isReadable:c,isWritable:o,isIterable:i,isNodeStream:s,isReadableNodeStream:n,isWritableNodeStream:a,isDuplexNodeStream:f}=wt(),p=Rt(),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:m}}=rt(),{destroyer:y}=Zt(),I=Et(),x=Sr(),{createDeferredPromise:_}=yt(),A=Bo(),N=globalThis.Blob||l.Blob,D=typeof N<"u"?function(re){return re instanceof N}:function(re){return!1},C=globalThis.AbortController||Qi().AbortController,{FunctionPrototypeCall:T}=He(),M=class extends I{constructor(re){super(re),(re==null?void 0:re.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(re==null?void 0:re.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};r.exports=function re(S,H){if(f(S))return S;if(n(S))return G({readable:S});if(a(S))return G({writable:S});if(s(S))return G({writable:!1,readable:!1});if(typeof S=="function"){let{value:Q,write:ge,final:oe,destroy:V}=$(S);if(i(Q))return A(M,Q,{objectMode:!0,write:ge,final:oe,destroy:V});let me=Q==null?void 0:Q.then;if(typeof me=="function"){let ne,we=T(me,Q,v=>{if(v!=null)throw new m("nully","body",v)},v=>{y(ne,v)});return ne=new M({objectMode:!0,readable:!1,write:ge,final(v){oe(async()=>{try{await we,t.nextTick(v,null)}catch(Y){t.nextTick(v,Y)}})},destroy:V})}throw new m("Iterable, AsyncIterable or AsyncFunction",H,Q)}if(D(S))return re(S.arrayBuffer());if(i(S))return A(M,S,{objectMode:!0,writable:!1});if(typeof(S==null?void 0:S.writable)=="object"||typeof(S==null?void 0:S.readable)=="object"){let Q=S!=null&&S.readable?n(S==null?void 0:S.readable)?S==null?void 0:S.readable:re(S.readable):void 0,ge=S!=null&&S.writable?a(S==null?void 0:S.writable)?S==null?void 0:S.writable:re(S.writable):void 0;return G({readable:Q,writable:ge})}let te=S==null?void 0:S.then;if(typeof te=="function"){let Q;return T(te,S,ge=>{ge!=null&&Q.push(ge),Q.push(null)},ge=>{y(Q,ge)}),Q=new M({objectMode:!0,writable:!1,read(){}})}throw new b(H,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],S)};function $(re){let{promise:S,resolve:H}=_(),te=new C,Q=te.signal;return{value:re(async function*(){for(;;){let ge=S;S=null;let{chunk:oe,done:V,cb:me}=await ge;if(t.nextTick(me),V)return;if(Q.aborted)throw new g(void 0,{cause:Q.reason});({promise:S,resolve:H}=_()),yield oe}}(),{signal:Q}),write(ge,oe,V){let me=H;H=null,me({chunk:ge,done:!1,cb:V})},final(ge){let oe=H;H=null,oe({done:!0,cb:ge})},destroy(ge,oe){te.abort(),oe(ge)}}}function G(re){let S=re.readable&&typeof re.readable.read!="function"?x.wrap(re.readable):re.readable,H=re.writable,te=!!c(S),Q=!!o(H),ge,oe,V,me,ne;function we(v){let Y=me;me=null,Y?Y(v):v&&ne.destroy(v)}return ne=new M({readableObjectMode:!!(S!=null&&S.readableObjectMode),writableObjectMode:!!(H!=null&&H.writableObjectMode),readable:te,writable:Q}),Q&&(p(H,v=>{Q=!1,v&&y(S,v),we(v)}),ne._write=function(v,Y,fe){H.write(v,Y)?fe():ge=fe},ne._final=function(v){H.end(),oe=v},H.on("drain",function(){if(ge){let v=ge;ge=null,v()}}),H.on("finish",function(){if(oe){let v=oe;oe=null,v()}})),te&&(p(S,v=>{te=!1,v&&y(S,v),we(v)}),S.on("readable",function(){if(V){let v=V;V=null,v()}}),S.on("end",function(){ne.push(null)}),ne._read=function(){for(;;){let v=S.read();if(v===null){V=ne._read;return}if(!ne.push(v))return}}),ne._destroy=function(v,Y){!v&&me!==null&&(v=new g),V=null,ge=null,oe=null,me===null?Y(v):(me=Y,y(H,v),y(S,v))},ne}}),Et=be((e,r)=>{le(),ae(),se();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:l,ObjectKeys:c,ObjectSetPrototypeOf:o}=He();r.exports=n;var i=Sr(),s=Mo();o(n.prototype,i.prototype),o(n,i);{let g=c(s.prototype);for(let b=0;b<g.length;b++){let m=g[b];n.prototype[m]||(n.prototype[m]=s.prototype[m])}}function n(g){if(!(this instanceof n))return new n(g);i.call(this,g),s.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(n.prototype,{writable:{__proto__:null,...l(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...l(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...l(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...l(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...l(s.prototype,"writableLength")},writableFinished:{__proto__:null,...l(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...l(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...l(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...l(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});var a;function f(){return a===void 0&&(a={}),a}n.fromWeb=function(g,b){return f().newStreamDuplexFromReadableWritablePair(g,b)},n.toWeb=function(g){return f().newReadableWritablePairFromDuplex(g)};var p;n.from=function(g){return p||(p=za()),p(g,"body")}}),xo=be((e,r)=>{le(),ae(),se();var{ObjectSetPrototypeOf:t,Symbol:l}=He();r.exports=n;var{ERR_METHOD_NOT_IMPLEMENTED:c}=rt().codes,o=Et(),{getHighWaterMark:i}=Zi();t(n.prototype,o.prototype),t(n,o);var s=l("kCallback");function n(p){if(!(this instanceof n))return new n(p);let g=p?i(this,p,"readableHighWaterMark",!0):null;g===0&&(p={...p,highWaterMark:null,readableHighWaterMark:g,writableHighWaterMark:p.writableHighWaterMark||0}),o.call(this,p),this._readableState.sync=!1,this[s]=null,p&&(typeof p.transform=="function"&&(this._transform=p.transform),typeof p.flush=="function"&&(this._flush=p.flush)),this.on("prefinish",f)}function a(p){typeof this._flush=="function"&&!this.destroyed?this._flush((g,b)=>{if(g){p?p(g):this.destroy(g);return}b!=null&&this.push(b),this.push(null),p&&p()}):(this.push(null),p&&p())}function f(){this._final!==a&&a.call(this)}n.prototype._final=a,n.prototype._transform=function(p,g,b){throw new c("_transform()")},n.prototype._write=function(p,g,b){let m=this._readableState,y=this._writableState,I=m.length;this._transform(p,g,(x,_)=>{if(x){b(x);return}_!=null&&this.push(_),y.ended||I===m.length||m.length<m.highWaterMark?b():this[s]=b})},n.prototype._read=function(){if(this[s]){let p=this[s];this[s]=null,p()}}}),Uo=be((e,r)=>{le(),ae(),se();var{ObjectSetPrototypeOf:t}=He();r.exports=c;var l=xo();t(c.prototype,l.prototype),t(c,l);function c(o){if(!(this instanceof c))return new c(o);l.call(this,o)}c.prototype._transform=function(o,i,s){s(null,o)}}),un=be((e,r)=>{le(),ae(),se();var t=Nt(),{ArrayIsArray:l,Promise:c,SymbolAsyncIterator:o}=He(),i=Rt(),{once:s}=yt(),n=Zt(),a=Et(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:I}=rt(),{validateFunction:x,validateAbortSignal:_}=br(),{isIterable:A,isReadable:N,isReadableNodeStream:D,isNodeStream:C,isTransformStream:T,isWebStream:M,isReadableStream:$,isReadableEnded:G}=wt(),re=globalThis.AbortController||Qi().AbortController,S,H;function te(Y,fe,ve){let he=!1;Y.on("close",()=>{he=!0});let B=i(Y,{readable:fe,writable:ve},E=>{he=!E});return{destroy:E=>{he||(he=!0,n.destroyer(Y,E||new m("pipe")))},cleanup:B}}function Q(Y){return x(Y[Y.length-1],"streams[stream.length - 1]"),Y.pop()}function ge(Y){if(A(Y))return Y;if(D(Y))return oe(Y);throw new p("val",["Readable","Iterable","AsyncIterable"],Y)}async function*oe(Y){H||(H=Sr()),yield*H.prototype[o].call(Y)}async function V(Y,fe,ve,{end:he}){let B,E=null,K=X=>{if(X&&(B=X),E){let ye=E;E=null,ye()}},ce=()=>new c((X,ye)=>{B?ye(B):E=()=>{B?ye(B):X()}});fe.on("drain",K);let ee=i(fe,{readable:!1},K);try{fe.writableNeedDrain&&await ce();for await(let X of Y)fe.write(X)||await ce();he&&fe.end(),await ce(),ve()}catch(X){ve(B!==X?f(B,X):X)}finally{ee(),fe.off("drain",K)}}async function me(Y,fe,ve,{end:he}){T(fe)&&(fe=fe.writable);let B=fe.getWriter();try{for await(let E of Y)await B.ready,B.write(E).catch(()=>{});await B.ready,he&&await B.close(),ve()}catch(E){try{await B.abort(E),ve(E)}catch(K){ve(K)}}}function ne(...Y){return we(Y,s(Q(Y)))}function we(Y,fe,ve){if(Y.length===1&&l(Y[0])&&(Y=Y[0]),Y.length<2)throw new b("streams");let he=new re,B=he.signal,E=ve==null?void 0:ve.signal,K=[];_(E,"options.signal");function ce(){j(new I)}E==null||E.addEventListener("abort",ce);let ee,X,ye=[],pe=0;function R(U){j(U,--pe===0)}function j(U,z){if(U&&(!ee||ee.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ee=U),!(!ee&&!z)){for(;ye.length;)ye.shift()(ee);E==null||E.removeEventListener("abort",ce),he.abort(),z&&(ee||K.forEach(O=>O()),t.nextTick(fe,ee,X))}}let F;for(let U=0;U<Y.length;U++){let z=Y[U],O=U<Y.length-1,L=U>0,q=O||(ve==null?void 0:ve.end)!==!1,ue=U===Y.length-1;if(C(z)){let h=function(u){u&&u.name!=="AbortError"&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"&&R(u)};if(q){let{destroy:u,cleanup:d}=te(z,O,L);ye.push(u),N(z)&&ue&&K.push(d)}z.on("error",h),N(z)&&ue&&K.push(()=>{z.removeListener("error",h)})}if(U===0)if(typeof z=="function"){if(F=z({signal:B}),!A(F))throw new g("Iterable, AsyncIterable or Stream","source",F)}else A(z)||D(z)||T(z)?F=z:F=a.from(z);else if(typeof z=="function"){if(T(F)){var ie;F=ge((ie=F)===null||ie===void 0?void 0:ie.readable)}else F=ge(F);if(F=z(F,{signal:B}),O){if(!A(F,!0))throw new g("AsyncIterable",`transform[${U-1}]`,F)}else{var J;S||(S=Uo());let h=new S({objectMode:!0}),u=(J=F)===null||J===void 0?void 0:J.then;if(typeof u=="function")pe++,u.call(F,k=>{X=k,k!=null&&h.write(k),q&&h.end(),t.nextTick(R)},k=>{h.destroy(k),t.nextTick(R,k)});else if(A(F,!0))pe++,V(F,h,R,{end:q});else if($(F)||T(F)){let k=F.readable||F;pe++,V(k,h,R,{end:q})}else throw new g("AsyncIterable or Promise","destination",F);F=h;let{destroy:d,cleanup:w}=te(F,!1,!0);ye.push(d),ue&&K.push(w)}}else if(C(z)){if(D(F)){pe+=2;let h=v(F,z,R,{end:q});N(z)&&ue&&K.push(h)}else if(T(F)||$(F)){let h=F.readable||F;pe++,V(h,z,R,{end:q})}else if(A(F))pe++,V(F,z,R,{end:q});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],F);F=z}else if(M(z)){if(D(F))pe++,me(ge(F),z,R,{end:q});else if($(F)||A(F))pe++,me(F,z,R,{end:q});else if(T(F))pe++,me(F.readable,z,R,{end:q});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],F);F=z}else F=a.from(z)}return(B!=null&&B.aborted||E!=null&&E.aborted)&&t.nextTick(ce),F}function v(Y,fe,ve,{end:he}){let B=!1;if(fe.on("close",()=>{B||ve(new y)}),Y.pipe(fe,{end:!1}),he){let E=function(){B=!0,fe.end()};G(Y)?t.nextTick(E):Y.once("end",E)}else ve();return i(Y,{readable:!0,writable:!1},E=>{let K=Y._readableState;E&&E.code==="ERR_STREAM_PREMATURE_CLOSE"&&K&&K.ended&&!K.errored&&!K.errorEmitted?Y.once("end",ve).once("error",ve):ve(E)}),i(fe,{readable:!1,writable:!0},ve)}r.exports={pipelineImpl:we,pipeline:ne}}),Lo=be((e,r)=>{le(),ae(),se();var{pipeline:t}=un(),l=Et(),{destroyer:c}=Zt(),{isNodeStream:o,isReadable:i,isWritable:s,isWebStream:n,isTransformStream:a,isWritableStream:f,isReadableStream:p}=wt(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:m}}=rt(),y=Rt();r.exports=function(...I){if(I.length===0)throw new m("streams");if(I.length===1)return l.from(I[0]);let x=[...I];if(typeof I[0]=="function"&&(I[0]=l.from(I[0])),typeof I[I.length-1]=="function"){let S=I.length-1;I[S]=l.from(I[S])}for(let S=0;S<I.length;++S)if(!(!o(I[S])&&!n(I[S]))){if(S<I.length-1&&!(i(I[S])||p(I[S])||a(I[S])))throw new b(`streams[${S}]`,x[S],"must be readable");if(S>0&&!(s(I[S])||f(I[S])||a(I[S])))throw new b(`streams[${S}]`,x[S],"must be writable")}let _,A,N,D,C;function T(S){let H=D;D=null,H?H(S):S?C.destroy(S):!re&&!G&&C.destroy()}let M=I[0],$=t(I,T),G=!!(s(M)||f(M)||a(M)),re=!!(i($)||p($)||a($));if(C=new l({writableObjectMode:!!(M!=null&&M.writableObjectMode),readableObjectMode:!!($!=null&&$.writableObjectMode),writable:G,readable:re}),G){if(o(M))C._write=function(H,te,Q){M.write(H,te)?Q():_=Q},C._final=function(H){M.end(),A=H},M.on("drain",function(){if(_){let H=_;_=null,H()}});else if(n(M)){let H=(a(M)?M.writable:M).getWriter();C._write=async function(te,Q,ge){try{await H.ready,H.write(te).catch(()=>{}),ge()}catch(oe){ge(oe)}},C._final=async function(te){try{await H.ready,H.close().catch(()=>{}),A=te}catch(Q){te(Q)}}}let S=a($)?$.readable:$;y(S,()=>{if(A){let H=A;A=null,H()}})}if(re){if(o($))$.on("readable",function(){if(N){let S=N;N=null,S()}}),$.on("end",function(){C.push(null)}),C._read=function(){for(;;){let S=$.read();if(S===null){N=C._read;return}if(!C.push(S))return}};else if(n($)){let S=(a($)?$.readable:$).getReader();C._read=async function(){for(;;)try{let{value:H,done:te}=await S.read();if(!C.push(H))return;if(te){C.push(null);return}}catch{return}}}}return C._destroy=function(S,H){!S&&D!==null&&(S=new g),N=null,_=null,A=null,D===null?H(S):(D=H,o($)&&c($,S))},C}}),Ka=be((e,r)=>{le(),ae(),se();var t=globalThis.AbortController||Qi().AbortController,{codes:{ERR_INVALID_ARG_VALUE:l,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:i},AbortError:s}=rt(),{validateAbortSignal:n,validateInteger:a,validateObject:f}=br(),p=He().Symbol("kWeak"),{finished:g}=Rt(),b=Lo(),{addAbortSignalNoValidate:m}=yr(),{isWritable:y,isNodeStream:I}=wt(),{ArrayPrototypePush:x,MathFloor:_,Number:A,NumberIsNaN:N,Promise:D,PromiseReject:C,PromisePrototypeThen:T,Symbol:M}=He(),$=M("kEmpty"),G=M("kEof");function re(he,B){if(B!=null&&f(B,"options"),(B==null?void 0:B.signal)!=null&&n(B.signal,"options.signal"),I(he)&&!y(he))throw new l("stream",he,"must be writable");let E=b(this,he);return B!=null&&B.signal&&m(B.signal,E),E}function S(he,B){if(typeof he!="function")throw new c("fn",["Function","AsyncFunction"],he);B!=null&&f(B,"options"),(B==null?void 0:B.signal)!=null&&n(B.signal,"options.signal");let E=1;return(B==null?void 0:B.concurrency)!=null&&(E=_(B.concurrency)),a(E,"concurrency",1),(async function*(){var K,ce;let ee=new t,X=this,ye=[],pe=ee.signal,R={signal:pe},j=()=>ee.abort();B!=null&&(K=B.signal)!==null&&K!==void 0&&K.aborted&&j(),B==null||(ce=B.signal)===null||ce===void 0||ce.addEventListener("abort",j);let F,ie,J=!1;function U(){J=!0}async function z(){try{for await(let q of X){var O;if(J)return;if(pe.aborted)throw new s;try{q=he(q,R)}catch(ue){q=C(ue)}q!==$&&(typeof((O=q)===null||O===void 0?void 0:O.catch)=="function"&&q.catch(U),ye.push(q),F&&(F(),F=null),!J&&ye.length&&ye.length>=E&&await new D(ue=>{ie=ue}))}ye.push(G)}catch(q){let ue=C(q);T(ue,void 0,U),ye.push(ue)}finally{var L;J=!0,F&&(F(),F=null),B==null||(L=B.signal)===null||L===void 0||L.removeEventListener("abort",j)}}z();try{for(;;){for(;ye.length>0;){let O=await ye[0];if(O===G)return;if(pe.aborted)throw new s;O!==$&&(yield O),ye.shift(),ie&&(ie(),ie=null)}await new D(O=>{F=O})}}finally{ee.abort(),J=!0,ie&&(ie(),ie=null)}}).call(this)}function H(he=void 0){return he!=null&&f(he,"options"),(he==null?void 0:he.signal)!=null&&n(he.signal,"options.signal"),(async function*(){let B=0;for await(let K of this){var E;if(he!=null&&(E=he.signal)!==null&&E!==void 0&&E.aborted)throw new s({cause:he.signal.reason});yield[B++,K]}}).call(this)}async function te(he,B=void 0){for await(let E of V.call(this,he,B))return!0;return!1}async function Q(he,B=void 0){if(typeof he!="function")throw new c("fn",["Function","AsyncFunction"],he);return!await te.call(this,async(...E)=>!await he(...E),B)}async function ge(he,B){for await(let E of V.call(this,he,B))return E}async function oe(he,B){if(typeof he!="function")throw new c("fn",["Function","AsyncFunction"],he);async function E(K,ce){return await he(K,ce),$}for await(let K of S.call(this,E,B));}function V(he,B){if(typeof he!="function")throw new c("fn",["Function","AsyncFunction"],he);async function E(K,ce){return await he(K,ce)?K:$}return S.call(this,E,B)}var me=class extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ne(he,B,E){var K;if(typeof he!="function")throw new c("reducer",["Function","AsyncFunction"],he);E!=null&&f(E,"options"),(E==null?void 0:E.signal)!=null&&n(E.signal,"options.signal");let ce=arguments.length>1;if(E!=null&&(K=E.signal)!==null&&K!==void 0&&K.aborted){let R=new s(void 0,{cause:E.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(R)),R}let ee=new t,X=ee.signal;if(E!=null&&E.signal){let R={once:!0,[p]:this};E.signal.addEventListener("abort",()=>ee.abort(),R)}let ye=!1;try{for await(let R of this){var pe;if(ye=!0,E!=null&&(pe=E.signal)!==null&&pe!==void 0&&pe.aborted)throw new s;ce?B=await he(B,R,{signal:X}):(B=R,ce=!0)}if(!ye&&!ce)throw new me}finally{ee.abort()}return B}async function we(he){he!=null&&f(he,"options"),(he==null?void 0:he.signal)!=null&&n(he.signal,"options.signal");let B=[];for await(let K of this){var E;if(he!=null&&(E=he.signal)!==null&&E!==void 0&&E.aborted)throw new s(void 0,{cause:he.signal.reason});x(B,K)}return B}function v(he,B){let E=S.call(this,he,B);return(async function*(){for await(let K of E)yield*K}).call(this)}function Y(he){if(he=A(he),N(he))return 0;if(he<0)throw new i("number",">= 0",he);return he}function fe(he,B=void 0){return B!=null&&f(B,"options"),(B==null?void 0:B.signal)!=null&&n(B.signal,"options.signal"),he=Y(he),(async function*(){var E;if(B!=null&&(E=B.signal)!==null&&E!==void 0&&E.aborted)throw new s;for await(let ce of this){var K;if(B!=null&&(K=B.signal)!==null&&K!==void 0&&K.aborted)throw new s;he--<=0&&(yield ce)}}).call(this)}function ve(he,B=void 0){return B!=null&&f(B,"options"),(B==null?void 0:B.signal)!=null&&n(B.signal,"options.signal"),he=Y(he),(async function*(){var E;if(B!=null&&(E=B.signal)!==null&&E!==void 0&&E.aborted)throw new s;for await(let ce of this){var K;if(B!=null&&(K=B.signal)!==null&&K!==void 0&&K.aborted)throw new s;if(he-- >0)yield ce;else return}}).call(this)}r.exports.streamReturningOperators={asIndexedPairs:H,drop:fe,filter:V,flatMap:v,map:S,take:ve,compose:re},r.exports.promiseReturningOperators={every:Q,forEach:oe,reduce:ne,toArray:we,some:te,find:ge}}),No=be((e,r)=>{le(),ae(),se();var{ArrayPrototypePop:t,Promise:l}=He(),{isIterable:c,isNodeStream:o,isWebStream:i}=wt(),{pipelineImpl:s}=un(),{finished:n}=Rt();jo();function a(...f){return new l((p,g)=>{let b,m,y=f[f.length-1];if(y&&typeof y=="object"&&!o(y)&&!c(y)&&!i(y)){let I=t(f);b=I.signal,m=I.end}s(f,(I,x)=>{I?g(I):p(x)},{signal:b,end:m})})}r.exports={finished:n,pipeline:a}}),jo=be((e,r)=>{le(),ae(),se();var{Buffer:t}=(Je(),Le(Ge)),{ObjectDefineProperty:l,ObjectKeys:c,ReflectApply:o}=He(),{promisify:{custom:i}}=yt(),{streamReturningOperators:s,promiseReturningOperators:n}=Ka(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=rt(),f=Lo(),{pipeline:p}=un(),{destroyer:g}=Zt(),b=Rt(),m=No(),y=wt(),I=r.exports=Xi().Stream;I.isDisturbed=y.isDisturbed,I.isErrored=y.isErrored,I.isReadable=y.isReadable,I.Readable=Sr();for(let _ of c(s)){let A=function(...D){if(new.target)throw a();return I.Readable.from(o(N,this,D))},N=s[_];l(A,"name",{__proto__:null,value:N.name}),l(A,"length",{__proto__:null,value:N.length}),l(I.Readable.prototype,_,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(let _ of c(n)){let A=function(...D){if(new.target)throw a();return o(N,this,D)},N=n[_];l(A,"name",{__proto__:null,value:N.name}),l(A,"length",{__proto__:null,value:N.length}),l(I.Readable.prototype,_,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}I.Writable=Mo(),I.Duplex=Et(),I.Transform=xo(),I.PassThrough=Uo(),I.pipeline=p;var{addAbortSignal:x}=yr();I.addAbortSignal=x,I.finished=b,I.destroy=g,I.compose=f,l(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),l(p,i,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),l(b,i,{__proto__:null,enumerable:!0,get(){return m.finished}}),I.Stream=I,I._isUint8Array=function(_){return _ instanceof Uint8Array},I._uint8ArrayToBuffer=function(_){return t.from(_.buffer,_.byteOffset,_.byteLength)}}),Vt=be((e,r)=>{le(),ae(),se();var t=jo(),l=No(),c=t.Readable.destroy;r.exports=t.Readable,r.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,r.exports._isUint8Array=t._isUint8Array,r.exports.isDisturbed=t.isDisturbed,r.exports.isErrored=t.isErrored,r.exports.isReadable=t.isReadable,r.exports.Readable=t.Readable,r.exports.Writable=t.Writable,r.exports.Duplex=t.Duplex,r.exports.Transform=t.Transform,r.exports.PassThrough=t.PassThrough,r.exports.addAbortSignal=t.addAbortSignal,r.exports.finished=t.finished,r.exports.destroy=t.destroy,r.exports.destroy=c,r.exports.pipeline=t.pipeline,r.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return l}}),r.exports.Stream=t.Stream,r.exports.default=r.exports}),Qa=be((e,r)=>{le(),ae(),se(),typeof Object.create=="function"?r.exports=function(t,l){l&&(t.super_=l,t.prototype=Object.create(l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,l){if(l){t.super_=l;var c=function(){};c.prototype=l.prototype,t.prototype=new c,t.prototype.constructor=t}}}),Ya=be((e,r)=>{le(),ae(),se();var{Buffer:t}=(Je(),Le(Ge)),l=Symbol.for("BufferList");function c(o){if(!(this instanceof c))return new c(o);c._init.call(this,o)}c._init=function(o){Object.defineProperty(this,l,{value:!0}),this._bufs=[],this.length=0,o&&this.append(o)},c.prototype._new=function(o){return new c(o)},c.prototype._offset=function(o){if(o===0)return[0,0];let i=0;for(let s=0;s<this._bufs.length;s++){let n=i+this._bufs[s].length;if(o<n||s===this._bufs.length-1)return[s,o-i];i=n}},c.prototype._reverseOffset=function(o){let i=o[0],s=o[1];for(let n=0;n<i;n++)s+=this._bufs[n].length;return s},c.prototype.get=function(o){if(o>this.length||o<0)return;let i=this._offset(o);return this._bufs[i[0]][i[1]]},c.prototype.slice=function(o,i){return typeof o=="number"&&o<0&&(o+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,o,i)},c.prototype.copy=function(o,i,s,n){if((typeof s!="number"||s<0)&&(s=0),(typeof n!="number"||n>this.length)&&(n=this.length),s>=this.length||n<=0)return o||t.alloc(0);let a=!!o,f=this._offset(s),p=n-s,g=p,b=a&&i||0,m=f[1];if(s===0&&n===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(o,b),b+=this._bufs[y].length;return o}if(g<=this._bufs[f[0]].length-m)return a?this._bufs[f[0]].copy(o,i,m,m+g):this._bufs[f[0]].slice(m,m+g);a||(o=t.allocUnsafe(p));for(let y=f[0];y<this._bufs.length;y++){let I=this._bufs[y].length-m;if(g>I)this._bufs[y].copy(o,b,m),b+=I;else{this._bufs[y].copy(o,b,m,m+g),b+=I;break}g-=I,m&&(m=0)}return o.length>b?o.slice(0,b):o},c.prototype.shallowSlice=function(o,i){if(o=o||0,i=typeof i!="number"?this.length:i,o<0&&(o+=this.length),i<0&&(i+=this.length),o===i)return this._new();let s=this._offset(o),n=this._offset(i),a=this._bufs.slice(s[0],n[0]+1);return n[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,n[1]),s[1]!==0&&(a[0]=a[0].slice(s[1])),this._new(a)},c.prototype.toString=function(o,i,s){return this.slice(i,s).toString(o)},c.prototype.consume=function(o){if(o=Math.trunc(o),Number.isNaN(o)||o<=0)return this;for(;this._bufs.length;)if(o>=this._bufs[0].length)o-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(o),this.length-=o;break}return this},c.prototype.duplicate=function(){let o=this._new();for(let i=0;i<this._bufs.length;i++)o.append(this._bufs[i]);return o},c.prototype.append=function(o){if(o==null)return this;if(o.buffer)this._appendBuffer(t.from(o.buffer,o.byteOffset,o.byteLength));else if(Array.isArray(o))for(let i=0;i<o.length;i++)this.append(o[i]);else if(this._isBufferList(o))for(let i=0;i<o._bufs.length;i++)this.append(o._bufs[i]);else typeof o=="number"&&(o=o.toString()),this._appendBuffer(t.from(o));return this},c.prototype._appendBuffer=function(o){this._bufs.push(o),this.length+=o.length},c.prototype.indexOf=function(o,i,s){if(s===void 0&&typeof i=="string"&&(s=i,i=void 0),typeof o=="function"||Array.isArray(o))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof o=="number"?o=t.from([o]):typeof o=="string"?o=t.from(o,s):this._isBufferList(o)?o=o.slice():Array.isArray(o.buffer)?o=t.from(o.buffer,o.byteOffset,o.byteLength):t.isBuffer(o)||(o=t.from(o)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),o.length===0)return i>this.length?this.length:i;let n=this._offset(i),a=n[0],f=n[1];for(;a<this._bufs.length;a++){let p=this._bufs[a];for(;f<p.length;)if(p.length-f>=o.length){let g=p.indexOf(o,f);if(g!==-1)return this._reverseOffset([a,g]);f=p.length-o.length+1}else{let g=this._reverseOffset([a,f]);if(this._match(g,o))return g;f++}f=0}return-1},c.prototype._match=function(o,i){if(this.length-o<i.length)return!1;for(let s=0;s<i.length;s++)if(this.get(o+s)!==i[s])return!1;return!0},function(){let o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let i in o)(function(s){o[s]===null?c.prototype[s]=function(n,a){return this.slice(n,n+a)[s](0,a)}:c.prototype[s]=function(n=0){return this.slice(n,n+o[s])[s](0)}})(i)}(),c.prototype._isBufferList=function(o){return o instanceof c||c.isBufferList(o)},c.isBufferList=function(o){return o!=null&&o[l]},r.exports=c}),Ga=be((e,r)=>{le(),ae(),se();var t=Vt().Duplex,l=Qa(),c=Ya();function o(i){if(!(this instanceof o))return new o(i);if(typeof i=="function"){this._callback=i;let s=(function(n){this._callback&&(this._callback(n),this._callback=null)}).bind(this);this.on("pipe",function(n){n.on("error",s)}),this.on("unpipe",function(n){n.removeListener("error",s)}),i=null}c._init.call(this,i),t.call(this)}l(o,t),Object.assign(o.prototype,c.prototype),o.prototype._new=function(i){return new o(i)},o.prototype._write=function(i,s,n){this._appendBuffer(i),typeof n=="function"&&n()},o.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},o.prototype.end=function(i){t.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(i,s){this._bufs.length=0,this.length=0,s(i)},o.prototype._isBufferList=function(i){return i instanceof o||i instanceof c||o.isBufferList(i)},o.isBufferList=c.isBufferList,r.exports=o,r.exports.BufferListStream=o,r.exports.BufferList=c}),Ja=be((e,r)=>{le(),ae(),se();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};r.exports=t}),Do=be((e,r)=>{le(),ae(),se();var t=r.exports,{Buffer:l}=(Je(),Le(Ge));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let o in t.requiredHeaderFlags){let i=t.requiredHeaderFlags[o];t.requiredHeaderFlagsErrors[o]="Invalid header flag bits, must be 0x"+i.toString(16)+" for "+t.types[o]+" packet"}t.codes={};for(let o in t.types){let i=t.types[o];t.codes[i]=o}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=l.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=l.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=l.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let o in t.properties){let i=t.properties[o];t.propertiesCodes[i]=o}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function c(o){return[0,1,2].map(i=>[0,1].map(s=>[0,1].map(n=>{let a=l.alloc(1);return a.writeUInt8(t.codes[o]<<t.CMD_SHIFT|(s?t.DUP_MASK:0)|i<<t.QOS_SHIFT|n,0,!0),a})))}t.PUBLISH_HEADER=c("publish"),t.SUBSCRIBE_HEADER=c("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=c("unsubscribe"),t.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},t.SUBACK_HEADER=l.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=l.from([3]),t.VERSION4=l.from([4]),t.VERSION5=l.from([5]),t.VERSION131=l.from([131]),t.VERSION132=l.from([132]),t.QOS=[0,1,2].map(o=>l.from([o])),t.EMPTY={pingreq:l.from([t.codes.pingreq<<4,0]),pingresp:l.from([t.codes.pingresp<<4,0]),disconnect:l.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Xa=be((e,r)=>{le(),ae(),se();var t=1e3,l=t*60,c=l*60,o=c*24,i=o*7,s=o*365.25;r.exports=function(g,b){b=b||{};var m=typeof g;if(m==="string"&&g.length>0)return n(g);if(m==="number"&&isFinite(g))return b.long?f(g):a(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function n(g){if(g=String(g),!(g.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(b){var m=parseFloat(b[1]),y=(b[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*o;case"hours":case"hour":case"hrs":case"hr":case"h":return m*c;case"minutes":case"minute":case"mins":case"min":case"m":return m*l;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(g){var b=Math.abs(g);return b>=o?Math.round(g/o)+"d":b>=c?Math.round(g/c)+"h":b>=l?Math.round(g/l)+"m":b>=t?Math.round(g/t)+"s":g+"ms"}function f(g){var b=Math.abs(g);return b>=o?p(g,b,o,"day"):b>=c?p(g,b,c,"hour"):b>=l?p(g,b,l,"minute"):b>=t?p(g,b,t,"second"):g+" ms"}function p(g,b,m,y){var I=b>=m*1.5;return Math.round(g/m)+" "+y+(I?"s":"")}}),Za=be((e,r)=>{le(),ae(),se();function t(l){o.debug=o,o.default=o,o.coerce=p,o.disable=n,o.enable=s,o.enabled=a,o.humanize=Xa(),o.destroy=g,Object.keys(l).forEach(b=>{o[b]=l[b]}),o.names=[],o.skips=[],o.formatters={};function c(b){let m=0;for(let y=0;y<b.length;y++)m=(m<<5)-m+b.charCodeAt(y),m|=0;return o.colors[Math.abs(m)%o.colors.length]}o.selectColor=c;function o(b){let m,y=null,I,x;function _(...A){if(!_.enabled)return;let N=_,D=Number(new Date),C=D-(m||D);N.diff=C,N.prev=m,N.curr=D,m=D,A[0]=o.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let T=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(M,$)=>{if(M==="%%")return"%";T++;let G=o.formatters[$];if(typeof G=="function"){let re=A[T];M=G.call(N,re),A.splice(T,1),T--}return M}),o.formatArgs.call(N,A),(N.log||o.log).apply(N,A)}return _.namespace=b,_.useColors=o.useColors(),_.color=o.selectColor(b),_.extend=i,_.destroy=o.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(I!==o.namespaces&&(I=o.namespaces,x=o.enabled(b)),x),set:A=>{y=A}}),typeof o.init=="function"&&o.init(_),_}function i(b,m){let y=o(this.namespace+(typeof m>"u"?":":m)+b);return y.log=this.log,y}function s(b){o.save(b),o.namespaces=b,o.names=[],o.skips=[];let m,y=(typeof b=="string"?b:"").split(/[\s,]+/),I=y.length;for(m=0;m<I;m++)y[m]&&(b=y[m].replace(/\*/g,".*?"),b[0]==="-"?o.skips.push(new RegExp("^"+b.slice(1)+"$")):o.names.push(new RegExp("^"+b+"$")))}function n(){let b=[...o.names.map(f),...o.skips.map(f).map(m=>"-"+m)].join(",");return o.enable(""),b}function a(b){if(b[b.length-1]==="*")return!0;let m,y;for(m=0,y=o.skips.length;m<y;m++)if(o.skips[m].test(b))return!1;for(m=0,y=o.names.length;m<y;m++)if(o.names[m].test(b))return!0;return!1}function f(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function p(b){return b instanceof Error?b.stack||b.message:b}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}r.exports=t}),St=be((e,r)=>{le(),ae(),se(),e.formatArgs=l,e.save=c,e.load=o,e.useColors=t,e.storage=i(),e.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof et<"u"&&et.userAgent&&et.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof et<"u"&&et.userAgent&&et.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof et<"u"&&et.userAgent&&et.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;let a="color: "+this.color;n.splice(1,0,a,"color: inherit");let f=0,p=0;n[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(f++,g==="%c"&&(p=f))}),n.splice(p,0,a)}e.log=console.debug||console.log||(()=>{});function c(n){try{n?e.storage.setItem("debug",n):e.storage.removeItem("debug")}catch{}}function o(){let n;try{n=e.storage.getItem("debug")}catch{}return!n&&typeof Be<"u"&&"env"in Be&&(n=Be.env.DEBUG),n}function i(){try{return localStorage}catch{}}r.exports=Za()(e);var{formatters:s}=r.exports;s.j=function(n){try{return JSON.stringify(n)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}}),el=be((e,r)=>{le(),ae(),se();var t=Ga(),{EventEmitter:l}=(er(),Le(Dt)),c=Ja(),o=Do(),i=St()("mqtt-packet:parser"),s=class On extends l{constructor(){super(),this.parser=this.constructor.parser}static parser(a){return this instanceof On?(this.settings=a||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new On().parser(a)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new c,this.error=null,this._list=t(),this._stateCounter=0}parse(a){for(this.error&&this._resetState(),this._list.append(a),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let a=this._list.readUInt8(0),f=a>>o.CMD_SHIFT;this.packet.cmd=o.types[f];let p=a&15,g=o.requiredHeaderFlags[f];return g!=null&&p!==g?this._emitError(new Error(o.requiredHeaderFlagsErrors[f])):(this.packet.retain=(a&o.RETAIN_MASK)!==0,this.packet.qos=a>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(a&o.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let a=this._parseVarByteNum(!0);return a&&(this.packet.length=a.value,this._list.consume(a.bytes)),i("_parseLength %d",a.value),!!a}_parsePayload(){i("_parsePayload: payload %O",this._list);let a=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}a=!0}return i("_parsePayload complete result: %s",a),a}_parseConnect(){i("_parseConnect");let a,f,p,g,b={},m=this.packet,y=this._parseString();if(y===null)return this._emitError(new Error("Cannot parse protocolId"));if(y!=="MQTT"&&y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(m.protocolId=y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(m.protocolVersion=this._list.readUInt8(this._pos),m.protocolVersion>=128&&(m.bridgeMode=!0,m.protocolVersion=m.protocolVersion-128),m.protocolVersion!==3&&m.protocolVersion!==4&&m.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));b.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,b.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,b.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let I=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),x=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(b.will)m.will={},m.will.retain=I,m.will.qos=x;else{if(I)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(x)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(m.clean=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK)!==0,this._pos++,m.keepalive=this._parseNum(),m.keepalive===-1)return this._emitError(new Error("Packet too short"));if(m.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(m.properties=A)}let _=this._parseString();if(_===null)return this._emitError(new Error("Packet too short"));if(m.clientId=_,i("_parseConnect: packet.clientId: %s",m.clientId),b.will){if(m.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(m.will.properties=A)}if(a=this._parseString(),a===null)return this._emitError(new Error("Cannot parse will topic"));if(m.will.topic=a,i("_parseConnect: packet.will.topic: %s",m.will.topic),f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse will payload"));m.will.payload=f,i("_parseConnect: packet.will.paylaod: %s",m.will.payload)}if(b.username){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse username"));m.username=g,i("_parseConnect: packet.username: %s",m.username)}if(b.password){if(p=this._parseBuffer(),p===null)return this._emitError(new Error("Cannot parse password"));m.password=p}return this.settings=m,i("_parseConnect: complete"),m}_parseConnack(){i("_parseConnack");let a=this.packet;if(this._list.length<1)return null;let f=this._list.readUInt8(this._pos++);if(f>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(a.sessionPresent=!!(f&o.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?a.reasonCode=this._list.readUInt8(this._pos++):a.reasonCode=0;else{if(this._list.length<2)return null;a.returnCode=this._list.readUInt8(this._pos++)}if(a.returnCode===-1||a.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let p=this._parseProperties();Object.getOwnPropertyNames(p).length&&(a.properties=p)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");let a=this.packet;if(a.topic=this._parseString(),a.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(a.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(a.properties=f)}a.payload=this._list.slice(this._pos,a.length),i("_parsePublish: payload from buffer list: %o",a.payload)}}_parseSubscribe(){i("_parseSubscribe");let a=this.packet,f,p,g,b,m,y,I;if(a.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(a.properties=x)}if(a.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<a.length;){if(f=this._parseString(),f===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=a.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(p=this._parseByte(),this.settings.protocolVersion===5){if(p&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(p&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(g=p&o.SUBSCRIBE_OPTIONS_QOS_MASK,g>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(y=(p>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK)!==0,m=(p>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,b=p>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,b>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));I={topic:f,qos:g},this.settings.protocolVersion===5?(I.nl=y,I.rap=m,I.rh=b):this.settings.bridgeMode&&(I.rh=0,I.rap=!0,I.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",I),a.subscriptions.push(I)}}}_parseSuback(){i("_parseSuback");let a=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(a.properties=f)}if(a.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!o.MQTT5_SUBACK_CODES[f])return this._emitError(new Error("Invalid suback code"))}else if(f>2&&f!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(f)}}}_parseUnsubscribe(){i("_parseUnsubscribe");let a=this.packet;if(a.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(a.properties=f)}if(a.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<a.length;){let f=this._parseString();if(f===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",f),a.unsubscriptions.push(f)}}}_parseUnsuback(){i("_parseUnsuback");let a=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&a.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(a.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let f=this._parseProperties();for(Object.getOwnPropertyNames(f).length&&(a.properties=f),a.granted=[];this._pos<this.packet.length;){let p=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[p])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(p)}}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let a=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(a.length>2){switch(a.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[a.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[a.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}i("_parseConfirmation: packet.reasonCode `%d`",a.reasonCode)}else a.reasonCode=0;if(a.length>3){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(a.properties=f)}}return!0}_parseDisconnect(){let a=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(a.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[a.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):a.reasonCode=0;let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(a.properties=f)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");let a=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(a.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[a.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let f=this._parseProperties();return Object.getOwnPropertyNames(f).length&&(a.properties=f),i("_parseAuth: result: true"),!0}_parseMessageId(){let a=this.packet;return a.messageId=this._parseNum(),a.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",a.messageId),!0)}_parseString(a){let f=this._parseNum(),p=f+this._pos;if(f===-1||p>this._list.length||p>this.packet.length)return null;let g=this._list.toString("utf8",this._pos,p);return this._pos+=f,i("_parseString: result: %s",g),g}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let a=this._parseNum(),f=a+this._pos;if(a===-1||f>this._list.length||f>this.packet.length)return null;let p=this._list.slice(this._pos,f);return this._pos+=a,i("_parseBuffer: result: %o",p),p}_parseNum(){if(this._list.length-this._pos<2)return-1;let a=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",a),a}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let a=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",a),a}_parseVarByteNum(a){i("_parseVarByteNum");let f=4,p=0,g=1,b=0,m=!1,y,I=this._pos?this._pos:0;for(;p<f&&I+p<this._list.length;){if(y=this._list.readUInt8(I+p++),b+=g*(y&o.VARBYTEINT_MASK),g*=128,!(y&o.VARBYTEINT_FIN_MASK)){m=!0;break}if(this._list.length<=p)break}return!m&&p===f&&this._list.length>=p&&this._emitError(new Error("Invalid variable byte integer")),I&&(this._pos+=p),m?a?m={bytes:p,value:b}:m=b:m=!1,i("_parseVarByteNum: result: %o",m),m}_parseByte(){let a;return this._pos<this._list.length&&(a=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",a),a}_parseByType(a){switch(i("_parseByType: type: %s",a),a){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");let a=this._parseVarByteNum(),f=this._pos+a,p={};for(;this._pos<f;){let g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;let b=o.propertiesCodes[g];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){p[b]||(p[b]=Object.create(null));let m=this._parseByType(o.propertiesTypes[b]);if(p[b][m.name])if(Array.isArray(p[b][m.name]))p[b][m.name].push(m.value);else{let y=p[b][m.name];p[b][m.name]=[y],p[b][m.name].push(m.value)}else p[b][m.name]=m.value;continue}p[b]?Array.isArray(p[b])?p[b].push(this._parseByType(o.propertiesTypes[b])):(p[b]=[p[b]],p[b].push(this._parseByType(o.propertiesTypes[b]))):p[b]=this._parseByType(o.propertiesTypes[b])}return p}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new c,this._pos=0,!0}_emitError(a){i("_emitError",a),this.error=a,this.emit("error",a)}};r.exports=s}),tl=be((e,r)=>{le(),ae(),se();var{Buffer:t}=(Je(),Le(Ge)),l=65536,c={},o=t.isBuffer(t.from([1,2]).subarray(0,1));function i(f){let p=t.allocUnsafe(2);return p.writeUInt8(f>>8,0),p.writeUInt8(f&255,1),p}function s(){for(let f=0;f<l;f++)c[f]=i(f)}function n(f){let p=0,g=0,b=t.allocUnsafe(4);do p=f%128|0,f=f/128|0,f>0&&(p=p|128),b.writeUInt8(p,g++);while(f>0&&g<4);return f>0&&(g=0),o?b.subarray(0,g):b.slice(0,g)}function a(f){let p=t.allocUnsafe(4);return p.writeUInt32BE(f,0),p}r.exports={cache:c,generateCache:s,generateNumber:i,genBufVariableByteInt:n,generate4ByteBuffer:a}}),rl=be((e,r)=>{le(),ae(),se(),typeof Be>"u"||!Be.version||Be.version.indexOf("v0.")===0||Be.version.indexOf("v1.")===0&&Be.version.indexOf("v1.8.")!==0?r.exports={nextTick:t}:r.exports=Be;function t(l,c,o,i){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,n,a;switch(s){case 0:case 1:return Be.nextTick(l);case 2:return Be.nextTick(function(){l.call(null,c)});case 3:return Be.nextTick(function(){l.call(null,c,o)});case 4:return Be.nextTick(function(){l.call(null,c,o,i)});default:for(n=new Array(s-1),a=0;a<n.length;)n[a++]=arguments[a];return Be.nextTick(function(){l.apply(null,n)})}}}),Fo=be((e,r)=>{le(),ae(),se();var t=Do(),{Buffer:l}=(Je(),Le(Ge)),c=l.allocUnsafe(0),o=l.from([0]),i=tl(),s=rl().nextTick,n=St()("mqtt-packet:writeToStream"),a=i.cache,f=i.generateNumber,p=i.generateCache,g=i.genBufVariableByteInt,b=i.generate4ByteBuffer,m=oe,y=!0;function I(B,E,K){switch(n("generate called"),E.cork&&(E.cork(),s(x,E)),y&&(y=!1,p()),n("generate: packet.cmd: %s",B.cmd),B.cmd){case"connect":return _(B,E);case"connack":return A(B,E,K);case"publish":return N(B,E,K);case"puback":case"pubrec":case"pubrel":case"pubcomp":return D(B,E,K);case"subscribe":return C(B,E,K);case"suback":return T(B,E,K);case"unsubscribe":return M(B,E,K);case"unsuback":return $(B,E,K);case"pingreq":case"pingresp":return G(B,E);case"disconnect":return re(B,E,K);case"auth":return S(B,E,K);default:return E.destroy(new Error("Unknown command")),!1}}Object.defineProperty(I,"cacheNumbers",{get(){return m===oe},set(B){B?((!a||Object.keys(a).length===0)&&(y=!0),m=oe):(y=!1,m=V)}});function x(B){B.uncork()}function _(B,E,K){let ce=B||{},ee=ce.protocolId||"MQTT",X=ce.protocolVersion||4,ye=ce.will,pe=ce.clean,R=ce.keepalive||0,j=ce.clientId||"",F=ce.username,ie=ce.password,J=ce.properties;pe===void 0&&(pe=!0);let U=0;if(!ee||typeof ee!="string"&&!l.isBuffer(ee))return E.destroy(new Error("Invalid protocolId")),!1;if(U+=ee.length+2,X!==3&&X!==4&&X!==5)return E.destroy(new Error("Invalid protocol version")),!1;if(U+=1,(typeof j=="string"||l.isBuffer(j))&&(j||X>=4)&&(j||pe))U+=l.byteLength(j)+2;else{if(X<4)return E.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(pe*1===0)return E.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof R!="number"||R<0||R>65535||R%1!==0)return E.destroy(new Error("Invalid keepalive")),!1;U+=2,U+=1;let z,O;if(X===5){if(z=we(E,J),!z)return!1;U+=z.length}if(ye){if(typeof ye!="object")return E.destroy(new Error("Invalid will")),!1;if(!ye.topic||typeof ye.topic!="string")return E.destroy(new Error("Invalid will topic")),!1;if(U+=l.byteLength(ye.topic)+2,U+=2,ye.payload)if(ye.payload.length>=0)typeof ye.payload=="string"?U+=l.byteLength(ye.payload):U+=ye.payload.length;else return E.destroy(new Error("Invalid will payload")),!1;if(O={},X===5){if(O=we(E,ye.properties),!O)return!1;U+=O.length}}let L=!1;if(F!=null)if(he(F))L=!0,U+=l.byteLength(F)+2;else return E.destroy(new Error("Invalid username")),!1;if(ie!=null){if(!L)return E.destroy(new Error("Username is required to use password")),!1;if(he(ie))U+=ve(ie)+2;else return E.destroy(new Error("Invalid password")),!1}E.write(t.CONNECT_HEADER),te(E,U),ne(E,ee),ce.bridgeMode&&(X+=128),E.write(X===131?t.VERSION131:X===132?t.VERSION132:X===4?t.VERSION4:X===5?t.VERSION5:t.VERSION3);let q=0;return q|=F!=null?t.USERNAME_MASK:0,q|=ie!=null?t.PASSWORD_MASK:0,q|=ye&&ye.retain?t.WILL_RETAIN_MASK:0,q|=ye&&ye.qos?ye.qos<<t.WILL_QOS_SHIFT:0,q|=ye?t.WILL_FLAG_MASK:0,q|=pe?t.CLEAN_SESSION_MASK:0,E.write(l.from([q])),m(E,R),X===5&&z.write(),ne(E,j),ye&&(X===5&&O.write(),Q(E,ye.topic),ne(E,ye.payload)),F!=null&&ne(E,F),ie!=null&&ne(E,ie),!0}function A(B,E,K){let ce=K?K.protocolVersion:4,ee=B||{},X=ce===5?ee.reasonCode:ee.returnCode,ye=ee.properties,pe=2;if(typeof X!="number")return E.destroy(new Error("Invalid return code")),!1;let R=null;if(ce===5){if(R=we(E,ye),!R)return!1;pe+=R.length}return E.write(t.CONNACK_HEADER),te(E,pe),E.write(ee.sessionPresent?t.SESSIONPRESENT_HEADER:o),E.write(l.from([X])),R==null||R.write(),!0}function N(B,E,K){n("publish: packet: %o",B);let ce=K?K.protocolVersion:4,ee=B||{},X=ee.qos||0,ye=ee.retain?t.RETAIN_MASK:0,pe=ee.topic,R=ee.payload||c,j=ee.messageId,F=ee.properties,ie=0;if(typeof pe=="string")ie+=l.byteLength(pe)+2;else if(l.isBuffer(pe))ie+=pe.length+2;else return E.destroy(new Error("Invalid topic")),!1;if(l.isBuffer(R)?ie+=R.length:ie+=l.byteLength(R),X&&typeof j!="number")return E.destroy(new Error("Invalid messageId")),!1;X&&(ie+=2);let J=null;if(ce===5){if(J=we(E,F),!J)return!1;ie+=J.length}return E.write(t.PUBLISH_HEADER[X][ee.dup?1:0][ye?1:0]),te(E,ie),m(E,ve(pe)),E.write(pe),X>0&&m(E,j),J==null||J.write(),n("publish: payload: %o",R),E.write(R)}function D(B,E,K){let ce=K?K.protocolVersion:4,ee=B||{},X=ee.cmd||"puback",ye=ee.messageId,pe=ee.dup&&X==="pubrel"?t.DUP_MASK:0,R=0,j=ee.reasonCode,F=ee.properties,ie=ce===5?3:2;if(X==="pubrel"&&(R=1),typeof ye!="number")return E.destroy(new Error("Invalid messageId")),!1;let J=null;if(ce===5&&typeof F=="object"){if(J=v(E,F,K,ie),!J)return!1;ie+=J.length}return E.write(t.ACKS[X][R][pe][0]),ie===3&&(ie+=j!==0?1:-1),te(E,ie),m(E,ye),ce===5&&ie!==2&&E.write(l.from([j])),J!==null?J.write():ie===4&&E.write(l.from([0])),!0}function C(B,E,K){n("subscribe: packet: ");let ce=K?K.protocolVersion:4,ee=B||{},X=ee.dup?t.DUP_MASK:0,ye=ee.messageId,pe=ee.subscriptions,R=ee.properties,j=0;if(typeof ye!="number")return E.destroy(new Error("Invalid messageId")),!1;j+=2;let F=null;if(ce===5){if(F=we(E,R),!F)return!1;j+=F.length}if(typeof pe=="object"&&pe.length)for(let J=0;J<pe.length;J+=1){let U=pe[J].topic,z=pe[J].qos;if(typeof U!="string")return E.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof z!="number")return E.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ce===5){if(typeof(pe[J].nl||!1)!="boolean")return E.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(pe[J].rap||!1)!="boolean")return E.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let O=pe[J].rh||0;if(typeof O!="number"||O>2)return E.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}j+=l.byteLength(U)+2+1}else return E.destroy(new Error("Invalid subscriptions")),!1;n("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),E.write(t.SUBSCRIBE_HEADER[1][X?1:0][0]),te(E,j),m(E,ye),F!==null&&F.write();let ie=!0;for(let J of pe){let U=J.topic,z=J.qos,O=+J.nl,L=+J.rap,q=J.rh,ue;Q(E,U),ue=t.SUBSCRIBE_OPTIONS_QOS[z],ce===5&&(ue|=O?t.SUBSCRIBE_OPTIONS_NL:0,ue|=L?t.SUBSCRIBE_OPTIONS_RAP:0,ue|=q?t.SUBSCRIBE_OPTIONS_RH[q]:0),ie=E.write(l.from([ue]))}return ie}function T(B,E,K){let ce=K?K.protocolVersion:4,ee=B||{},X=ee.messageId,ye=ee.granted,pe=ee.properties,R=0;if(typeof X!="number")return E.destroy(new Error("Invalid messageId")),!1;if(R+=2,typeof ye=="object"&&ye.length)for(let F=0;F<ye.length;F+=1){if(typeof ye[F]!="number")return E.destroy(new Error("Invalid qos vector")),!1;R+=1}else return E.destroy(new Error("Invalid qos vector")),!1;let j=null;if(ce===5){if(j=v(E,pe,K,R),!j)return!1;R+=j.length}return E.write(t.SUBACK_HEADER),te(E,R),m(E,X),j!==null&&j.write(),E.write(l.from(ye))}function M(B,E,K){let ce=K?K.protocolVersion:4,ee=B||{},X=ee.messageId,ye=ee.dup?t.DUP_MASK:0,pe=ee.unsubscriptions,R=ee.properties,j=0;if(typeof X!="number")return E.destroy(new Error("Invalid messageId")),!1;if(j+=2,typeof pe=="object"&&pe.length)for(let J=0;J<pe.length;J+=1){if(typeof pe[J]!="string")return E.destroy(new Error("Invalid unsubscriptions")),!1;j+=l.byteLength(pe[J])+2}else return E.destroy(new Error("Invalid unsubscriptions")),!1;let F=null;if(ce===5){if(F=we(E,R),!F)return!1;j+=F.length}E.write(t.UNSUBSCRIBE_HEADER[1][ye?1:0][0]),te(E,j),m(E,X),F!==null&&F.write();let ie=!0;for(let J=0;J<pe.length;J++)ie=Q(E,pe[J]);return ie}function $(B,E,K){let ce=K?K.protocolVersion:4,ee=B||{},X=ee.messageId,ye=ee.dup?t.DUP_MASK:0,pe=ee.granted,R=ee.properties,j=ee.cmd,F=0,ie=2;if(typeof X!="number")return E.destroy(new Error("Invalid messageId")),!1;if(ce===5)if(typeof pe=="object"&&pe.length)for(let U=0;U<pe.length;U+=1){if(typeof pe[U]!="number")return E.destroy(new Error("Invalid qos vector")),!1;ie+=1}else return E.destroy(new Error("Invalid qos vector")),!1;let J=null;if(ce===5){if(J=v(E,R,K,ie),!J)return!1;ie+=J.length}return E.write(t.ACKS[j][F][ye][0]),te(E,ie),m(E,X),J!==null&&J.write(),ce===5&&E.write(l.from(pe)),!0}function G(B,E,K){return E.write(t.EMPTY[B.cmd])}function re(B,E,K){let ce=K?K.protocolVersion:4,ee=B||{},X=ee.reasonCode,ye=ee.properties,pe=ce===5?1:0,R=null;if(ce===5){if(R=v(E,ye,K,pe),!R)return!1;pe+=R.length}return E.write(l.from([t.codes.disconnect<<4])),te(E,pe),ce===5&&E.write(l.from([X])),R!==null&&R.write(),!0}function S(B,E,K){let ce=K?K.protocolVersion:4,ee=B||{},X=ee.reasonCode,ye=ee.properties,pe=ce===5?1:0;ce!==5&&E.destroy(new Error("Invalid mqtt version for auth packet"));let R=v(E,ye,K,pe);return R?(pe+=R.length,E.write(l.from([t.codes.auth<<4])),te(E,pe),E.write(l.from([X])),R!==null&&R.write(),!0):!1}var H={};function te(B,E){if(E>t.VARBYTEINT_MAX)return B.destroy(new Error(`Invalid variable byte integer: ${E}`)),!1;let K=H[E];return K||(K=g(E),E<16384&&(H[E]=K)),n("writeVarByteInt: writing to stream: %o",K),B.write(K)}function Q(B,E){let K=l.byteLength(E);return m(B,K),n("writeString: %s",E),B.write(E,"utf8")}function ge(B,E,K){Q(B,E),Q(B,K)}function oe(B,E){return n("writeNumberCached: number: %d",E),n("writeNumberCached: %o",a[E]),B.write(a[E])}function V(B,E){let K=f(E);return n("writeNumberGenerated: %o",K),B.write(K)}function me(B,E){let K=b(E);return n("write4ByteNumber: %o",K),B.write(K)}function ne(B,E){typeof E=="string"?Q(B,E):E?(m(B,E.length),B.write(E)):m(B,0)}function we(B,E){if(typeof E!="object"||E.length!=null)return{length:1,write(){fe(B,{},0)}};let K=0;function ce(ee,X){let ye=t.propertiesTypes[ee],pe=0;switch(ye){case"byte":{if(typeof X!="boolean")return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=2;break}case"int8":{if(typeof X!="number"||X<0||X>255)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=2;break}case"binary":{if(X&&X===null)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=1+l.byteLength(X)+2;break}case"int16":{if(typeof X!="number"||X<0||X>65535)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=3;break}case"int32":{if(typeof X!="number"||X<0||X>4294967295)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=5;break}case"var":{if(typeof X!="number"||X<0||X>268435455)return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=1+l.byteLength(g(X));break}case"string":{if(typeof X!="string")return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=3+l.byteLength(X.toString());break}case"pair":{if(typeof X!="object")return B.destroy(new Error(`Invalid ${ee}: ${X}`)),!1;pe+=Object.getOwnPropertyNames(X).reduce((R,j)=>{let F=X[j];return Array.isArray(F)?R+=F.reduce((ie,J)=>(ie+=3+l.byteLength(j.toString())+2+l.byteLength(J.toString()),ie),0):R+=3+l.byteLength(j.toString())+2+l.byteLength(X[j].toString()),R},0);break}default:return B.destroy(new Error(`Invalid property ${ee}: ${X}`)),!1}return pe}if(E)for(let ee in E){let X=0,ye=0,pe=E[ee];if(Array.isArray(pe))for(let R=0;R<pe.length;R++){if(ye=ce(ee,pe[R]),!ye)return!1;X+=ye}else{if(ye=ce(ee,pe),!ye)return!1;X=ye}if(!X)return!1;K+=X}return{length:l.byteLength(g(K))+K,write(){fe(B,E,K)}}}function v(B,E,K,ce){let ee=["reasonString","userProperties"],X=K&&K.properties&&K.properties.maximumPacketSize?K.properties.maximumPacketSize:0,ye=we(B,E);if(X)for(;ce+ye.length>X;){let pe=ee.shift();if(pe&&E[pe])delete E[pe],ye=we(B,E);else return!1}return ye}function Y(B,E,K){switch(t.propertiesTypes[E]){case"byte":{B.write(l.from([t.properties[E]])),B.write(l.from([+K]));break}case"int8":{B.write(l.from([t.properties[E]])),B.write(l.from([K]));break}case"binary":{B.write(l.from([t.properties[E]])),ne(B,K);break}case"int16":{B.write(l.from([t.properties[E]])),m(B,K);break}case"int32":{B.write(l.from([t.properties[E]])),me(B,K);break}case"var":{B.write(l.from([t.properties[E]])),te(B,K);break}case"string":{B.write(l.from([t.properties[E]])),Q(B,K);break}case"pair":{Object.getOwnPropertyNames(K).forEach(ce=>{let ee=K[ce];Array.isArray(ee)?ee.forEach(X=>{B.write(l.from([t.properties[E]])),ge(B,ce.toString(),X.toString())}):(B.write(l.from([t.properties[E]])),ge(B,ce.toString(),ee.toString()))});break}default:return B.destroy(new Error(`Invalid property ${E} value: ${K}`)),!1}}function fe(B,E,K){te(B,K);for(let ce in E)if(Object.prototype.hasOwnProperty.call(E,ce)&&E[ce]!==null){let ee=E[ce];if(Array.isArray(ee))for(let X=0;X<ee.length;X++)Y(B,ce,ee[X]);else Y(B,ce,ee)}}function ve(B){return B?B instanceof l?B.length:l.byteLength(B):0}function he(B){return typeof B=="string"||B instanceof l}r.exports=I}),il=be((e,r)=>{le(),ae(),se();var t=Fo(),{EventEmitter:l}=(er(),Le(Dt)),{Buffer:c}=(Je(),Le(Ge));function o(s,n){let a=new i;return t(s,a,n),a.concat()}var i=class extends l{constructor(){super(),this._array=new Array(20),this._i=0}write(s){return this._array[this._i++]=s,!0}concat(){let s=0,n=new Array(this._array.length),a=this._array,f=0,p;for(p=0;p<a.length&&a[p]!==void 0;p++)typeof a[p]!="string"?n[p]=a[p].length:n[p]=c.byteLength(a[p]),s+=n[p];let g=c.allocUnsafe(s);for(p=0;p<a.length&&a[p]!==void 0;p++)typeof a[p]!="string"?(a[p].copy(g,f),f+=n[p]):(g.write(a[p],f),f+=n[p]);return g}destroy(s){s&&this.emit("error",s)}};r.exports=o}),nl=be(e=>{le(),ae(),se(),e.parser=el().parser,e.generate=il(),e.writeToStream=Fo()}),Wo=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=r}),ol=be((e,r)=>{le(),ae(),se(),r.exports=l;function t(o){return o instanceof gr?gr.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}function l(o){if(o=o||{},o.circles)return c(o);return o.proto?n:s;function i(a,f){for(var p=Object.keys(a),g=new Array(p.length),b=0;b<p.length;b++){var m=p[b],y=a[m];typeof y!="object"||y===null?g[m]=y:y instanceof Date?g[m]=new Date(y):ArrayBuffer.isView(y)?g[m]=t(y):g[m]=f(y)}return g}function s(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return i(a,s);if(a instanceof Map)return new Map(i(Array.from(a),s));if(a instanceof Set)return new Set(i(Array.from(a),s));var f={};for(var p in a)if(Object.hasOwnProperty.call(a,p)!==!1){var g=a[p];typeof g!="object"||g===null?f[p]=g:g instanceof Date?f[p]=new Date(g):g instanceof Map?f[p]=new Map(i(Array.from(g),s)):g instanceof Set?f[p]=new Set(i(Array.from(g),s)):ArrayBuffer.isView(g)?f[p]=t(g):f[p]=s(g)}return f}function n(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return i(a,n);if(a instanceof Map)return new Map(i(Array.from(a),n));if(a instanceof Set)return new Set(i(Array.from(a),n));var f={};for(var p in a){var g=a[p];typeof g!="object"||g===null?f[p]=g:g instanceof Date?f[p]=new Date(g):g instanceof Map?f[p]=new Map(i(Array.from(g),n)):g instanceof Set?f[p]=new Set(i(Array.from(g),n)):ArrayBuffer.isView(g)?f[p]=t(g):f[p]=n(g)}return f}}function c(o){var i=[],s=[];return o.proto?f:a;function n(p,g){for(var b=Object.keys(p),m=new Array(b.length),y=0;y<b.length;y++){var I=b[y],x=p[I];if(typeof x!="object"||x===null)m[I]=x;else if(x instanceof Date)m[I]=new Date(x);else if(ArrayBuffer.isView(x))m[I]=t(x);else{var _=i.indexOf(x);_!==-1?m[I]=s[_]:m[I]=g(x)}}return m}function a(p){if(typeof p!="object"||p===null)return p;if(p instanceof Date)return new Date(p);if(Array.isArray(p))return n(p,a);if(p instanceof Map)return new Map(n(Array.from(p),a));if(p instanceof Set)return new Set(n(Array.from(p),a));var g={};i.push(p),s.push(g);for(var b in p)if(Object.hasOwnProperty.call(p,b)!==!1){var m=p[b];if(typeof m!="object"||m===null)g[b]=m;else if(m instanceof Date)g[b]=new Date(m);else if(m instanceof Map)g[b]=new Map(n(Array.from(m),a));else if(m instanceof Set)g[b]=new Set(n(Array.from(m),a));else if(ArrayBuffer.isView(m))g[b]=t(m);else{var y=i.indexOf(m);y!==-1?g[b]=s[y]:g[b]=a(m)}}return i.pop(),s.pop(),g}function f(p){if(typeof p!="object"||p===null)return p;if(p instanceof Date)return new Date(p);if(Array.isArray(p))return n(p,f);if(p instanceof Map)return new Map(n(Array.from(p),f));if(p instanceof Set)return new Set(n(Array.from(p),f));var g={};i.push(p),s.push(g);for(var b in p){var m=p[b];if(typeof m!="object"||m===null)g[b]=m;else if(m instanceof Date)g[b]=new Date(m);else if(m instanceof Map)g[b]=new Map(n(Array.from(m),f));else if(m instanceof Set)g[b]=new Set(n(Array.from(m),f));else if(ArrayBuffer.isView(m))g[b]=t(m);else{var y=i.indexOf(m);y!==-1?g[b]=s[y]:g[b]=f(m)}}return i.pop(),s.pop(),g}}}),sl=be((e,r)=>{le(),ae(),se(),r.exports=ol()()}),al=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function r(l){let c=l.split("/");for(let o=0;o<c.length;o++)if(c[o]!=="+"){if(c[o]==="#")return o===c.length-1;if(c[o].indexOf("+")!==-1||c[o].indexOf("#")!==-1)return!1}return!0}e.validateTopic=r;function t(l){if(l.length===0)return"empty_topic_list";for(let c=0;c<l.length;c++)if(!r(l[c]))return l[c];return null}e.validateTopics=t}),$o=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=Vt(),t={objectMode:!0},l={clean:!0},c=class{constructor(o){this.options=o||{},this.options=Object.assign(Object.assign({},l),o),this._inflights=new Map}put(o,i){return this._inflights.set(o.messageId,o),i&&i(),this}createStream(){let o=new r.Readable(t),i=[],s=!1,n=0;return this._inflights.forEach((a,f)=>{i.push(a)}),o._read=()=>{!s&&n<i.length?o.push(i[n++]):o.push(null)},o.destroy=a=>{if(!s)return s=!0,setTimeout(()=>{o.emit("close")},0),o},o}del(o,i){let s=this._inflights.get(o.messageId);return s?(this._inflights.delete(o.messageId),i(null,s)):i&&i(new Error("missing packet")),this}get(o,i){let s=this._inflights.get(o.messageId);return s?i(null,s):i&&i(new Error("missing packet")),this}close(o){this.options.clean&&(this._inflights=null),o&&o()}};e.default=c}),ll=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=[0,16,128,131,135,144,145,151,153],t=(l,c,o)=>{l.log("handlePublish: packet %o",c),o=typeof o<"u"?o:l.noop;let i=c.topic.toString(),s=c.payload,{qos:n}=c,{messageId:a}=c,{options:f}=l;if(l.options.protocolVersion===5){let p;if(c.properties&&(p=c.properties.topicAlias),typeof p<"u")if(i.length===0)if(p>0&&p<=65535){let g=l.topicAliasRecv.getTopicByAlias(p);if(g)i=g,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,p);else{l.log("handlePublish :: unregistered topic alias. alias: %d",p),l.emit("error",new Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",p),l.emit("error",new Error("Received Topic Alias is out of range"));return}else if(l.topicAliasRecv.put(i,p))l.log("handlePublish :: registered topic: %s - alias: %d",i,p);else{l.log("handlePublish :: topic alias out of range. alias: %d",p),l.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(l.log("handlePublish: qos %d",n),n){case 2:{f.customHandleAcks(i,s,c,(p,g)=>{if(typeof p=="number"&&(g=p,p=null),p)return l.emit("error",p);if(r.indexOf(g)===-1)return l.emit("error",new Error("Wrong reason code for pubrec"));g?l._sendPacket({cmd:"pubrec",messageId:a,reasonCode:g},o):l.incomingStore.put(c,()=>{l._sendPacket({cmd:"pubrec",messageId:a},o)})});break}case 1:{f.customHandleAcks(i,s,c,(p,g)=>{if(typeof p=="number"&&(g=p,p=null),p)return l.emit("error",p);if(r.indexOf(g)===-1)return l.emit("error",new Error("Wrong reason code for puback"));g||l.emit("message",i,s,c),l.handleMessage(c,b=>{if(b)return o&&o(b);l._sendPacket({cmd:"puback",messageId:a,reasonCode:g},o)})});break}case 0:l.emit("message",i,s,c),l.handleMessage(c,o);break;default:l.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),ul=be((e,r)=>{r.exports={version:"5.7.0"}}),ur=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var r=class aa extends Error{constructor(c,o){super(c),this.code=o,Object.setPrototypeOf(this,aa.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=r;function t(l,c,o=!1){var i;let s=[c];for(;;){let n=s[0],a=Object.getPrototypeOf(n);if(a!=null&&a.prototype)s.unshift(a);else break}for(let n of s)for(let a of Object.getOwnPropertyNames(n.prototype))(o||a!=="constructor")&&Object.defineProperty(l.prototype,a,(i=Object.getOwnPropertyDescriptor(n.prototype,a))!==null&&i!==void 0?i:Object.create(null))}e.applyMixin=t,e.nextTick=typeof(Be==null?void 0:Be.nextTick)=="function"?Be.nextTick:l=>{setTimeout(l,0)},e.MQTTJS_VERSION=ul().version}),Ar=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0,e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var r=(t,l)=>{let{messageId:c}=l,o=l.cmd,i=null,s=t.outgoing[c]?t.outgoing[c].cb:null,n;if(!s){t.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(t.log("_handleAck :: packet type",o),o){case"pubcomp":case"puback":{let a=l.reasonCode;a&&a>0&&a!==16?(n=new Error(`Publish error: ${e.ReasonCodes[a]}`),n.code=a,t._removeOutgoingAndStoreMessage(c,()=>{s(n,l)})):t._removeOutgoingAndStoreMessage(c,s);break}case"pubrec":{i={cmd:"pubrel",qos:2,messageId:c};let a=l.reasonCode;a&&a>0&&a!==16?(n=new Error(`Publish error: ${e.ReasonCodes[a]}`),n.code=a,t._removeOutgoingAndStoreMessage(c,()=>{s(n,l)})):t._sendPacket(i);break}case"suback":{delete t.outgoing[c],t.messageIdProvider.deallocate(c);let a=l.granted;for(let f=0;f<a.length;f++)if(a[f]&128){let p=t.messageIdToTopic[c];p&&p.forEach(g=>{delete t._resubscribeTopics[g]})}delete t.messageIdToTopic[c],t._invokeStoreProcessingQueue(),s(null,l);break}case"unsuback":{delete t.outgoing[c],t.messageIdProvider.deallocate(c),t._invokeStoreProcessingQueue(),s(null);break}default:t.emit("error",new Error("unrecognized packet type"))}t.disconnecting&&Object.keys(t.outgoing).length===0&&t.emit("outgoingEmpty")};e.default=r}),hl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=ur(),t=Ar(),l=(c,o)=>{let{options:i}=c,s=i.protocolVersion,n=s===5?o.reasonCode:o.returnCode;if(s!==5){let a=new r.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${s}`,n);c.emit("error",a);return}c.handleAuth(o,(a,f)=>{if(a){c.emit("error",a);return}if(n===24)c.reconnecting=!1,c._sendPacket(f);else{let p=new r.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[n]}`,n);c.emit("error",p)}})};e.default=l}),cl=be(e=>{var b,m,y,I,x,_,A,N,D,C,T,M,$,G,re,S,H,te,Q,ge,oe,V,me,ne,we,v,Rn,fe,ve,he,B,la,K,ce,ee,Bt,Mt,Pn,Lr,Nr,Fe,Bn,fr,U;le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var r=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,l=typeof Be=="object"&&Be?Be:{},c=(z,O,L,q)=>{typeof l.emitWarning=="function"?l.emitWarning(z,O,L,q):console.error(`[${L}] ${O}: ${z}`)},o=globalThis.AbortController,i=globalThis.AbortSignal;if(typeof o>"u"){i=class{constructor(){Ee(this,"onabort");Ee(this,"_onabort",[]);Ee(this,"reason");Ee(this,"aborted",!1)}addEventListener(L,q){this._onabort.push(q)}},o=class{constructor(){Ee(this,"signal",new i);O()}abort(L){var q,ue;if(!this.signal.aborted){this.signal.reason=L,this.signal.aborted=!0;for(let h of this.signal._onabort)h(L);(ue=(q=this.signal).onabort)==null||ue.call(q,L)}}};let z=((b=l.env)==null?void 0:b.LRU_CACHE_IGNORE_AC_WARNING)!=="1",O=()=>{z&&(z=!1,c("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",O))}}var s=z=>!t.has(z),n=z=>z&&z===Math.floor(z)&&z>0&&isFinite(z),a=z=>n(z)?z<=Math.pow(2,8)?Uint8Array:z<=Math.pow(2,16)?Uint16Array:z<=Math.pow(2,32)?Uint32Array:z<=Number.MAX_SAFE_INTEGER?f:null:null,f=class extends Array{constructor(z){super(z),this.fill(0)}},p=(m=class{constructor(O,L){Ee(this,"heap");Ee(this,"length");if(!P(m,y))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new L(O),this.length=0}static create(O){let L=a(O);if(!L)return[];Ae(m,y,!0);let q=new m(O,L);return Ae(m,y,!1),q}push(O){this.heap[this.length++]=O}pop(){return this.heap[--this.length]}},y=new WeakMap,Re(m,y,!1),m),g=(U=class{constructor(O){Re(this,v);Re(this,I);Re(this,x);Re(this,_);Re(this,A);Re(this,N);Ee(this,"ttl");Ee(this,"ttlResolution");Ee(this,"ttlAutopurge");Ee(this,"updateAgeOnGet");Ee(this,"updateAgeOnHas");Ee(this,"allowStale");Ee(this,"noDisposeOnSet");Ee(this,"noUpdateTTL");Ee(this,"maxEntrySize");Ee(this,"sizeCalculation");Ee(this,"noDeleteOnFetchRejection");Ee(this,"noDeleteOnStaleGet");Ee(this,"allowStaleOnFetchAbort");Ee(this,"allowStaleOnFetchRejection");Ee(this,"ignoreFetchAbort");Re(this,D);Re(this,C);Re(this,T);Re(this,M);Re(this,$);Re(this,G);Re(this,re);Re(this,S);Re(this,H);Re(this,te);Re(this,Q);Re(this,ge);Re(this,oe);Re(this,V);Re(this,me);Re(this,ne);Re(this,we);Re(this,fe,()=>{});Re(this,ve,()=>{});Re(this,he,()=>{});Re(this,B,()=>!1);Re(this,K,O=>{});Re(this,ce,(O,L,q)=>{});Re(this,ee,(O,L,q,ue)=>{if(q||ue)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:L=0,ttl:q,ttlResolution:ue=1,ttlAutopurge:h,updateAgeOnGet:u,updateAgeOnHas:d,allowStale:w,dispose:k,disposeAfter:W,noDisposeOnSet:Z,noUpdateTTL:Ie,maxSize:Ce=0,maxEntrySize:Oe=0,sizeCalculation:Se,fetchMethod:Te,noDeleteOnFetchRejection:ke,noDeleteOnStaleGet:Ne,allowStaleOnFetchRejection:Ke,allowStaleOnFetchAbort:Ve,ignoreFetchAbort:Xe}=O;if(L!==0&&!n(L))throw new TypeError("max option must be a nonnegative integer");let tt=L?a(L):Array;if(!tt)throw new Error("invalid max value: "+L);if(Ae(this,I,L),Ae(this,x,Ce),this.maxEntrySize=Oe||P(this,x),this.sizeCalculation=Se,this.sizeCalculation){if(!P(this,x)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Te!==void 0&&typeof Te!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ae(this,N,Te),Ae(this,ne,!!Te),Ae(this,T,new Map),Ae(this,M,new Array(L).fill(void 0)),Ae(this,$,new Array(L).fill(void 0)),Ae(this,G,new tt(L)),Ae(this,re,new tt(L)),Ae(this,S,0),Ae(this,H,0),Ae(this,te,p.create(L)),Ae(this,D,0),Ae(this,C,0),typeof k=="function"&&Ae(this,_,k),typeof W=="function"?(Ae(this,A,W),Ae(this,Q,[])):(Ae(this,A,void 0),Ae(this,Q,void 0)),Ae(this,me,!!P(this,_)),Ae(this,we,!!P(this,A)),this.noDisposeOnSet=!!Z,this.noUpdateTTL=!!Ie,this.noDeleteOnFetchRejection=!!ke,this.allowStaleOnFetchRejection=!!Ke,this.allowStaleOnFetchAbort=!!Ve,this.ignoreFetchAbort=!!Xe,this.maxEntrySize!==0){if(P(this,x)!==0&&!n(P(this,x)))throw new TypeError("maxSize must be a positive integer if specified");if(!n(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");_e(this,v,la).call(this)}if(this.allowStale=!!w,this.noDeleteOnStaleGet=!!Ne,this.updateAgeOnGet=!!u,this.updateAgeOnHas=!!d,this.ttlResolution=n(ue)||ue===0?ue:1,this.ttlAutopurge=!!h,this.ttl=q||0,this.ttl){if(!n(this.ttl))throw new TypeError("ttl must be a positive integer if specified");_e(this,v,Rn).call(this)}if(P(this,I)===0&&this.ttl===0&&P(this,x)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!P(this,I)&&!P(this,x)){let Qe="LRU_CACHE_UNBOUNDED";s(Qe)&&(t.add(Qe),c("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Qe,U))}}static unsafeExposeInternals(O){return{starts:P(O,oe),ttls:P(O,V),sizes:P(O,ge),keyMap:P(O,T),keyList:P(O,M),valList:P(O,$),next:P(O,G),prev:P(O,re),get head(){return P(O,S)},get tail(){return P(O,H)},free:P(O,te),isBackgroundFetch:L=>{var q;return _e(q=O,v,Fe).call(q,L)},backgroundFetch:(L,q,ue,h)=>{var u;return _e(u=O,v,Nr).call(u,L,q,ue,h)},moveToTail:L=>{var q;return _e(q=O,v,fr).call(q,L)},indexes:L=>{var q;return _e(q=O,v,Bt).call(q,L)},rindexes:L=>{var q;return _e(q=O,v,Mt).call(q,L)},isStale:L=>{var q;return P(q=O,B).call(q,L)}}}get max(){return P(this,I)}get maxSize(){return P(this,x)}get calculatedSize(){return P(this,C)}get size(){return P(this,D)}get fetchMethod(){return P(this,N)}get dispose(){return P(this,_)}get disposeAfter(){return P(this,A)}getRemainingTTL(O){return P(this,T).has(O)?1/0:0}*entries(){for(let O of _e(this,v,Bt).call(this))P(this,$)[O]!==void 0&&P(this,M)[O]!==void 0&&!_e(this,v,Fe).call(this,P(this,$)[O])&&(yield[P(this,M)[O],P(this,$)[O]])}*rentries(){for(let O of _e(this,v,Mt).call(this))P(this,$)[O]!==void 0&&P(this,M)[O]!==void 0&&!_e(this,v,Fe).call(this,P(this,$)[O])&&(yield[P(this,M)[O],P(this,$)[O]])}*keys(){for(let O of _e(this,v,Bt).call(this)){let L=P(this,M)[O];L!==void 0&&!_e(this,v,Fe).call(this,P(this,$)[O])&&(yield L)}}*rkeys(){for(let O of _e(this,v,Mt).call(this)){let L=P(this,M)[O];L!==void 0&&!_e(this,v,Fe).call(this,P(this,$)[O])&&(yield L)}}*values(){for(let O of _e(this,v,Bt).call(this))P(this,$)[O]!==void 0&&!_e(this,v,Fe).call(this,P(this,$)[O])&&(yield P(this,$)[O])}*rvalues(){for(let O of _e(this,v,Mt).call(this))P(this,$)[O]!==void 0&&!_e(this,v,Fe).call(this,P(this,$)[O])&&(yield P(this,$)[O])}[Symbol.iterator](){return this.entries()}find(O,L={}){for(let q of _e(this,v,Bt).call(this)){let ue=P(this,$)[q],h=_e(this,v,Fe).call(this,ue)?ue.__staleWhileFetching:ue;if(h!==void 0&&O(h,P(this,M)[q],this))return this.get(P(this,M)[q],L)}}forEach(O,L=this){for(let q of _e(this,v,Bt).call(this)){let ue=P(this,$)[q],h=_e(this,v,Fe).call(this,ue)?ue.__staleWhileFetching:ue;h!==void 0&&O.call(L,h,P(this,M)[q],this)}}rforEach(O,L=this){for(let q of _e(this,v,Mt).call(this)){let ue=P(this,$)[q],h=_e(this,v,Fe).call(this,ue)?ue.__staleWhileFetching:ue;h!==void 0&&O.call(L,h,P(this,M)[q],this)}}purgeStale(){let O=!1;for(let L of _e(this,v,Mt).call(this,{allowStale:!0}))P(this,B).call(this,L)&&(this.delete(P(this,M)[L]),O=!0);return O}dump(){let O=[];for(let L of _e(this,v,Bt).call(this,{allowStale:!0})){let q=P(this,M)[L],ue=P(this,$)[L],h=_e(this,v,Fe).call(this,ue)?ue.__staleWhileFetching:ue;if(h===void 0||q===void 0)continue;let u={value:h};if(P(this,V)&&P(this,oe)){u.ttl=P(this,V)[L];let d=r.now()-P(this,oe)[L];u.start=Math.floor(Date.now()-d)}P(this,ge)&&(u.size=P(this,ge)[L]),O.unshift([q,u])}return O}load(O){this.clear();for(let[L,q]of O){if(q.start){let ue=Date.now()-q.start;q.start=r.now()-ue}this.set(L,q.value,q)}}set(O,L,q={}){var Ie,Ce,Oe,Se,Te;if(L===void 0)return this.delete(O),this;let{ttl:ue=this.ttl,start:h,noDisposeOnSet:u=this.noDisposeOnSet,sizeCalculation:d=this.sizeCalculation,status:w}=q,{noUpdateTTL:k=this.noUpdateTTL}=q,W=P(this,ee).call(this,O,L,q.size||0,d);if(this.maxEntrySize&&W>this.maxEntrySize)return w&&(w.set="miss",w.maxEntrySizeExceeded=!0),this.delete(O),this;let Z=P(this,D)===0?void 0:P(this,T).get(O);if(Z===void 0)Z=P(this,D)===0?P(this,H):P(this,te).length!==0?P(this,te).pop():P(this,D)===P(this,I)?_e(this,v,Lr).call(this,!1):P(this,D),P(this,M)[Z]=O,P(this,$)[Z]=L,P(this,T).set(O,Z),P(this,G)[P(this,H)]=Z,P(this,re)[Z]=P(this,H),Ae(this,H,Z),Ur(this,D)._++,P(this,ce).call(this,Z,W,w),w&&(w.set="add"),k=!1;else{_e(this,v,fr).call(this,Z);let ke=P(this,$)[Z];if(L!==ke){if(P(this,ne)&&_e(this,v,Fe).call(this,ke)){ke.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Ne}=ke;Ne!==void 0&&!u&&(P(this,me)&&((Ie=P(this,_))==null||Ie.call(this,Ne,O,"set")),P(this,we)&&((Ce=P(this,Q))==null||Ce.push([Ne,O,"set"])))}else u||(P(this,me)&&((Oe=P(this,_))==null||Oe.call(this,ke,O,"set")),P(this,we)&&((Se=P(this,Q))==null||Se.push([ke,O,"set"])));if(P(this,K).call(this,Z),P(this,ce).call(this,Z,W,w),P(this,$)[Z]=L,w){w.set="replace";let Ne=ke&&_e(this,v,Fe).call(this,ke)?ke.__staleWhileFetching:ke;Ne!==void 0&&(w.oldValue=Ne)}}else w&&(w.set="update")}if(ue!==0&&!P(this,V)&&_e(this,v,Rn).call(this),P(this,V)&&(k||P(this,he).call(this,Z,ue,h),w&&P(this,ve).call(this,w,Z)),!u&&P(this,we)&&P(this,Q)){let ke=P(this,Q),Ne;for(;Ne=ke==null?void 0:ke.shift();)(Te=P(this,A))==null||Te.call(this,...Ne)}return this}pop(){var O;try{for(;P(this,D);){let L=P(this,$)[P(this,S)];if(_e(this,v,Lr).call(this,!0),_e(this,v,Fe).call(this,L)){if(L.__staleWhileFetching)return L.__staleWhileFetching}else if(L!==void 0)return L}}finally{if(P(this,we)&&P(this,Q)){let L=P(this,Q),q;for(;q=L==null?void 0:L.shift();)(O=P(this,A))==null||O.call(this,...q)}}}has(O,L={}){let{updateAgeOnHas:q=this.updateAgeOnHas,status:ue}=L,h=P(this,T).get(O);if(h!==void 0){let u=P(this,$)[h];if(_e(this,v,Fe).call(this,u)&&u.__staleWhileFetching===void 0)return!1;if(P(this,B).call(this,h))ue&&(ue.has="stale",P(this,ve).call(this,ue,h));else return q&&P(this,fe).call(this,h),ue&&(ue.has="hit",P(this,ve).call(this,ue,h)),!0}else ue&&(ue.has="miss");return!1}peek(O,L={}){let{allowStale:q=this.allowStale}=L,ue=P(this,T).get(O);if(ue!==void 0&&(q||!P(this,B).call(this,ue))){let h=P(this,$)[ue];return _e(this,v,Fe).call(this,h)?h.__staleWhileFetching:h}}async fetch(O,L={}){let{allowStale:q=this.allowStale,updateAgeOnGet:ue=this.updateAgeOnGet,noDeleteOnStaleGet:h=this.noDeleteOnStaleGet,ttl:u=this.ttl,noDisposeOnSet:d=this.noDisposeOnSet,size:w=0,sizeCalculation:k=this.sizeCalculation,noUpdateTTL:W=this.noUpdateTTL,noDeleteOnFetchRejection:Z=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ie=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ce=this.ignoreFetchAbort,allowStaleOnFetchAbort:Oe=this.allowStaleOnFetchAbort,context:Se,forceRefresh:Te=!1,status:ke,signal:Ne}=L;if(!P(this,ne))return ke&&(ke.fetch="get"),this.get(O,{allowStale:q,updateAgeOnGet:ue,noDeleteOnStaleGet:h,status:ke});let Ke={allowStale:q,updateAgeOnGet:ue,noDeleteOnStaleGet:h,ttl:u,noDisposeOnSet:d,size:w,sizeCalculation:k,noUpdateTTL:W,noDeleteOnFetchRejection:Z,allowStaleOnFetchRejection:Ie,allowStaleOnFetchAbort:Oe,ignoreFetchAbort:Ce,status:ke,signal:Ne},Ve=P(this,T).get(O);if(Ve===void 0){ke&&(ke.fetch="miss");let Xe=_e(this,v,Nr).call(this,O,Ve,Ke,Se);return Xe.__returned=Xe}else{let Xe=P(this,$)[Ve];if(_e(this,v,Fe).call(this,Xe)){let oa=q&&Xe.__staleWhileFetching!==void 0;return ke&&(ke.fetch="inflight",oa&&(ke.returnedStale=!0)),oa?Xe.__staleWhileFetching:Xe.__returned=Xe}let tt=P(this,B).call(this,Ve);if(!Te&&!tt)return ke&&(ke.fetch="hit"),_e(this,v,fr).call(this,Ve),ue&&P(this,fe).call(this,Ve),ke&&P(this,ve).call(this,ke,Ve),Xe;let Qe=_e(this,v,Nr).call(this,O,Ve,Ke,Se),na=Qe.__staleWhileFetching!==void 0&&q;return ke&&(ke.fetch=tt?"stale":"refresh",na&&tt&&(ke.returnedStale=!0)),na?Qe.__staleWhileFetching:Qe.__returned=Qe}}get(O,L={}){let{allowStale:q=this.allowStale,updateAgeOnGet:ue=this.updateAgeOnGet,noDeleteOnStaleGet:h=this.noDeleteOnStaleGet,status:u}=L,d=P(this,T).get(O);if(d!==void 0){let w=P(this,$)[d],k=_e(this,v,Fe).call(this,w);return u&&P(this,ve).call(this,u,d),P(this,B).call(this,d)?(u&&(u.get="stale"),k?(u&&q&&w.__staleWhileFetching!==void 0&&(u.returnedStale=!0),q?w.__staleWhileFetching:void 0):(h||this.delete(O),u&&q&&(u.returnedStale=!0),q?w:void 0)):(u&&(u.get="hit"),k?w.__staleWhileFetching:(_e(this,v,fr).call(this,d),ue&&P(this,fe).call(this,d),w))}else u&&(u.get="miss")}delete(O){var q,ue,h,u;let L=!1;if(P(this,D)!==0){let d=P(this,T).get(O);if(d!==void 0)if(L=!0,P(this,D)===1)this.clear();else{P(this,K).call(this,d);let w=P(this,$)[d];_e(this,v,Fe).call(this,w)?w.__abortController.abort(new Error("deleted")):(P(this,me)||P(this,we))&&(P(this,me)&&((q=P(this,_))==null||q.call(this,w,O,"delete")),P(this,we)&&((ue=P(this,Q))==null||ue.push([w,O,"delete"]))),P(this,T).delete(O),P(this,M)[d]=void 0,P(this,$)[d]=void 0,d===P(this,H)?Ae(this,H,P(this,re)[d]):d===P(this,S)?Ae(this,S,P(this,G)[d]):(P(this,G)[P(this,re)[d]]=P(this,G)[d],P(this,re)[P(this,G)[d]]=P(this,re)[d]),Ur(this,D)._--,P(this,te).push(d)}}if(P(this,we)&&((h=P(this,Q))!=null&&h.length)){let d=P(this,Q),w;for(;w=d==null?void 0:d.shift();)(u=P(this,A))==null||u.call(this,...w)}return L}clear(){var O,L,q;for(let ue of _e(this,v,Mt).call(this,{allowStale:!0})){let h=P(this,$)[ue];if(_e(this,v,Fe).call(this,h))h.__abortController.abort(new Error("deleted"));else{let u=P(this,M)[ue];P(this,me)&&((O=P(this,_))==null||O.call(this,h,u,"delete")),P(this,we)&&((L=P(this,Q))==null||L.push([h,u,"delete"]))}}if(P(this,T).clear(),P(this,$).fill(void 0),P(this,M).fill(void 0),P(this,V)&&P(this,oe)&&(P(this,V).fill(0),P(this,oe).fill(0)),P(this,ge)&&P(this,ge).fill(0),Ae(this,S,0),Ae(this,H,0),P(this,te).length=0,Ae(this,C,0),Ae(this,D,0),P(this,we)&&P(this,Q)){let ue=P(this,Q),h;for(;h=ue==null?void 0:ue.shift();)(q=P(this,A))==null||q.call(this,...h)}}},I=new WeakMap,x=new WeakMap,_=new WeakMap,A=new WeakMap,N=new WeakMap,D=new WeakMap,C=new WeakMap,T=new WeakMap,M=new WeakMap,$=new WeakMap,G=new WeakMap,re=new WeakMap,S=new WeakMap,H=new WeakMap,te=new WeakMap,Q=new WeakMap,ge=new WeakMap,oe=new WeakMap,V=new WeakMap,me=new WeakMap,ne=new WeakMap,we=new WeakMap,v=new WeakSet,Rn=function(){let O=new f(P(this,I)),L=new f(P(this,I));Ae(this,V,O),Ae(this,oe,L),Ae(this,he,(h,u,d=r.now())=>{if(L[h]=u!==0?d:0,O[h]=u,u!==0&&this.ttlAutopurge){let w=setTimeout(()=>{P(this,B).call(this,h)&&this.delete(P(this,M)[h])},u+1);w.unref&&w.unref()}}),Ae(this,fe,h=>{L[h]=O[h]!==0?r.now():0}),Ae(this,ve,(h,u)=>{if(O[u]){let d=O[u],w=L[u];h.ttl=d,h.start=w,h.now=q||ue();let k=h.now-w;h.remainingTTL=d-k}});let q=0,ue=()=>{let h=r.now();if(this.ttlResolution>0){q=h;let u=setTimeout(()=>q=0,this.ttlResolution);u.unref&&u.unref()}return h};this.getRemainingTTL=h=>{let u=P(this,T).get(h);if(u===void 0)return 0;let d=O[u],w=L[u];if(d===0||w===0)return 1/0;let k=(q||ue())-w;return d-k},Ae(this,B,h=>O[h]!==0&&L[h]!==0&&(q||ue())-L[h]>O[h])},fe=new WeakMap,ve=new WeakMap,he=new WeakMap,B=new WeakMap,la=function(){let O=new f(P(this,I));Ae(this,C,0),Ae(this,ge,O),Ae(this,K,L=>{Ae(this,C,P(this,C)-O[L]),O[L]=0}),Ae(this,ee,(L,q,ue,h)=>{if(_e(this,v,Fe).call(this,q))return 0;if(!n(ue))if(h){if(typeof h!="function")throw new TypeError("sizeCalculation must be a function");if(ue=h(q,L),!n(ue))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return ue}),Ae(this,ce,(L,q,ue)=>{if(O[L]=q,P(this,x)){let h=P(this,x)-O[L];for(;P(this,C)>h;)_e(this,v,Lr).call(this,!0)}Ae(this,C,P(this,C)+O[L]),ue&&(ue.entrySize=q,ue.totalCalculatedSize=P(this,C))})},K=new WeakMap,ce=new WeakMap,ee=new WeakMap,Bt=function*({allowStale:O=this.allowStale}={}){if(P(this,D))for(let L=P(this,H);!(!_e(this,v,Pn).call(this,L)||((O||!P(this,B).call(this,L))&&(yield L),L===P(this,S)));)L=P(this,re)[L]},Mt=function*({allowStale:O=this.allowStale}={}){if(P(this,D))for(let L=P(this,S);!(!_e(this,v,Pn).call(this,L)||((O||!P(this,B).call(this,L))&&(yield L),L===P(this,H)));)L=P(this,G)[L]},Pn=function(O){return O!==void 0&&P(this,T).get(P(this,M)[O])===O},Lr=function(O){var h,u;let L=P(this,S),q=P(this,M)[L],ue=P(this,$)[L];return P(this,ne)&&_e(this,v,Fe).call(this,ue)?ue.__abortController.abort(new Error("evicted")):(P(this,me)||P(this,we))&&(P(this,me)&&((h=P(this,_))==null||h.call(this,ue,q,"evict")),P(this,we)&&((u=P(this,Q))==null||u.push([ue,q,"evict"]))),P(this,K).call(this,L),O&&(P(this,M)[L]=void 0,P(this,$)[L]=void 0,P(this,te).push(L)),P(this,D)===1?(Ae(this,S,Ae(this,H,0)),P(this,te).length=0):Ae(this,S,P(this,G)[L]),P(this,T).delete(q),Ur(this,D)._--,L},Nr=function(O,L,q,ue){let h=L===void 0?void 0:P(this,$)[L];if(_e(this,v,Fe).call(this,h))return h;let u=new o,{signal:d}=q;d==null||d.addEventListener("abort",()=>u.abort(d.reason),{signal:u.signal});let w={signal:u.signal,options:q,context:ue},k=(Se,Te=!1)=>{let{aborted:ke}=u.signal,Ne=q.ignoreFetchAbort&&Se!==void 0;if(q.status&&(ke&&!Te?(q.status.fetchAborted=!0,q.status.fetchError=u.signal.reason,Ne&&(q.status.fetchAbortIgnored=!0)):q.status.fetchResolved=!0),ke&&!Ne&&!Te)return Z(u.signal.reason);let Ke=Ce;return P(this,$)[L]===Ce&&(Se===void 0?Ke.__staleWhileFetching?P(this,$)[L]=Ke.__staleWhileFetching:this.delete(O):(q.status&&(q.status.fetchUpdated=!0),this.set(O,Se,w.options))),Se},W=Se=>(q.status&&(q.status.fetchRejected=!0,q.status.fetchError=Se),Z(Se)),Z=Se=>{let{aborted:Te}=u.signal,ke=Te&&q.allowStaleOnFetchAbort,Ne=ke||q.allowStaleOnFetchRejection,Ke=Ne||q.noDeleteOnFetchRejection,Ve=Ce;if(P(this,$)[L]===Ce&&(!Ke||Ve.__staleWhileFetching===void 0?this.delete(O):ke||(P(this,$)[L]=Ve.__staleWhileFetching)),Ne)return q.status&&Ve.__staleWhileFetching!==void 0&&(q.status.returnedStale=!0),Ve.__staleWhileFetching;if(Ve.__returned===Ve)throw Se},Ie=(Se,Te)=>{var Ne;let ke=(Ne=P(this,N))==null?void 0:Ne.call(this,O,h,w);ke&&ke instanceof Promise&&ke.then(Ke=>Se(Ke===void 0?void 0:Ke),Te),u.signal.addEventListener("abort",()=>{(!q.ignoreFetchAbort||q.allowStaleOnFetchAbort)&&(Se(void 0),q.allowStaleOnFetchAbort&&(Se=Ke=>k(Ke,!0)))})};q.status&&(q.status.fetchDispatched=!0);let Ce=new Promise(Ie).then(k,W),Oe=Object.assign(Ce,{__abortController:u,__staleWhileFetching:h,__returned:void 0});return L===void 0?(this.set(O,Oe,{...w.options,status:void 0}),L=P(this,T).get(O)):P(this,$)[L]=Oe,Oe},Fe=function(O){if(!P(this,ne))return!1;let L=O;return!!L&&L instanceof Promise&&L.hasOwnProperty("__staleWhileFetching")&&L.__abortController instanceof o},Bn=function(O,L){P(this,re)[L]=O,P(this,G)[O]=L},fr=function(O){O!==P(this,H)&&(O===P(this,S)?Ae(this,S,P(this,G)[O]):_e(this,v,Bn).call(this,P(this,re)[O],P(this,G)[O]),_e(this,v,Bn).call(this,P(this,H),O),Ae(this,H,O))},U);e.LRUCache=g}),At=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var r=class{constructor(c=0){this.iteratorType=c}equals(c){return this.o===c.o}};e.ContainerIterator=r;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var l=class extends t{};e.Container=l}),fl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=At(),t=class extends r.Base{constructor(c=[]){super(),this.S=[];let o=this;c.forEach(function(i){o.push(i)})}clear(){this.i=0,this.S=[]}push(c){return this.S.push(c),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},l=t;e.default=l}),dl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=At(),t=class extends r.Base{constructor(c=[]){super(),this.j=0,this.q=[];let o=this;c.forEach(function(i){o.push(i)})}clear(){this.q=[],this.i=this.j=0}push(c){let o=this.q.length;if(this.j/o>.5&&this.j+this.i>=o&&o>4096){let i=this.i;for(let s=0;s<i;++s)this.q[s]=this.q[this.j+s];this.j=0,this.q[this.i]=c}else this.q[this.j+this.i]=c;return++this.i}pop(){if(this.i===0)return;let c=this.q[this.j++];return this.i-=1,c}front(){if(this.i!==0)return this.q[this.j]}},l=t;e.default=l}),pl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=At(),t=class extends r.Base{constructor(c=[],o=function(s,n){return s>n?-1:s<n?1:0},i=!0){if(super(),this.v=o,Array.isArray(c))this.C=i?[...c]:c;else{this.C=[];let n=this;c.forEach(function(a){n.C.push(a)})}this.i=this.C.length;let s=this.i>>1;for(let n=this.i-1>>1;n>=0;--n)this.k(n,s)}m(c){let o=this.C[c];for(;c>0;){let i=c-1>>1,s=this.C[i];if(this.v(s,o)<=0)break;this.C[c]=s,c=i}this.C[c]=o}k(c,o){let i=this.C[c];for(;c<o;){let s=c<<1|1,n=s+1,a=this.C[s];if(n<this.i&&this.v(a,this.C[n])>0&&(s=n,a=this.C[n]),this.v(a,i)>=0)break;this.C[c]=a,c=s}this.C[c]=i}clear(){this.i=0,this.C.length=0}push(c){this.C.push(c),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let c=this.C[0],o=this.C.pop();return this.i-=1,this.i&&(this.C[0]=o,this.k(0,this.i>>1)),c}top(){return this.C[0]}find(c){return this.C.indexOf(c)>=0}remove(c){let o=this.C.indexOf(c);return o<0?!1:(o===0?this.pop():o===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(o,1,this.C.pop()),this.i-=1,this.m(o),this.k(o,this.i>>1)),!0)}updateItem(c){let o=this.C.indexOf(c);return o<0?!1:(this.m(o),this.k(o,this.i>>1),!0)}toArray(){return[...this.C]}},l=t;e.default=l}),hn=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=At(),t=class extends r.Container{},l=t;e.default=l}),It=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=r;function r(){throw new RangeError("Iterator access denied!")}}),qo=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var r=At(),t=It(),l=class extends r.ContainerIterator{constructor(c,o){super(o),this.o=c,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(c){this.container.setElementByPos(this.o,c)}};e.RandomIterator=l}),gl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=l(hn()),t=qo();function l(s){return s&&s.t?s:{default:s}}var c=class ua extends t.RandomIterator{constructor(n,a,f){super(n,f),this.container=a}copy(){return new ua(this.o,this.container,this.iteratorType)}},o=class extends r.default{constructor(s=[],n=!0){if(super(),Array.isArray(s))this.J=n?[...s]:s,this.i=s.length;else{this.J=[];let a=this;s.forEach(function(f){a.pushBack(f)})}}clear(){this.i=0,this.J.length=0}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J[s]}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J.splice(s,1),this.i-=1,this.i}eraseElementByValue(s){let n=0;for(let a=0;a<this.i;++a)this.J[a]!==s&&(this.J[n++]=this.J[a]);return this.i=this.J.length=n,this.i}eraseElementByIterator(s){let n=s.o;return s=s.next(),this.eraseElementByPos(n),s}pushBack(s){return this.J.push(s),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(s,n){if(s<0||s>this.i-1)throw new RangeError;this.J[s]=n}insert(s,n,a=1){if(s<0||s>this.i)throw new RangeError;return this.J.splice(s,0,...new Array(a).fill(n)),this.i+=a,this.i}find(s){for(let n=0;n<this.i;++n)if(this.J[n]===s)return new c(n,this);return this.end()}reverse(){this.J.reverse()}unique(){let s=1;for(let n=1;n<this.i;++n)this.J[n]!==this.J[n-1]&&(this.J[s++]=this.J[n]);return this.i=this.J.length=s,this.i}sort(s){this.J.sort(s)}forEach(s){for(let n=0;n<this.i;++n)s(this.J[n],n,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},i=o;e.default=i}),bl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=c(hn()),t=At(),l=It();function c(n){return n&&n.t?n:{default:n}}var o=class ha extends t.ContainerIterator{constructor(a,f,p,g){super(g),this.o=a,this.h=f,this.container=p,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l}set pointer(a){this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l=a}copy(){return new ha(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(n=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let a=this;n.forEach(function(f){a.pushBack(f)})}V(n){let{L:a,B:f}=n;a.B=f,f.L=a,n===this.p&&(this.p=f),n===this._&&(this._=a),this.i-=1}G(n,a){let f=a.B,p={l:n,L:a,B:f};a.B=p,f.L=p,a===this.h&&(this.p=p),f===this.h&&(this._=p),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let a=this.p;for(;n--;)a=a.B;return a.l}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let a=this.p;for(;n--;)a=a.B;return this.V(a),this.i}eraseElementByValue(n){let a=this.p;for(;a!==this.h;)a.l===n&&this.V(a),a=a.B;return this.i}eraseElementByIterator(n){let a=n.o;return a===this.h&&(0,l.throwIteratorAccessError)(),n=n.next(),this.V(a),n}pushBack(n){return this.G(n,this._),this.i}popBack(){if(this.i===0)return;let n=this._.l;return this.V(this._),n}pushFront(n){return this.G(n,this.h),this.i}popFront(){if(this.i===0)return;let n=this.p.l;return this.V(this.p),n}setElementByPos(n,a){if(n<0||n>this.i-1)throw new RangeError;let f=this.p;for(;n--;)f=f.B;f.l=a}insert(n,a,f=1){if(n<0||n>this.i)throw new RangeError;if(f<=0)return this.i;if(n===0)for(;f--;)this.pushFront(a);else if(n===this.i)for(;f--;)this.pushBack(a);else{let p=this.p;for(let b=1;b<n;++b)p=p.B;let g=p.B;for(this.i+=f;f--;)p.B={l:a,L:p},p.B.L=p,p=p.B;p.B=g,g.L=p}return this.i}find(n){let a=this.p;for(;a!==this.h;){if(a.l===n)return new o(a,this.h,this);a=a.B}return this.end()}reverse(){if(this.i<=1)return;let n=this.p,a=this._,f=0;for(;f<<1<this.i;){let p=n.l;n.l=a.l,a.l=p,n=n.B,a=a.L,f+=1}}unique(){if(this.i<=1)return this.i;let n=this.p;for(;n!==this.h;){let a=n;for(;a.B!==this.h&&a.l===a.B.l;)a=a.B,this.i-=1;n.B=a.B,n.B.L=n,n=n.B}return this.i}sort(n){if(this.i<=1)return;let a=[];this.forEach(function(p){a.push(p)}),a.sort(n);let f=this.p;a.forEach(function(p){f.l=p,f=f.B})}merge(n){let a=this;if(this.i===0)n.forEach(function(f){a.pushBack(f)});else{let f=this.p;n.forEach(function(p){for(;f!==a.h&&f.l<=p;)f=f.B;a.G(p,f.L)})}return this.i}forEach(n){let a=this.p,f=0;for(;a!==this.h;)n(a.l,f++,this),a=a.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let n=this.p;for(;n!==this.h;)yield n.l,n=n.B}).bind(this)()}},s=i;e.default=s}),ml=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=l(hn()),t=qo();function l(s){return s&&s.t?s:{default:s}}var c=class ca extends t.RandomIterator{constructor(n,a,f){super(n,f),this.container=a}copy(){return new ca(this.o,this.container,this.iteratorType)}},o=class extends r.default{constructor(s=[],n=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let a=(()=>{if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size;if(typeof s.size=="function")return s.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=n,this.P=Math.max(Math.ceil(a/this.F),1);for(let g=0;g<this.P;++g)this.A.push(new Array(this.F));let f=Math.ceil(a/this.F);this.j=this.R=(this.P>>1)-(f>>1),this.D=this.N=this.F-a%this.F>>1;let p=this;s.forEach(function(g){p.pushBack(g)})}T(){let s=[],n=Math.max(this.P>>1,1);for(let a=0;a<n;++a)s[a]=new Array(this.F);for(let a=this.j;a<this.P;++a)s[s.length]=this.A[a];for(let a=0;a<this.R;++a)s[s.length]=this.A[a];s[s.length]=[...this.A[this.R]],this.j=n,this.R=s.length-1;for(let a=0;a<n;++a)s[s.length]=new Array(this.F);this.A=s,this.P=s.length}O(s){let n=this.D+s+1,a=n%this.F,f=a-1,p=this.j+(n-a)/this.F;return a===0&&(p-=1),p%=this.P,f<0&&(f+=this.F),{curNodeBucketIndex:p,curNodePointerIndex:f}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(s){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=s,this.i}popBack(){if(this.i===0)return;let s=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,s}pushFront(s){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=s,this.i}popFront(){if(this.i===0)return;let s=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,s}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:n,curNodePointerIndex:a}=this.O(s);return this.A[n][a]}setElementByPos(s,n){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:a,curNodePointerIndex:f}=this.O(s);this.A[a][f]=n}insert(s,n,a=1){if(s<0||s>this.i)throw new RangeError;if(s===0)for(;a--;)this.pushFront(n);else if(s===this.i)for(;a--;)this.pushBack(n);else{let f=[];for(let p=s;p<this.i;++p)f.push(this.getElementByPos(p));this.cut(s-1);for(let p=0;p<a;++p)this.pushBack(n);for(let p=0;p<f.length;++p)this.pushBack(f[p])}return this.i}cut(s){if(s<0)return this.clear(),0;let{curNodeBucketIndex:n,curNodePointerIndex:a}=this.O(s);return this.R=n,this.N=a,this.i=s+1,this.i}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;if(s===0)this.popFront();else if(s===this.i-1)this.popBack();else{let n=[];for(let f=s+1;f<this.i;++f)n.push(this.getElementByPos(f));this.cut(s),this.popBack();let a=this;n.forEach(function(f){a.pushBack(f)})}return this.i}eraseElementByValue(s){if(this.i===0)return 0;let n=[];for(let f=0;f<this.i;++f){let p=this.getElementByPos(f);p!==s&&n.push(p)}let a=n.length;for(let f=0;f<a;++f)this.setElementByPos(f,n[f]);return this.cut(a-1)}eraseElementByIterator(s){let n=s.o;return this.eraseElementByPos(n),s=s.next(),s}find(s){for(let n=0;n<this.i;++n)if(this.getElementByPos(n)===s)return new c(n,this);return this.end()}reverse(){let s=0,n=this.i-1;for(;s<n;){let a=this.getElementByPos(s);this.setElementByPos(s,this.getElementByPos(n)),this.setElementByPos(n,a),s+=1,n-=1}}unique(){if(this.i<=1)return this.i;let s=1,n=this.getElementByPos(0);for(let a=1;a<this.i;++a){let f=this.getElementByPos(a);f!==n&&(n=f,this.setElementByPos(s++,f))}for(;this.i>s;)this.popBack();return this.i}sort(s){let n=[];for(let a=0;a<this.i;++a)n.push(this.getElementByPos(a));n.sort(s);for(let a=0;a<this.i;++a)this.setElementByPos(a,n[a])}shrinkToFit(){if(this.i===0)return;let s=[];this.forEach(function(n){s.push(n)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let n=0;n<this.P;++n)this.A.push(new Array(this.F));for(let n=0;n<s.length;++n)this.pushBack(s[n])}forEach(s){for(let n=0;n<this.i;++n)s(this.getElementByPos(n),n,this)}[Symbol.iterator](){return(function*(){for(let s=0;s<this.i;++s)yield this.getElementByPos(s)}).bind(this)()}},i=o;e.default=i}),yl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var r=class{constructor(l,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=c}L(){let l=this;if(l.ee===1&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let c=l.tt;for(;c.U===l;)l=c,c=l.tt;l=c}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}else{let c=l.tt;for(;c.W===l;)l=c,c=l.tt;return l.W!==c?c:l}}te(){let l=this.tt,c=this.W,o=c.U;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.U=this,this.tt=c,this.W=o,o&&(o.tt=this),c}se(){let l=this.tt,c=this.U,o=c.W;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.W=this,this.tt=c,this.U=o,o&&(o.tt=this),c}};e.TreeNode=r;var t=class extends r{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),Vo=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=yl(),t=At(),l=It(),c=class extends t.Container{constructor(i=function(n,a){return n<a?-1:n>a?1:0},s=!1){super(),this.Y=void 0,this.v=i,s?(this.re=r.TreeNodeEnableIndex,this.M=function(n,a,f){let p=this.ne(n,a,f);if(p){let g=p.tt;for(;g!==this.h;)g.rt+=1,g=g.tt;let b=this.he(p);if(b){let{parentNode:m,grandParent:y,curNode:I}=b;m.ie(),y.ie(),I.ie()}}return this.i},this.V=function(n){let a=this.fe(n);for(;a!==this.h;)a.rt-=1,a=a.tt}):(this.re=r.TreeNode,this.M=function(n,a,f){let p=this.ne(n,a,f);return p&&this.he(p),this.i},this.V=this.fe),this.h=new this.re}X(i,s){let n=this.h;for(;i;){let a=this.v(i.u,s);if(a<0)i=i.W;else if(a>0)n=i,i=i.U;else return i}return n}Z(i,s){let n=this.h;for(;i;)this.v(i.u,s)<=0?i=i.W:(n=i,i=i.U);return n}$(i,s){let n=this.h;for(;i;){let a=this.v(i.u,s);if(a<0)n=i,i=i.W;else if(a>0)i=i.U;else return i}return n}rr(i,s){let n=this.h;for(;i;)this.v(i.u,s)<0?(n=i,i=i.W):i=i.U;return n}ue(i){for(;;){let s=i.tt;if(s===this.h)return;if(i.ee===1){i.ee=0;return}if(i===s.U){let n=s.W;if(n.ee===1)n.ee=0,s.ee=1,s===this.Y?this.Y=s.te():s.te();else if(n.W&&n.W.ee===1){n.ee=s.ee,s.ee=0,n.W.ee=0,s===this.Y?this.Y=s.te():s.te();return}else n.U&&n.U.ee===1?(n.ee=1,n.U.ee=0,n.se()):(n.ee=1,i=s)}else{let n=s.U;if(n.ee===1)n.ee=0,s.ee=1,s===this.Y?this.Y=s.se():s.se();else if(n.U&&n.U.ee===1){n.ee=s.ee,s.ee=0,n.U.ee=0,s===this.Y?this.Y=s.se():s.se();return}else n.W&&n.W.ee===1?(n.ee=1,n.W.ee=0,n.te()):(n.ee=1,i=s)}}}fe(i){if(this.i===1)return this.clear(),this.h;let s=i;for(;s.U||s.W;){if(s.W)for(s=s.W;s.U;)s=s.U;else s=s.U;[i.u,s.u]=[s.u,i.u],[i.l,s.l]=[s.l,i.l],i=s}this.h.U===s?this.h.U=s.tt:this.h.W===s&&(this.h.W=s.tt),this.ue(s);let n=s.tt;return s===n.U?n.U=void 0:n.W=void 0,this.i-=1,this.Y.ee=0,n}oe(i,s){return i===void 0?!1:this.oe(i.U,s)||s(i)?!0:this.oe(i.W,s)}he(i){for(;;){let s=i.tt;if(s.ee===0)return;let n=s.tt;if(s===n.U){let a=n.W;if(a&&a.ee===1){if(a.ee=s.ee=0,n===this.Y)return;n.ee=1,i=n;continue}else if(i===s.W){if(i.ee=0,i.U&&(i.U.tt=s),i.W&&(i.W.tt=n),s.W=i.U,n.U=i.W,i.U=s,i.W=n,n===this.Y)this.Y=i,this.h.tt=i;else{let f=n.tt;f.U===n?f.U=i:f.W=i}return i.tt=n.tt,s.tt=i,n.tt=i,n.ee=1,{parentNode:s,grandParent:n,curNode:i}}else s.ee=0,n===this.Y?this.Y=n.se():n.se(),n.ee=1}else{let a=n.U;if(a&&a.ee===1){if(a.ee=s.ee=0,n===this.Y)return;n.ee=1,i=n;continue}else if(i===s.U){if(i.ee=0,i.U&&(i.U.tt=n),i.W&&(i.W.tt=s),n.W=i.U,s.U=i.W,i.U=n,i.W=s,n===this.Y)this.Y=i,this.h.tt=i;else{let f=n.tt;f.U===n?f.U=i:f.W=i}return i.tt=n.tt,s.tt=i,n.tt=i,n.ee=1,{parentNode:s,grandParent:n,curNode:i}}else s.ee=0,n===this.Y?this.Y=n.te():n.te(),n.ee=1}return}}ne(i,s,n){if(this.Y===void 0){this.i+=1,this.Y=new this.re(i,s),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let a,f=this.h.U,p=this.v(f.u,i);if(p===0){f.l=s;return}else if(p>0)f.U=new this.re(i,s),f.U.tt=f,a=f.U,this.h.U=a;else{let g=this.h.W,b=this.v(g.u,i);if(b===0){g.l=s;return}else if(b<0)g.W=new this.re(i,s),g.W.tt=g,a=g.W,this.h.W=a;else{if(n!==void 0){let m=n.o;if(m!==this.h){let y=this.v(m.u,i);if(y===0){m.l=s;return}else if(y>0){let I=m.L(),x=this.v(I.u,i);if(x===0){I.l=s;return}else x<0&&(a=new this.re(i,s),I.W===void 0?(I.W=a,a.tt=I):(m.U=a,a.tt=m))}}}if(a===void 0)for(a=this.Y;;){let m=this.v(a.u,i);if(m>0){if(a.U===void 0){a.U=new this.re(i,s),a.U.tt=a,a=a.U;break}a=a.U}else if(m<0){if(a.W===void 0){a.W=new this.re(i,s),a.W.tt=a,a=a.W;break}a=a.W}else{a.l=s;return}}}}return this.i+=1,a}I(i,s){for(;i;){let n=this.v(i.u,s);if(n<0)i=i.W;else if(n>0)i=i.U;else return i}return i||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(i,s){let n=i.o;if(n===this.h&&(0,l.throwIteratorAccessError)(),this.i===1)return n.u=s,!0;if(n===this.h.U)return this.v(n.B().u,s)>0?(n.u=s,!0):!1;if(n===this.h.W)return this.v(n.L().u,s)<0?(n.u=s,!0):!1;let a=n.L().u;if(this.v(a,s)>=0)return!1;let f=n.B().u;return this.v(f,s)<=0?!1:(n.u=s,!0)}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=0,n=this;return this.oe(this.Y,function(a){return i===s?(n.V(a),!0):(s+=1,!1)}),this.i}eraseElementByKey(i){if(this.i===0)return!1;let s=this.I(this.Y,i);return s===this.h?!1:(this.V(s),!0)}eraseElementByIterator(i){let s=i.o;s===this.h&&(0,l.throwIteratorAccessError)();let n=s.W===void 0;return i.iteratorType===0?n&&i.next():(!n||s.U===void 0)&&i.next(),this.V(s),i}forEach(i){let s=0;for(let n of this)i(n,s++,this)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s,n=0;for(let a of this){if(n===i){s=a;break}n+=1}return s}getHeight(){if(this.i===0)return 0;let i=function(s){return s?Math.max(i(s.U),i(s.W))+1:0};return i(this.Y)}},o=c;e.default=o}),Ho=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=At(),t=It(),l=class extends r.ContainerIterator{constructor(o,i,s){super(s),this.o=o,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let o=this.o,i=this.h.tt;if(o===this.h)return i?i.rt-1:0;let s=0;for(o.U&&(s+=o.U.rt);o!==i;){let n=o.tt;o===n.W&&(s+=1,n.U&&(s+=n.U.rt)),o=n}return s}},c=l;e.default=c}),wl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=c(Vo()),t=c(Ho()),l=It();function c(n){return n&&n.t?n:{default:n}}var o=class fa extends t.default{constructor(a,f,p,g){super(a,f,g),this.container=p}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.u}copy(){return new fa(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(n=[],a,f){super(a,f);let p=this;n.forEach(function(g){p.insert(g)})}*K(n){n!==void 0&&(yield*this.K(n.U),yield n.u,yield*this.K(n.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(n,a){return this.M(n,void 0,a)}find(n){let a=this.I(this.Y,n);return new o(a,this.h,this)}lowerBound(n){let a=this.X(this.Y,n);return new o(a,this.h,this)}upperBound(n){let a=this.Z(this.Y,n);return new o(a,this.h,this)}reverseLowerBound(n){let a=this.$(this.Y,n);return new o(a,this.h,this)}reverseUpperBound(n){let a=this.rr(this.Y,n);return new o(a,this.h,this)}union(n){let a=this;return n.forEach(function(f){a.insert(f)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),vl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=c(Vo()),t=c(Ho()),l=It();function c(n){return n&&n.t?n:{default:n}}var o=class da extends t.default{constructor(a,f,p,g){super(a,f,g),this.container=p}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let a=this;return new Proxy([],{get(f,p){if(p==="0")return a.o.u;if(p==="1")return a.o.l},set(f,p,g){if(p!=="1")throw new TypeError("props must be 1");return a.o.l=g,!0}})}copy(){return new da(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(n=[],a,f){super(a,f);let p=this;n.forEach(function(g){p.setElement(g[0],g[1])})}*K(n){n!==void 0&&(yield*this.K(n.U),yield[n.u,n.l],yield*this.K(n.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i===0)return;let n=this.h.U;return[n.u,n.l]}back(){if(this.i===0)return;let n=this.h.W;return[n.u,n.l]}lowerBound(n){let a=this.X(this.Y,n);return new o(a,this.h,this)}upperBound(n){let a=this.Z(this.Y,n);return new o(a,this.h,this)}reverseLowerBound(n){let a=this.$(this.Y,n);return new o(a,this.h,this)}reverseUpperBound(n){let a=this.rr(this.Y,n);return new o(a,this.h,this)}setElement(n,a,f){return this.M(n,a,f)}find(n){let a=this.I(this.Y,n);return new o(a,this.h,this)}getElementByKey(n){return this.I(this.Y,n).l}union(n){let a=this;return n.forEach(function(f){a.setElement(f[0],f[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),zo=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=r;function r(t){let l=typeof t;return l==="object"&&t!==null||l==="function"}}),Ko=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var r=At(),t=c(zo()),l=It();function c(s){return s&&s.t?s:{default:s}}var o=class extends r.ContainerIterator{constructor(s,n,a){super(a),this.o=s,this.h=n,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=o;var i=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(s){let{L:n,B:a}=s;n.B=a,a.L=n,s===this.p&&(this.p=a),s===this._&&(this._=n),this.i-=1}M(s,n,a){a===void 0&&(a=(0,t.default)(s));let f;if(a){let p=s[this.HASH_TAG];if(p!==void 0)return this.H[p].l=n,this.i;Object.defineProperty(s,this.HASH_TAG,{value:this.H.length,configurable:!0}),f={u:s,l:n,L:this._,B:this.h},this.H.push(f)}else{let p=this.g[s];if(p)return p.l=n,this.i;f={u:s,l:n,L:this._,B:this.h},this.g[s]=f}return this.i===0?(this.p=f,this.h.B=f):this._.B=f,this._=f,this.h.L=f,++this.i}I(s,n){if(n===void 0&&(n=(0,t.default)(s)),n){let a=s[this.HASH_TAG];return a===void 0?this.h:this.H[a]}else return this.g[s]||this.h}clear(){let s=this.HASH_TAG;this.H.forEach(function(n){delete n.u[s]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(s,n){let a;if(n===void 0&&(n=(0,t.default)(s)),n){let f=s[this.HASH_TAG];if(f===void 0)return!1;delete s[this.HASH_TAG],a=this.H[f],delete this.H[f]}else{if(a=this.g[s],a===void 0)return!1;delete this.g[s]}return this.V(a),!0}eraseElementByIterator(s){let n=s.o;return n===this.h&&(0,l.throwIteratorAccessError)(),this.V(n),s.next()}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let n=this.p;for(;s--;)n=n.B;return this.V(n),this.i}};e.HashContainer=i}),_l=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Ko(),t=It(),l=class pa extends r.HashContainerIterator{constructor(s,n,a,f){super(s,n,f),this.container=a}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new pa(this.o,this.h,this.container,this.iteratorType)}},c=class extends r.HashContainer{constructor(i=[]){super();let s=this;i.forEach(function(n){s.insert(n)})}begin(){return new l(this.p,this.h,this)}end(){return new l(this.h,this.h,this)}rBegin(){return new l(this._,this.h,this,1)}rEnd(){return new l(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(i,s){return this.M(i,void 0,s)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=this.p;for(;i--;)s=s.B;return s.u}find(i,s){let n=this.I(i,s);return new l(n,this.h,this)}forEach(i){let s=0,n=this.p;for(;n!==this.h;)i(n.u,s++,this),n=n.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield i.u,i=i.B}).bind(this)()}},o=c;e.default=o}),El=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=Ko(),t=c(zo()),l=It();function c(n){return n&&n.t?n:{default:n}}var o=class ga extends r.HashContainerIterator{constructor(a,f,p,g){super(a,f,g),this.container=p}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let a=this;return new Proxy([],{get(f,p){if(p==="0")return a.o.u;if(p==="1")return a.o.l},set(f,p,g){if(p!=="1")throw new TypeError("props must be 1");return a.o.l=g,!0}})}copy(){return new ga(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.HashContainer{constructor(n=[]){super();let a=this;n.forEach(function(f){a.setElement(f[0],f[1])})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(n,a,f){return this.M(n,a,f)}getElementByKey(n,a){if(a===void 0&&(a=(0,t.default)(n)),a){let p=n[this.HASH_TAG];return p!==void 0?this.H[p].l:void 0}let f=this.g[n];return f?f.l:void 0}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let a=this.p;for(;n--;)a=a.B;return[a.u,a.l]}find(n,a){let f=this.I(n,a);return new o(f,this.h,this)}forEach(n){let a=0,f=this.p;for(;f!==this.h;)n([f.u,f.l],a++,this),f=f.B}[Symbol.iterator](){return(function*(){let n=this.p;for(;n!==this.h;)yield[n.u,n.l],n=n.B}).bind(this)()}},s=i;e.default=s}),Sl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return c.default}});var r=p(fl()),t=p(dl()),l=p(pl()),c=p(gl()),o=p(bl()),i=p(ml()),s=p(wl()),n=p(vl()),a=p(_l()),f=p(El());function p(g){return g&&g.t?g:{default:g}}}),Al=be((e,r)=>{le(),ae(),se();var t=Sl().OrderedSet,l=St()("number-allocator:trace"),c=St()("number-allocator:error");function o(s,n){this.low=s,this.high=n}o.prototype.equals=function(s){return this.low===s.low&&this.high===s.high},o.prototype.compare=function(s){return this.low<s.low&&this.high<s.low?-1:s.low<this.low&&s.high<this.low?1:0};function i(s,n){if(!(this instanceof i))return new i(s,n);this.min=s,this.max=n,this.ss=new t([],(a,f)=>a.compare(f)),l("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return l("alloc():empty"),null;let s=this.ss.begin(),n=s.pointer.low,a=s.pointer.high,f=n;return f+1<=a?this.ss.updateKeyByIterator(s,new o(n+1,a)):this.ss.eraseElementByPos(0),l("alloc():"+f),f},i.prototype.use=function(s){let n=new o(s,s),a=this.ss.lowerBound(n);if(!a.equals(this.ss.end())){let f=a.pointer.low,p=a.pointer.high;return a.pointer.equals(n)?(this.ss.eraseElementByIterator(a),l("use():"+s),!0):f>s?!1:f===s?(this.ss.updateKeyByIterator(a,new o(f+1,p)),l("use():"+s),!0):p===s?(this.ss.updateKeyByIterator(a,new o(f,p-1)),l("use():"+s),!0):(this.ss.updateKeyByIterator(a,new o(s+1,p)),this.ss.insert(new o(f,s-1)),l("use():"+s),!0)}return l("use():failed"),!1},i.prototype.free=function(s){if(s<this.min||s>this.max){c("free():"+s+" is out of range");return}let n=new o(s,s),a=this.ss.upperBound(n);if(a.equals(this.ss.end())){if(a.equals(this.ss.begin())){this.ss.insert(n);return}a.pre();let f=a.pointer.high;a.pointer.high+1===s?this.ss.updateKeyByIterator(a,new o(f,s)):this.ss.insert(n)}else if(a.equals(this.ss.begin()))if(s+1===a.pointer.low){let f=a.pointer.high;this.ss.updateKeyByIterator(a,new o(s,f))}else this.ss.insert(n);else{let f=a.pointer.low,p=a.pointer.high;a.pre();let g=a.pointer.low;a.pointer.high+1===s?s+1===f?(this.ss.eraseElementByIterator(a),this.ss.updateKeyByIterator(a,new o(g,p))):this.ss.updateKeyByIterator(a,new o(g,s)):s+1===f?(this.ss.eraseElementByIterator(a.next()),this.ss.insert(new o(s,p))):this.ss.insert(n)}l("free():"+s)},i.prototype.clear=function(){l("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(let s of this.ss)console.log(s)},r.exports=i}),Qo=be((e,r)=>{le(),ae(),se();var t=Al();r.exports.NumberAllocator=t}),Il=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=cl(),t=Qo(),l=class{constructor(c){c>0&&(this.aliasToTopic=new r.LRUCache({max:c}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,c),this.max=c,this.length=0)}put(c,o){if(o===0||o>this.max)return!1;let i=this.aliasToTopic.get(o);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(o,c),this.topicToAlias[c]=o,this.numberAllocator.use(o),this.length=this.aliasToTopic.size,!0}getTopicByAlias(c){return this.aliasToTopic.get(c)}getAliasByTopic(c){let o=this.topicToAlias[c];return typeof o<"u"&&this.aliasToTopic.get(o),o}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=l}),kl=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=Ar(),l=r(Il()),c=ur(),o=(i,s)=>{i.log("_handleConnack");let{options:n}=i,a=n.protocolVersion===5?s.reasonCode:s.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,s.properties){if(s.properties.topicAliasMaximum){if(s.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}s.properties.topicAliasMaximum>0&&(i.topicAliasSend=new l.default(s.properties.topicAliasMaximum))}s.properties.serverKeepAlive&&n.keepalive&&(n.keepalive=s.properties.serverKeepAlive),s.properties.maximumPacketSize&&(n.properties||(n.properties={}),n.properties.maximumPacketSize=s.properties.maximumPacketSize)}if(a===0)i.reconnecting=!1,i._onConnect(s);else if(a>0){let f=new c.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[a]}`,a);i.emit("error",f)}};e.default=o}),Tl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=(t,l,c)=>{t.log("handling pubrel packet");let o=typeof c<"u"?c:t.noop,{messageId:i}=l,s={cmd:"pubcomp",messageId:i};t.incomingStore.get(l,(n,a)=>{n?t._sendPacket(s,o):(t.emit("message",a.topic,a.payload,a),t.handleMessage(a,f=>{if(f)return o(f);t.incomingStore.del(a,t.noop),t._sendPacket(s,o)}))})};e.default=r}),Cl=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(ll()),l=r(hl()),c=r(kl()),o=r(Ar()),i=r(Tl()),s=(n,a,f)=>{let{options:p}=n;if(p.protocolVersion===5&&p.properties&&p.properties.maximumPacketSize&&p.properties.maximumPacketSize<a.length)return n.emit("error",new Error(`exceeding packets size ${a.cmd}`)),n.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),n;switch(n.log("_handlePacket :: emitting packetreceive"),n.emit("packetreceive",a),a.cmd){case"publish":(0,t.default)(n,a,f);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":n.reschedulePing(),(0,o.default)(n,a),f();break;case"pubrel":n.reschedulePing(),(0,i.default)(n,a,f);break;case"connack":(0,c.default)(n,a),f();break;case"auth":n.reschedulePing(),(0,l.default)(n,a),f();break;case"pingresp":n.log("_handlePacket :: received pingresp"),n.reschedulePing(),f();break;case"disconnect":n.emit("disconnect",a),f();break;default:n.log("_handlePacket :: unknown command"),f();break}};e.default=s}),Ol=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=r((er(),Le(Dt))),l=ur(),c=class{};e.TypedEventEmitter=c,(0,l.applyMixin)(c,t.default)}),Ir=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var r=()=>{var o;return typeof window<"u"?typeof et<"u"&&((o=et.userAgent)===null||o===void 0?void 0:o.toLowerCase().indexOf(" electron/"))>-1&&Be!=null&&Be.versions?!Object.prototype.hasOwnProperty.call(Be.versions,"electron"):typeof window.document<"u":!1},t=()=>{var o,i;return!!(typeof self=="object"&&!((i=(o=self==null?void 0:self.constructor)===null||o===void 0?void 0:o.name)===null||i===void 0)&&i.includes("WorkerGlobalScope"))},l=()=>typeof et<"u"&&et.product==="ReactNative",c=r()||t()||l();e.isWebWorker=t(),e.isReactNativeBrowser=l(),e.default=c}),Rl=be((e,r)=>{le(),ae(),se(),function(t,l){typeof e=="object"&&typeof r<"u"?l(e):typeof define=="function"&&define.amd?define(["exports"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.fastUniqueNumbers={}))}(e,function(t){var l=function(b){return function(m){var y=b(m);return m.add(y),y}},c=function(b){return function(m,y){return b.set(m,y),y}},o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,s=i*2,n=function(b,m){return function(y){var I=m.get(y),x=I===void 0?y.size:I<s?I+1:0;if(!y.has(x))return b(y,x);if(y.size<i){for(;y.has(x);)x=Math.floor(Math.random()*s);return b(y,x)}if(y.size>o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(x);)x=Math.floor(Math.random()*o);return b(y,x)}},a=new WeakMap,f=c(a),p=n(f,a),g=l(p);t.addUniqueNumber=g,t.generateUniqueNumber=p})}),Pl=be((e,r)=>{le(),ae(),se(),function(t,l){typeof e=="object"&&typeof r<"u"?l(e,Rl()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,l){var c=function(s){return s.method!==void 0&&s.method==="call"},o=function(s){return s.error===null&&typeof s.id=="number"},i=function(s){var n=new Map([[0,function(){}]]),a=new Map([[0,function(){}]]),f=new Map,p=new Worker(s);p.addEventListener("message",function(I){var x=I.data;if(c(x)){var _=x.params,A=_.timerId,N=_.timerType;if(N==="interval"){var D=n.get(A);if(typeof D=="number"){var C=f.get(D);if(C===void 0||C.timerId!==A||C.timerType!==N)throw new Error("The timer is in an undefined state.")}else if(typeof D<"u")D();else throw new Error("The timer is in an undefined state.")}else if(N==="timeout"){var T=a.get(A);if(typeof T=="number"){var M=f.get(T);if(M===void 0||M.timerId!==A||M.timerType!==N)throw new Error("The timer is in an undefined state.")}else if(typeof T<"u")T(),a.delete(A);else throw new Error("The timer is in an undefined state.")}}else if(o(x)){var $=x.id,G=f.get($);if(G===void 0)throw new Error("The timer is in an undefined state.");var re=G.timerId,S=G.timerType;f.delete($),S==="interval"?n.delete(re):a.delete(re)}else{var H=x.error.message;throw new Error(H)}});var g=function(I){var x=l.generateUniqueNumber(f);f.set(x,{timerId:I,timerType:"interval"}),n.set(I,x),p.postMessage({id:x,method:"clear",params:{timerId:I,timerType:"interval"}})},b=function(I){var x=l.generateUniqueNumber(f);f.set(x,{timerId:I,timerType:"timeout"}),a.set(I,x),p.postMessage({id:x,method:"clear",params:{timerId:I,timerType:"timeout"}})},m=function(I){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=l.generateUniqueNumber(n);return n.set(_,function(){I(),typeof n.get(_)=="function"&&p.postMessage({id:null,method:"set",params:{delay:x,now:performance.now(),timerId:_,timerType:"interval"}})}),p.postMessage({id:null,method:"set",params:{delay:x,now:performance.now(),timerId:_,timerType:"interval"}}),_},y=function(I){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=l.generateUniqueNumber(a);return a.set(_,I),p.postMessage({id:null,method:"set",params:{delay:x,now:performance.now(),timerId:_,timerType:"timeout"}}),_};return{clearInterval:g,clearTimeout:b,setInterval:m,setTimeout:y}};t.load=i})}),Bl=be((e,r)=>{le(),ae(),se(),function(t,l){typeof e=="object"&&typeof r<"u"?l(e,Pl()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.workerTimers={},t.workerTimersBroker))}(e,function(t,l){var c=function(p,g){var b=null;return function(){if(b!==null)return b;var m=new Blob([g],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(m);return b=p(y),setTimeout(function(){return URL.revokeObjectURL(y)}),b}},o=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=c(l.load,o),s=function(p){return i().clearInterval(p)},n=function(p){return i().clearTimeout(p)},a=function(){var p;return(p=i()).setInterval.apply(p,arguments)},f=function(){var p;return(p=i()).setTimeout.apply(p,arguments)};t.clearInterval=s,t.clearTimeout=n,t.setInterval=a,t.setTimeout=f})}),Ml=be(e=>{le(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(a,f,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(f,p);(!b||("get"in b?!f.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return f[p]}}),Object.defineProperty(a,g,b)}:function(a,f,p,g){g===void 0&&(g=p),a[g]=f[p]}),t=e&&e.__setModuleDefault||(Object.create?function(a,f){Object.defineProperty(a,"default",{enumerable:!0,value:f})}:function(a,f){a.default=f}),l=e&&e.__importStar||function(a){if(a&&a.__esModule)return a;var f={};if(a!=null)for(var p in a)p!=="default"&&Object.prototype.hasOwnProperty.call(a,p)&&r(f,a,p);return t(f,a),f};Object.defineProperty(e,"__esModule",{value:!0});var c=l(Ir()),o=Bl(),i={set:o.setInterval,clear:o.clearInterval},s={set:(a,f)=>setInterval(a,f),clear:a=>clearInterval(a)},n=a=>{switch(a){case"native":return s;case"worker":return i;case"auto":default:return c.default&&!c.isWebWorker&&!c.isReactNativeBrowser?i:s}};e.default=n}),Yo=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(Ml()),l=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(c,o){this.destroyed=!1,this.client=c,this.timer=(0,t.default)(o),this.setKeepalive(c.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(c){if(c*=1e3,isNaN(c)||c<=0||c>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${c}`);this._keepalive=c,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${c}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let c=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+c,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=l}),cn=be(e=>{le(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(D,C,T,M){M===void 0&&(M=T);var $=Object.getOwnPropertyDescriptor(C,T);(!$||("get"in $?!C.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return C[T]}}),Object.defineProperty(D,M,$)}:function(D,C,T,M){M===void 0&&(M=T),D[M]=C[T]}),t=e&&e.__setModuleDefault||(Object.create?function(D,C){Object.defineProperty(D,"default",{enumerable:!0,value:C})}:function(D,C){D.default=C}),l=e&&e.__importStar||function(D){if(D&&D.__esModule)return D;var C={};if(D!=null)for(var T in D)T!=="default"&&Object.prototype.hasOwnProperty.call(D,T)&&r(C,D,T);return t(C,D),C},c=e&&e.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(e,"__esModule",{value:!0});var o=c(Ea()),i=c(nl()),s=c(Wo()),n=Vt(),a=c(sl()),f=l(al()),p=c(St()),g=c($o()),b=c(Cl()),m=ur(),y=Ol(),I=c(Yo()),x=l(Ir()),_=globalThis.setImmediate||((...D)=>{let C=D.shift();(0,m.nextTick)(()=>{C(...D)})}),A={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},N=class Mn extends y.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(C,T){super(),this.options=T||{};for(let M in A)typeof this.options[M]>"u"?this.options[M]=A[M]:this.options[M]=T[M];this.log=this.options.log||(0,p.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Mn.VERSION),x.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",x.default?"browser":"node"),this.log("MqttClient :: options.protocol",T.protocol),this.log("MqttClient :: options.protocolVersion",T.protocolVersion),this.log("MqttClient :: options.username",T.username),this.log("MqttClient :: options.keepalive",T.keepalive),this.log("MqttClient :: options.reconnectPeriod",T.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",T.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",T.properties?T.properties.topicAliasMaximum:void 0),this.options.clientId=typeof T.clientId=="string"?T.clientId:Mn.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=T.protocolVersion===5&&T.customHandleAcks?T.customHandleAcks:(...M)=>{M[3](null,0)},this.options.writeCache||(i.default.writeToStream.cacheNumbers=!1),this.streamBuilder=C,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new s.default:this.options.messageIdProvider,this.outgoingStore=T.outgoingStore||new g.default,this.incomingStore=T.incomingStore||new g.default,this.queueQoSZero=T.queueQoSZero===void 0?!0:T.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,T.properties&&T.properties.topicAliasMaximum>0&&(T.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new o.default(T.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:M}=this,$=()=>{let G=M.shift();this.log("deliver :: entry %o",G);let re=null;if(!G){this._resubscribe();return}re=G.packet,this.log("deliver :: call _sendPacket for %o",re);let S=!0;re.messageId&&re.messageId!==0&&(this.messageIdProvider.register(re.messageId)||(S=!1)),S?this._sendPacket(re,H=>{G.cb&&G.cb(H),$()}):(this.log("messageId: %d has already used. The message is skipped and removed.",re.messageId),$())};this.log("connect :: sending queued packets"),$()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(C,T){T()}handleMessage(C,T){T()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var C;let T=new n.Writable,M=i.default.parser(this.options),$=null,G=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),M.on("packet",Q=>{this.log("parser :: on packet push to packets array."),G.push(Q)});let re=()=>{this.log("work :: getting next packet in queue");let Q=G.shift();if(Q)this.log("work :: packet pulled from queue"),(0,b.default)(this,Q,S);else{this.log("work :: no packets in queue");let ge=$;$=null,this.log("work :: done flag is %s",!!ge),ge&&ge()}},S=()=>{if(G.length)(0,m.nextTick)(re);else{let Q=$;$=null,Q()}};T._write=(Q,ge,oe)=>{$=oe,this.log("writable stream :: parsing buffer"),M.parse(Q),re()};let H=Q=>{this.log("streamErrorHandler :: error",Q.message),Q.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",Q)):this.noop(Q)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(T),this.stream.on("error",H),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let te={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(te.will=Object.assign(Object.assign({},this.options.will),{payload:(C=this.options.will)===null||C===void 0?void 0:C.payload})),this.topicAliasRecv&&(te.properties||(te.properties={}),this.topicAliasRecv&&(te.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(te),M.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let Q=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(Q)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(C,T,M,$){this.log("publish :: message `%s` to topic `%s`",T,C);let{options:G}=this;typeof M=="function"&&($=M,M=null),M=M||{},M=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),M);let{qos:re,retain:S,dup:H,properties:te,cbStorePut:Q}=M;if(this._checkDisconnecting($))return this;let ge=()=>{let oe=0;if((re===1||re===2)&&(oe=this._nextId(),oe===null))return this.log("No messageId left"),!1;let V={cmd:"publish",topic:C,payload:T,qos:re,retain:S,messageId:oe,dup:H};switch(G.protocolVersion===5&&(V.properties=te),this.log("publish :: qos",re),re){case 1:case 2:this.outgoing[V.messageId]={volatile:!1,cb:$||this.noop},this.log("MqttClient:publish: packet cmd: %s",V.cmd),this._sendPacket(V,void 0,Q);break;default:this.log("MqttClient:publish: packet cmd: %s",V.cmd),this._sendPacket(V,$,Q);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ge())&&this._storeProcessingQueue.push({invoke:ge,cbStorePut:M.cbStorePut,callback:$}),this}publishAsync(C,T,M){return new Promise(($,G)=>{this.publish(C,T,M,(re,S)=>{re?G(re):$(S)})})}subscribe(C,T,M){let $=this.options.protocolVersion;typeof T=="function"&&(M=T),M=M||this.noop;let G=!1,re=[];typeof C=="string"?(C=[C],re=C):Array.isArray(C)?re=C:typeof C=="object"&&(G=C.resubscribe,delete C.resubscribe,re=Object.keys(C));let S=f.validateTopics(re);if(S!==null)return _(M,new Error(`Invalid topic ${S}`)),this;if(this._checkDisconnecting(M))return this.log("subscribe: discconecting true"),this;let H={qos:0};$===5&&(H.nl=!1,H.rap=!1,H.rh=0),T=Object.assign(Object.assign({},H),T);let te=T.properties,Q=[],ge=(V,me)=>{if(me=me||T,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,V)||this._resubscribeTopics[V].qos<me.qos||G){let ne={topic:V,qos:me.qos};$===5&&(ne.nl=me.nl,ne.rap=me.rap,ne.rh=me.rh,ne.properties=te),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",ne.topic,ne.qos),Q.push(ne)}};if(Array.isArray(C)?C.forEach(V=>{this.log("subscribe: array topic %s",V),ge(V)}):Object.keys(C).forEach(V=>{this.log("subscribe: object topic %s, %o",V,C[V]),ge(V,C[V])}),!Q.length)return M(null,[]),this;let oe=()=>{let V=this._nextId();if(V===null)return this.log("No messageId left"),!1;let me={cmd:"subscribe",subscriptions:Q,messageId:V};if(te&&(me.properties=te),this.options.resubscribe){this.log("subscribe :: resubscribe true");let ne=[];Q.forEach(we=>{if(this.options.reconnectPeriod>0){let v={qos:we.qos};$===5&&(v.nl=we.nl||!1,v.rap=we.rap||!1,v.rh=we.rh||0,v.properties=we.properties),this._resubscribeTopics[we.topic]=v,ne.push(we.topic)}}),this.messageIdToTopic[me.messageId]=ne}return this.outgoing[me.messageId]={volatile:!0,cb(ne,we){if(!ne){let{granted:v}=we;for(let Y=0;Y<v.length;Y+=1)Q[Y].qos=v[Y]}M(ne,Q)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(me),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!oe())&&this._storeProcessingQueue.push({invoke:oe,callback:M}),this}subscribeAsync(C,T){return new Promise((M,$)=>{this.subscribe(C,T,(G,re)=>{G?$(G):M(re)})})}unsubscribe(C,T,M){typeof C=="string"&&(C=[C]),typeof T=="function"&&(M=T),M=M||this.noop;let $=f.validateTopics(C);if($!==null)return _(M,new Error(`Invalid topic ${$}`)),this;if(this._checkDisconnecting(M))return this;let G=()=>{let re=this._nextId();if(re===null)return this.log("No messageId left"),!1;let S={cmd:"unsubscribe",messageId:re,unsubscriptions:[]};return typeof C=="string"?S.unsubscriptions=[C]:Array.isArray(C)&&(S.unsubscriptions=C),this.options.resubscribe&&S.unsubscriptions.forEach(H=>{delete this._resubscribeTopics[H]}),typeof T=="object"&&T.properties&&(S.properties=T.properties),this.outgoing[S.messageId]={volatile:!0,cb:M},this.log("unsubscribe: call _sendPacket"),this._sendPacket(S),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!G())&&this._storeProcessingQueue.push({invoke:G,callback:M}),this}unsubscribeAsync(C,T){return new Promise((M,$)=>{this.unsubscribe(C,T,(G,re)=>{G?$(G):M(re)})})}end(C,T,M){this.log("end :: (%s)",this.options.clientId),(C==null||typeof C!="boolean")&&(M=M||T,T=C,C=!1),typeof T!="object"&&(M=M||T,T=null),this.log("end :: cb? %s",!!M),(!M||typeof M!="function")&&(M=this.noop);let $=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(re=>{this.outgoingStore.close(S=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),M){let H=re||S;this.log("end :: closeStores: invoking callback with args"),M(H)}})}),this._deferredReconnect&&this._deferredReconnect()},G=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,C),this._cleanUp(C,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,m.nextTick)($)},T)};return this.disconnecting?(M(),this):(this._clearReconnect(),this.disconnecting=!0,!C&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,G,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),G()),this)}endAsync(C,T){return new Promise((M,$)=>{this.end(C,T,G=>{G?$(G):M()})})}removeOutgoingMessage(C){if(this.outgoing[C]){let{cb:T}=this.outgoing[C];this._removeOutgoingAndStoreMessage(C,()=>{T(new Error("Message removed"))})}return this}reconnect(C){this.log("client reconnect");let T=()=>{C?(this.options.incomingStore=C.incomingStore,this.options.outgoingStore=C.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new g.default,this.outgoingStore=this.options.outgoingStore||new g.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=T:T(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(C=>{this.outgoing[C].volatile&&typeof this.outgoing[C].cb=="function"&&(this.outgoing[C].cb(new Error("Connection closed")),delete this.outgoing[C])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(C=>{typeof this.outgoing[C].cb=="function"&&(this.outgoing[C].cb(new Error("Connection closed")),delete this.outgoing[C])}))}_removeTopicAliasAndRecoverTopicName(C){let T;C.properties&&(T=C.properties.topicAlias);let M=C.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",T,M),M.length===0){if(typeof T>"u")return new Error("Unregistered Topic Alias");if(M=this.topicAliasSend.getTopicByAlias(T),typeof M>"u")return new Error("Unregistered Topic Alias");C.topic=M}T&&delete C.properties.topicAlias}_checkDisconnecting(C){return this.disconnecting&&(C&&C!==this.noop?C(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(C,T,M={}){if(T&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",T)),this.log("_cleanUp :: forced? %s",C),C)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let $=Object.assign({cmd:"disconnect"},M);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket($,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),_(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),T&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",T),T())}_storeAndSend(C,T,M){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",C.cmd);let $=C,G;if($.cmd==="publish"&&($=(0,a.default)(C),G=this._removeTopicAliasAndRecoverTopicName($),G))return T&&T(G);this.outgoingStore.put($,re=>{if(re)return T&&T(re);M(),this._writePacket(C,T)})}_applyTopicAlias(C){if(this.options.protocolVersion===5&&C.cmd==="publish"){let T;C.properties&&(T=C.properties.topicAlias);let M=C.topic.toString();if(this.topicAliasSend)if(T){if(M.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",M,T),!this.topicAliasSend.put(M,T)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",M,T),new Error("Sending Topic Alias out of range")}else M.length!==0&&(this.options.autoAssignTopicAlias?(T=this.topicAliasSend.getAliasByTopic(M),T?(C.topic="",C.properties=Object.assign(Object.assign({},C.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",M,T)):(T=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(M,T),C.properties=Object.assign(Object.assign({},C.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",M,T))):this.options.autoUseTopicAlias&&(T=this.topicAliasSend.getAliasByTopic(M),T&&(C.topic="",C.properties=Object.assign(Object.assign({},C.properties),{topicAlias:T}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",M,T))));else if(T)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",M,T),new Error("Sending Topic Alias out of range")}}_noop(C){this.log("noop ::",C)}_writePacket(C,T){this.log("_writePacket :: packet: %O",C),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",C),this.log("_writePacket :: writing to stream");let M=i.default.writeToStream(C,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",M),!M&&T&&T!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",T)):T&&(this.log("_writePacket :: invoking cb"),T())}_sendPacket(C,T,M,$){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),M=M||this.noop,T=T||this.noop;let G=this._applyTopicAlias(C);if(G){T(G);return}if(!this.connected){if(C.cmd==="auth"){this._writePacket(C,T);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(C,T,M);return}if($){this._writePacket(C,T);return}switch(C.cmd){case"publish":break;case"pubrel":this._storeAndSend(C,T,M);return;default:this._writePacket(C,T);return}switch(C.qos){case 2:case 1:this._storeAndSend(C,T,M);break;case 0:default:this._writePacket(C,T);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(C,T,M){this.log("_storePacket :: packet: %o",C),this.log("_storePacket :: cb? %s",!!T),M=M||this.noop;let $=C;if($.cmd==="publish"){$=(0,a.default)(C);let re=this._removeTopicAliasAndRecoverTopicName($);if(re)return T&&T(re)}let G=$.qos||0;G===0&&this.queueQoSZero||$.cmd!=="publish"?this.queue.push({packet:$,cb:T}):G>0?(T=this.outgoing[$.messageId]?this.outgoing[$.messageId].cb:null,this.outgoingStore.put($,re=>{if(re)return T&&T(re);M()})):T&&T(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new I.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(){this.keepaliveManager&&this.options.keepalive&&this.options.reschedulePings&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let C=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&C.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let T=0;T<C.length;T++){let M={};M[C[T]]=this._resubscribeTopics[C[T]],M.resubscribe=!0,this.subscribe(M,{properties:M[C[T]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(C){if(this.disconnected){this.emit("connect",C);return}this.connackPacket=C,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let T=()=>{let M=this.outgoingStore.createStream(),$=()=>{M.destroy(),M=null,this._flushStoreProcessingQueue(),G()},G=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",$),M.on("error",S=>{G(),this._flushStoreProcessingQueue(),this.removeListener("close",$),this.emit("error",S)});let re=()=>{if(!M)return;let S=M.read(1),H;if(!S){M.once("readable",re);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[S.messageId]){re();return}!this.disconnecting&&!this.reconnectTimer?(H=this.outgoing[S.messageId]?this.outgoing[S.messageId].cb:null,this.outgoing[S.messageId]={volatile:!1,cb(te,Q){H&&H(te,Q),re()}},this._packetIdsDuringStoreProcessing[S.messageId]=!0,this.messageIdProvider.register(S.messageId)?this._sendPacket(S,void 0,void 0,!0):this.log("messageId: %d has already used.",S.messageId)):M.destroy&&M.destroy()};M.on("end",()=>{let S=!0;for(let H in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[H]){S=!1;break}this.removeListener("close",$),S?(G(),this._invokeAllStoreProcessingQueue(),this.emit("connect",C)):T()}),re()};T()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let C=this._storeProcessingQueue[0];if(C&&C.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let C of this._storeProcessingQueue)C.cbStorePut&&C.cbStorePut(new Error("Connection closed")),C.callback&&C.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(C,T){delete this.outgoing[C],this.outgoingStore.del({messageId:C},(M,$)=>{T(M,$),this.messageIdProvider.deallocate(C),this._invokeStoreProcessingQueue()})}};N.VERSION=m.MQTTJS_VERSION,e.default=N}),xl=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=Qo(),t=class{constructor(){this.numberAllocator=new r.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};e.default=t});function Ht(e){throw new RangeError(ts[e])}function Go(e,r){let t=e.split("@"),l="";t.length>1&&(l=t[0]+"@",e=t[1]);let c=function(o,i){let s=[],n=o.length;for(;n--;)s[n]=i(o[n]);return s}((e=e.replace(es,".")).split("."),r).join(".");return l+c}function Jo(e){let r=[],t=0,l=e.length;for(;t<l;){let c=e.charCodeAt(t++);if(c>=55296&&c<=56319&&t<l){let o=e.charCodeAt(t++);(64512&o)==56320?r.push(((1023&c)<<10)+(1023&o)+65536):(r.push(c),t--)}else r.push(c)}return r}var Xo,Zo,es,ts,ut,kr,fn,dn,pn,gn,Pt,Ul=Ye(()=>{le(),ae(),se(),Xo=/^xn--/,Zo=/[^\0-\x7E]/,es=/[\x2E\u3002\uFF0E\uFF61]/g,ts={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ut=Math.floor,kr=String.fromCharCode,fn=function(e,r){return e+22+75*(e<26)-((r!=0)<<5)},dn=function(e,r,t){let l=0;for(e=t?ut(e/700):e>>1,e+=ut(e/r);e>455;l+=36)e=ut(e/35);return ut(l+36*e/(e+38))},pn=function(e){let r=[],t=e.length,l=0,c=128,o=72,i=e.lastIndexOf("-");i<0&&(i=0);for(let n=0;n<i;++n)e.charCodeAt(n)>=128&&Ht("not-basic"),r.push(e.charCodeAt(n));for(let n=i>0?i+1:0;n<t;){let a=l;for(let p=1,g=36;;g+=36){n>=t&&Ht("invalid-input");let b=(s=e.charCodeAt(n++))-48<10?s-22:s-65<26?s-65:s-97<26?s-97:36;(b>=36||b>ut((2147483647-l)/p))&&Ht("overflow"),l+=b*p;let m=g<=o?1:g>=o+26?26:g-o;if(b<m)break;let y=36-m;p>ut(2147483647/y)&&Ht("overflow"),p*=y}let f=r.length+1;o=dn(l-a,f,a==0),ut(l/f)>2147483647-c&&Ht("overflow"),c+=ut(l/f),l%=f,r.splice(l++,0,c)}var s;return String.fromCodePoint(...r)},gn=function(e){let r=[],t=(e=Jo(e)).length,l=128,c=0,o=72;for(let n of e)n<128&&r.push(kr(n));let i=r.length,s=i;for(i&&r.push("-");s<t;){let n=2147483647;for(let f of e)f>=l&&f<n&&(n=f);let a=s+1;n-l>ut((2147483647-c)/a)&&Ht("overflow"),c+=(n-l)*a,l=n;for(let f of e)if(f<l&&++c>2147483647&&Ht("overflow"),f==l){let p=c;for(let g=36;;g+=36){let b=g<=o?1:g>=o+26?26:g-o;if(p<b)break;let m=p-b,y=36-b;r.push(kr(fn(b+m%y,0))),p=ut(m/y)}r.push(kr(fn(p,0))),o=dn(c,a,s==i),c=0,++s}++c,++l}return r.join("")},Pt={version:"2.1.0",ucs2:{decode:Jo,encode:e=>String.fromCodePoint(...e)},decode:pn,encode:gn,toASCII:function(e){return Go(e,function(r){return Zo.test(r)?"xn--"+gn(r):r})},toUnicode:function(e){return Go(e,function(r){return Xo.test(r)?pn(r.slice(4).toLowerCase()):r})}},Pt.decode,Pt.encode,Pt.toASCII,Pt.toUnicode,Pt.ucs2,Pt.version});function Ll(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var rs,rr,is,dt,Nl=Ye(()=>{le(),ae(),se(),rs=function(e,r,t,l){r=r||"&",t=t||"=";var c={};if(typeof e!="string"||e.length===0)return c;var o=/\+/g;e=e.split(r);var i=1e3;l&&typeof l.maxKeys=="number"&&(i=l.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var n=0;n<s;++n){var a,f,p,g,b=e[n].replace(o,"%20"),m=b.indexOf(t);m>=0?(a=b.substr(0,m),f=b.substr(m+1)):(a=b,f=""),p=decodeURIComponent(a),g=decodeURIComponent(f),Ll(c,p)?Array.isArray(c[p])?c[p].push(g):c[p]=[c[p],g]:c[p]=g}return c},rr=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},is=function(e,r,t,l){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(c){var o=encodeURIComponent(rr(c))+t;return Array.isArray(e[c])?e[c].map(function(i){return o+encodeURIComponent(rr(i))}).join(r):o+encodeURIComponent(rr(e[c]))}).join(r):l?encodeURIComponent(rr(l))+t+encodeURIComponent(rr(e)):""},dt={},dt.decode=dt.parse=rs,dt.encode=dt.stringify=is,dt.decode,dt.encode,dt.parse,dt.stringify});function bn(){throw new Error("setTimeout has not been defined")}function mn(){throw new Error("clearTimeout has not been defined")}function ns(e){if(Tt===setTimeout)return setTimeout(e,0);if((Tt===bn||!Tt)&&setTimeout)return Tt=setTimeout,setTimeout(e,0);try{return Tt(e,0)}catch{try{return Tt.call(null,e,0)}catch{return Tt.call(this||zt,e,0)}}}function jl(){Qt&&Kt&&(Qt=!1,Kt.length?pt=Kt.concat(pt):hr=-1,pt.length&&os())}function os(){if(!Qt){var e=ns(jl);Qt=!0;for(var r=pt.length;r;){for(Kt=pt,pt=[];++hr<r;)Kt&&Kt[hr].run();hr=-1,r=pt.length}Kt=null,Qt=!1,function(t){if(Ct===clearTimeout)return clearTimeout(t);if((Ct===mn||!Ct)&&clearTimeout)return Ct=clearTimeout,clearTimeout(t);try{Ct(t)}catch{try{return Ct.call(null,t)}catch{return Ct.call(this||zt,t)}}}(e)}}function ss(e,r){(this||zt).fun=e,(this||zt).array=r}function kt(){}var as,Tt,Ct,zt,$e,Kt,pt,Qt,hr,We,Dl=Ye(()=>{le(),ae(),se(),zt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,$e=as={},function(){try{Tt=typeof setTimeout=="function"?setTimeout:bn}catch{Tt=bn}try{Ct=typeof clearTimeout=="function"?clearTimeout:mn}catch{Ct=mn}}(),pt=[],Qt=!1,hr=-1,$e.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];pt.push(new ss(e,r)),pt.length!==1||Qt||ns(os)},ss.prototype.run=function(){(this||zt).fun.apply(null,(this||zt).array)},$e.title="browser",$e.browser=!0,$e.env={},$e.argv=[],$e.version="",$e.versions={},$e.on=kt,$e.addListener=kt,$e.once=kt,$e.off=kt,$e.removeListener=kt,$e.removeAllListeners=kt,$e.emit=kt,$e.prependListener=kt,$e.prependOnceListener=kt,$e.listeners=function(e){return[]},$e.binding=function(e){throw new Error("process.binding is not supported")},$e.cwd=function(){return"/"},$e.chdir=function(e){throw new Error("process.chdir is not supported")},$e.umask=function(){return 0},We=as,We.addListener,We.argv,We.binding,We.browser,We.chdir,We.cwd,We.emit,We.env,We.listeners,We.nextTick,We.off,We.on,We.once,We.prependListener,We.prependOnceListener,We.removeAllListeners,We.removeListener,We.title,We.umask,We.version,We.versions});function Fl(){if(yn)return Tr;yn=!0;var e=Tr={},r,t;function l(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=l}catch{r=l}try{typeof clearTimeout=="function"?t=clearTimeout:t=c}catch{t=c}})();function o(y){if(r===setTimeout)return setTimeout(y,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(y,0);try{return r(y,0)}catch{try{return r.call(null,y,0)}catch{return r.call(this||Yt,y,0)}}}function i(y){if(t===clearTimeout)return clearTimeout(y);if((t===c||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(y);try{return t(y)}catch{try{return t.call(null,y)}catch{return t.call(this||Yt,y)}}}var s=[],n=!1,a,f=-1;function p(){!n||!a||(n=!1,a.length?s=a.concat(s):f=-1,s.length&&g())}function g(){if(!n){var y=o(p);n=!0;for(var I=s.length;I;){for(a=s,s=[];++f<I;)a&&a[f].run();f=-1,I=s.length}a=null,n=!1,i(y)}}e.nextTick=function(y){var I=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)I[x-1]=arguments[x];s.push(new b(y,I)),s.length===1&&!n&&o(g)};function b(y,I){(this||Yt).fun=y,(this||Yt).array=I}b.prototype.run=function(){(this||Yt).fun.apply(null,(this||Yt).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function m(){}return e.on=m,e.addListener=m,e.once=m,e.off=m,e.removeListener=m,e.removeAllListeners=m,e.emit=m,e.prependListener=m,e.prependOnceListener=m,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Tr}var Tr,yn,Yt,je,ls=Ye(()=>{le(),ae(),se(),Tr={},yn=!1,Yt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,je=Fl(),je.platform="browser",je.addListener,je.argv,je.binding,je.browser,je.chdir,je.cwd,je.emit,je.env,je.listeners,je.nextTick,je.off,je.on,je.once,je.prependListener,je.prependOnceListener,je.removeAllListeners,je.removeListener,je.title,je.umask,je.version,je.versions});function Wl(){if(wn)return Cr;wn=!0;var e=je;function r(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,i){for(var s="",n=0,a=-1,f=0,p,g=0;g<=o.length;++g){if(g<o.length)p=o.charCodeAt(g);else{if(p===47)break;p=47}if(p===47){if(!(a===g-1||f===1))if(a!==g-1&&f===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var b=s.lastIndexOf("/");if(b!==s.length-1){b===-1?(s="",n=0):(s=s.slice(0,b),n=s.length-1-s.lastIndexOf("/")),a=g,f=0;continue}}else if(s.length===2||s.length===1){s="",n=0,a=g,f=0;continue}}i&&(s.length>0?s+="/..":s="..",n=2)}else s.length>0?s+="/"+o.slice(a+1,g):s=o.slice(a+1,g),n=g-a-1;a=g,f=0}else p===46&&f!==-1?++f:f=-1}return s}function l(o,i){var s=i.dir||i.root,n=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+n:s+o+n:n}var c={resolve:function(){for(var o="",i=!1,s,n=arguments.length-1;n>=-1&&!i;n--){var a;n>=0?a=arguments[n]:(s===void 0&&(s=e.cwd()),a=s),r(a),a.length!==0&&(o=a+"/"+o,i=a.charCodeAt(0)===47)}return o=t(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(r(o),o.length===0)return".";var i=o.charCodeAt(0)===47,s=o.charCodeAt(o.length-1)===47;return o=t(o,!i),o.length===0&&!i&&(o="."),o.length>0&&s&&(o+="/"),i?"/"+o:o},isAbsolute:function(o){return r(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,i=0;i<arguments.length;++i){var s=arguments[i];r(s),s.length>0&&(o===void 0?o=s:o+="/"+s)}return o===void 0?".":c.normalize(o)},relative:function(o,i){if(r(o),r(i),o===i||(o=c.resolve(o),i=c.resolve(i),o===i))return"";for(var s=1;s<o.length&&o.charCodeAt(s)===47;++s);for(var n=o.length,a=n-s,f=1;f<i.length&&i.charCodeAt(f)===47;++f);for(var p=i.length,g=p-f,b=a<g?a:g,m=-1,y=0;y<=b;++y){if(y===b){if(g>b){if(i.charCodeAt(f+y)===47)return i.slice(f+y+1);if(y===0)return i.slice(f+y)}else a>b&&(o.charCodeAt(s+y)===47?m=y:y===0&&(m=0));break}var I=o.charCodeAt(s+y),x=i.charCodeAt(f+y);if(I!==x)break;I===47&&(m=y)}var _="";for(y=s+m+1;y<=n;++y)(y===n||o.charCodeAt(y)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+i.slice(f+m):(f+=m,i.charCodeAt(f)===47&&++f,i.slice(f))},_makeLong:function(o){return o},dirname:function(o){if(r(o),o.length===0)return".";for(var i=o.charCodeAt(0),s=i===47,n=-1,a=!0,f=o.length-1;f>=1;--f)if(i=o.charCodeAt(f),i===47){if(!a){n=f;break}}else a=!1;return n===-1?s?"/":".":s&&n===1?"//":o.slice(0,n)},basename:function(o,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');r(o);var s=0,n=-1,a=!0,f;if(i!==void 0&&i.length>0&&i.length<=o.length){if(i.length===o.length&&i===o)return"";var p=i.length-1,g=-1;for(f=o.length-1;f>=0;--f){var b=o.charCodeAt(f);if(b===47){if(!a){s=f+1;break}}else g===-1&&(a=!1,g=f+1),p>=0&&(b===i.charCodeAt(p)?--p===-1&&(n=f):(p=-1,n=g))}return s===n?n=g:n===-1&&(n=o.length),o.slice(s,n)}else{for(f=o.length-1;f>=0;--f)if(o.charCodeAt(f)===47){if(!a){s=f+1;break}}else n===-1&&(a=!1,n=f+1);return n===-1?"":o.slice(s,n)}},extname:function(o){r(o);for(var i=-1,s=0,n=-1,a=!0,f=0,p=o.length-1;p>=0;--p){var g=o.charCodeAt(p);if(g===47){if(!a){s=p+1;break}continue}n===-1&&(a=!1,n=p+1),g===46?i===-1?i=p:f!==1&&(f=1):i!==-1&&(f=-1)}return i===-1||n===-1||f===0||f===1&&i===n-1&&i===s+1?"":o.slice(i,n)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return l("/",o)},parse:function(o){r(o);var i={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return i;var s=o.charCodeAt(0),n=s===47,a;n?(i.root="/",a=1):a=0;for(var f=-1,p=0,g=-1,b=!0,m=o.length-1,y=0;m>=a;--m){if(s=o.charCodeAt(m),s===47){if(!b){p=m+1;break}continue}g===-1&&(b=!1,g=m+1),s===46?f===-1?f=m:y!==1&&(y=1):f!==-1&&(y=-1)}return f===-1||g===-1||y===0||y===1&&f===g-1&&f===p+1?g!==-1&&(p===0&&n?i.base=i.name=o.slice(1,g):i.base=i.name=o.slice(p,g)):(p===0&&n?(i.name=o.slice(1,f),i.base=o.slice(1,g)):(i.name=o.slice(p,f),i.base=o.slice(p,g)),i.ext=o.slice(f,g)),p>0?i.dir=o.slice(0,p-1):n&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Cr=c,Cr}var Cr,wn,vn,$l=Ye(()=>{le(),ae(),se(),ls(),Cr={},wn=!1,vn=Wl()}),us={};xt(us,{URL:()=>Ls,Url:()=>Ps,default:()=>Ue,fileURLToPath:()=>hs,format:()=>Bs,parse:()=>Us,pathToFileURL:()=>cs,resolve:()=>Ms,resolveObject:()=>xs});function st(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function cr(e,r,t){if(e&&ht.isObject(e)&&e instanceof st)return e;var l=new st;return l.parse(e,r,t),l}function ql(){if(An)return Br;An=!0;var e=We;function r(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,i){for(var s="",n=0,a=-1,f=0,p,g=0;g<=o.length;++g){if(g<o.length)p=o.charCodeAt(g);else{if(p===47)break;p=47}if(p===47){if(!(a===g-1||f===1))if(a!==g-1&&f===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var b=s.lastIndexOf("/");if(b!==s.length-1){b===-1?(s="",n=0):(s=s.slice(0,b),n=s.length-1-s.lastIndexOf("/")),a=g,f=0;continue}}else if(s.length===2||s.length===1){s="",n=0,a=g,f=0;continue}}i&&(s.length>0?s+="/..":s="..",n=2)}else s.length>0?s+="/"+o.slice(a+1,g):s=o.slice(a+1,g),n=g-a-1;a=g,f=0}else p===46&&f!==-1?++f:f=-1}return s}function l(o,i){var s=i.dir||i.root,n=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+n:s+o+n:n}var c={resolve:function(){for(var o="",i=!1,s,n=arguments.length-1;n>=-1&&!i;n--){var a;n>=0?a=arguments[n]:(s===void 0&&(s=e.cwd()),a=s),r(a),a.length!==0&&(o=a+"/"+o,i=a.charCodeAt(0)===47)}return o=t(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(r(o),o.length===0)return".";var i=o.charCodeAt(0)===47,s=o.charCodeAt(o.length-1)===47;return o=t(o,!i),o.length===0&&!i&&(o="."),o.length>0&&s&&(o+="/"),i?"/"+o:o},isAbsolute:function(o){return r(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,i=0;i<arguments.length;++i){var s=arguments[i];r(s),s.length>0&&(o===void 0?o=s:o+="/"+s)}return o===void 0?".":c.normalize(o)},relative:function(o,i){if(r(o),r(i),o===i||(o=c.resolve(o),i=c.resolve(i),o===i))return"";for(var s=1;s<o.length&&o.charCodeAt(s)===47;++s);for(var n=o.length,a=n-s,f=1;f<i.length&&i.charCodeAt(f)===47;++f);for(var p=i.length,g=p-f,b=a<g?a:g,m=-1,y=0;y<=b;++y){if(y===b){if(g>b){if(i.charCodeAt(f+y)===47)return i.slice(f+y+1);if(y===0)return i.slice(f+y)}else a>b&&(o.charCodeAt(s+y)===47?m=y:y===0&&(m=0));break}var I=o.charCodeAt(s+y),x=i.charCodeAt(f+y);if(I!==x)break;I===47&&(m=y)}var _="";for(y=s+m+1;y<=n;++y)(y===n||o.charCodeAt(y)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+i.slice(f+m):(f+=m,i.charCodeAt(f)===47&&++f,i.slice(f))},_makeLong:function(o){return o},dirname:function(o){if(r(o),o.length===0)return".";for(var i=o.charCodeAt(0),s=i===47,n=-1,a=!0,f=o.length-1;f>=1;--f)if(i=o.charCodeAt(f),i===47){if(!a){n=f;break}}else a=!1;return n===-1?s?"/":".":s&&n===1?"//":o.slice(0,n)},basename:function(o,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');r(o);var s=0,n=-1,a=!0,f;if(i!==void 0&&i.length>0&&i.length<=o.length){if(i.length===o.length&&i===o)return"";var p=i.length-1,g=-1;for(f=o.length-1;f>=0;--f){var b=o.charCodeAt(f);if(b===47){if(!a){s=f+1;break}}else g===-1&&(a=!1,g=f+1),p>=0&&(b===i.charCodeAt(p)?--p===-1&&(n=f):(p=-1,n=g))}return s===n?n=g:n===-1&&(n=o.length),o.slice(s,n)}else{for(f=o.length-1;f>=0;--f)if(o.charCodeAt(f)===47){if(!a){s=f+1;break}}else n===-1&&(a=!1,n=f+1);return n===-1?"":o.slice(s,n)}},extname:function(o){r(o);for(var i=-1,s=0,n=-1,a=!0,f=0,p=o.length-1;p>=0;--p){var g=o.charCodeAt(p);if(g===47){if(!a){s=p+1;break}continue}n===-1&&(a=!1,n=p+1),g===46?i===-1?i=p:f!==1&&(f=1):i!==-1&&(f=-1)}return i===-1||n===-1||f===0||f===1&&i===n-1&&i===s+1?"":o.slice(i,n)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return l("/",o)},parse:function(o){r(o);var i={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return i;var s=o.charCodeAt(0),n=s===47,a;n?(i.root="/",a=1):a=0;for(var f=-1,p=0,g=-1,b=!0,m=o.length-1,y=0;m>=a;--m){if(s=o.charCodeAt(m),s===47){if(!b){p=m+1;break}continue}g===-1&&(b=!1,g=m+1),s===46?f===-1?f=m:y!==1&&(y=1):f!==-1&&(y=-1)}return f===-1||g===-1||y===0||y===1&&f===g-1&&f===p+1?g!==-1&&(p===0&&n?i.base=i.name=o.slice(1,g):i.base=i.name=o.slice(p,g)):(p===0&&n?(i.name=o.slice(1,f),i.base=o.slice(1,g)):(i.name=o.slice(p,f),i.base=o.slice(p,g)),i.ext=o.slice(f,g)),p>0?i.dir=o.slice(0,p-1):n&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Br=c,Br}function Vl(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Mr?Hl(e):zl(e)}function Hl(e){let r=e.hostname,t=e.pathname;for(let l=0;l<t.length;l++)if(t[l]==="%"){let c=t.codePointAt(l+2)||32;if(t[l+1]==="2"&&c===102||t[l+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(As,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let l=t.codePointAt(1)|32,c=t[2];if(l<Es||l>Ss||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function zl(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let l=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function Kl(e){let r=In.resolve(e),t=e.charCodeAt(e.length-1);(t===_s||Mr&&t===vs)&&r[r.length-1]!==In.sep&&(r+="/");let l=new URL("file://");return r.includes("%")&&(r=r.replace(Is,"%25")),!Mr&&r.includes("\\")&&(r=r.replace(ks,"%5C")),r.includes(`
`)&&(r=r.replace(Ts,"%0A")),r.includes("\r")&&(r=r.replace(Cs,"%0D")),r.includes("	")&&(r=r.replace(Os,"%09")),l.pathname=r,l}function hs(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return xr?Ql(e):Yl(e)}function Ql(e){let r=e.hostname,t=e.pathname;for(let l=0;l<t.length;l++)if(t[l]==="%"){let c=t.codePointAt(l+2)||32;if(t[l+1]==="2"&&c===102||t[l+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Ws,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let l=t.codePointAt(1)|32,c=t[2];if(l<Ds||l>Fs||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Yl(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let l=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function cs(e){let r=vn.resolve(e),t=e.charCodeAt(e.length-1);(t===js||xr&&t===Ns)&&r[r.length-1]!==vn.sep&&(r+="/");let l=new URL("file://");return r.includes("%")&&(r=r.replace($s,"%25")),!xr&&r.includes("\\")&&(r=r.replace(qs,"%5C")),r.includes(`
`)&&(r=r.replace(Vs,"%0A")),r.includes("\r")&&(r=r.replace(Hs,"%0D")),r.includes("	")&&(r=r.replace(zs,"%09")),l.pathname=r,l}var Ue,fs,ht,ds,ps,gs,bs,Or,_n,En,Sn,ms,ys,Rr,Gt,Pr,Br,An,In,ws,vs,_s,Es,Ss,Mr,As,Is,ks,Ts,Cs,Os,Rs,Ps,Bs,Ms,xs,Us,Ls,Ns,js,Ds,Fs,xr,Ws,$s,qs,Vs,Hs,zs,Gl=Ye(()=>{le(),ae(),se(),Ul(),Nl(),Dl(),$l(),ls(),Ue={},fs=Pt,ht={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Ue.parse=cr,Ue.resolve=function(e,r){return cr(e,!1,!0).resolve(r)},Ue.resolveObject=function(e,r){return e?cr(e,!1,!0).resolveObject(r):r},Ue.format=function(e){return ht.isString(e)&&(e=cr(e)),e instanceof st?e.format():st.prototype.format.call(e)},Ue.Url=st,ds=/^([a-z0-9.+-]+:)/i,ps=/:[0-9]*$/,gs=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,bs=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Or=["'"].concat(bs),_n=["%","/","?",";","#"].concat(Or),En=["/","?","#"],Sn=/^[+a-z0-9A-Z_-]{0,63}$/,ms=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ys={javascript:!0,"javascript:":!0},Rr={javascript:!0,"javascript:":!0},Gt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Pr=dt,st.prototype.parse=function(e,r,t){if(!ht.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var l=e.indexOf("?"),c=l!==-1&&l<e.indexOf("#")?"?":"#",o=e.split(c);o[0]=o[0].replace(/\\/g,"/");var i=e=o.join(c);if(i=i.trim(),!t&&e.split("#").length===1){var s=gs.exec(i);if(s)return this.path=i,this.href=i,this.pathname=s[1],s[2]?(this.search=s[2],this.query=r?Pr.parse(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var n=ds.exec(i);if(n){var a=(n=n[0]).toLowerCase();this.protocol=a,i=i.substr(n.length)}if(t||n||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=i.substr(0,2)==="//";!f||n&&Rr[n]||(i=i.substr(2),this.slashes=!0)}if(!Rr[n]&&(f||n&&!Gt[n])){for(var p,g,b=-1,m=0;m<En.length;m++)(y=i.indexOf(En[m]))!==-1&&(b===-1||y<b)&&(b=y);for((g=b===-1?i.lastIndexOf("@"):i.lastIndexOf("@",b))!==-1&&(p=i.slice(0,g),i=i.slice(g+1),this.auth=decodeURIComponent(p)),b=-1,m=0;m<_n.length;m++){var y;(y=i.indexOf(_n[m]))!==-1&&(b===-1||y<b)&&(b=y)}b===-1&&(b=i.length),this.host=i.slice(0,b),i=i.slice(b),this.parseHost(),this.hostname=this.hostname||"";var I=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!I)for(var x=this.hostname.split(/\./),_=(m=0,x.length);m<_;m++){var A=x[m];if(A&&!A.match(Sn)){for(var N="",D=0,C=A.length;D<C;D++)A.charCodeAt(D)>127?N+="x":N+=A[D];if(!N.match(Sn)){var T=x.slice(0,m),M=x.slice(m+1),$=A.match(ms);$&&(T.push($[1]),M.unshift($[2])),M.length&&(i="/"+M.join(".")+i),this.hostname=T.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=fs.toASCII(this.hostname));var G=this.port?":"+this.port:"",re=this.hostname||"";this.host=re+G,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!ys[a])for(m=0,_=Or.length;m<_;m++){var S=Or[m];if(i.indexOf(S)!==-1){var H=encodeURIComponent(S);H===S&&(H=escape(S)),i=i.split(S).join(H)}}var te=i.indexOf("#");te!==-1&&(this.hash=i.substr(te),i=i.slice(0,te));var Q=i.indexOf("?");if(Q!==-1?(this.search=i.substr(Q),this.query=i.substr(Q+1),r&&(this.query=Pr.parse(this.query)),i=i.slice(0,Q)):r&&(this.search="",this.query={}),i&&(this.pathname=i),Gt[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var ge=this.search||"";this.path=G+ge}return this.href=this.format(),this},st.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var r=this.protocol||"",t=this.pathname||"",l=this.hash||"",c=!1,o="";this.host?c=e+this.host:this.hostname&&(c=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(c+=":"+this.port)),this.query&&ht.isObject(this.query)&&Object.keys(this.query).length&&(o=Pr.stringify(this.query));var i=this.search||o&&"?"+o||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||Gt[r])&&c!==!1?(c="//"+(c||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):c||(c=""),l&&l.charAt(0)!=="#"&&(l="#"+l),i&&i.charAt(0)!=="?"&&(i="?"+i),r+c+(t=t.replace(/[?#]/g,function(s){return encodeURIComponent(s)}))+(i=i.replace("#","%23"))+l},st.prototype.resolve=function(e){return this.resolveObject(cr(e,!1,!0)).format()},st.prototype.resolveObject=function(e){if(ht.isString(e)){var r=new st;r.parse(e,!1,!0),e=r}for(var t=new st,l=Object.keys(this),c=0;c<l.length;c++){var o=l[c];t[o]=this[o]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),s=0;s<i.length;s++){var n=i[s];n!=="protocol"&&(t[n]=e[n])}return Gt[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!Gt[e.protocol]){for(var a=Object.keys(e),f=0;f<a.length;f++){var p=a[f];t[p]=e[p]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||Rr[e.protocol])t.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),t.pathname=g.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var b=t.pathname||"",m=t.search||"";t.path=b+m}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var y=t.pathname&&t.pathname.charAt(0)==="/",I=e.host||e.pathname&&e.pathname.charAt(0)==="/",x=I||y||t.host&&e.pathname,_=x,A=t.pathname&&t.pathname.split("/")||[],N=(g=e.pathname&&e.pathname.split("/")||[],t.protocol&&!Gt[t.protocol]);if(N&&(t.hostname="",t.port=null,t.host&&(A[0]===""?A[0]=t.host:A.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(g[0]===""?g[0]=e.host:g.unshift(e.host)),e.host=null),x=x&&(g[0]===""||A[0]==="")),I)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,A=g;else if(g.length)A||(A=[]),A.pop(),A=A.concat(g),t.search=e.search,t.query=e.query;else if(!ht.isNullOrUndefined(e.search))return N&&(t.hostname=t.host=A.shift(),($=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=$.shift(),t.host=t.hostname=$.shift())),t.search=e.search,t.query=e.query,ht.isNull(t.pathname)&&ht.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!A.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var D=A.slice(-1)[0],C=(t.host||e.host||A.length>1)&&(D==="."||D==="..")||D==="",T=0,M=A.length;M>=0;M--)(D=A[M])==="."?A.splice(M,1):D===".."?(A.splice(M,1),T++):T&&(A.splice(M,1),T--);if(!x&&!_)for(;T--;T)A.unshift("..");!x||A[0]===""||A[0]&&A[0].charAt(0)==="/"||A.unshift(""),C&&A.join("/").substr(-1)!=="/"&&A.push("");var $,G=A[0]===""||A[0]&&A[0].charAt(0)==="/";return N&&(t.hostname=t.host=G?"":A.length?A.shift():"",($=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=$.shift(),t.host=t.hostname=$.shift())),(x=x||t.host&&A.length)&&!G&&A.unshift(""),A.length?t.pathname=A.join("/"):(t.pathname=null,t.path=null),ht.isNull(t.pathname)&&ht.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},st.prototype.parseHost=function(){var e=this.host,r=ps.exec(e);r&&((r=r[0])!==":"&&(this.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(this.hostname=e)},Ue.Url,Ue.format,Ue.resolve,Ue.resolveObject,Br={},An=!1,In=ql(),ws=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ue.URL=typeof URL<"u"?URL:null,Ue.pathToFileURL=Kl,Ue.fileURLToPath=Vl,Ue.Url,Ue.format,Ue.resolve,Ue.resolveObject,Ue.URL,vs=92,_s=47,Es=97,Ss=122,Mr=ws==="win32",As=/\//g,Is=/%/g,ks=/\\/g,Ts=/\n/g,Cs=/\r/g,Os=/\t/g,Rs=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ue.URL=typeof URL<"u"?URL:null,Ue.pathToFileURL=cs,Ue.fileURLToPath=hs,Ps=Ue.Url,Bs=Ue.format,Ms=Ue.resolve,xs=Ue.resolveObject,Us=Ue.parse,Ls=Ue.URL,Ns=92,js=47,Ds=97,Fs=122,xr=Rs==="win32",Ws=/\//g,$s=/%/g,qs=/\\/g,Vs=/\n/g,Hs=/\r/g,zs=/\t/g}),kn={};xt(kn,{Server:()=>De,Socket:()=>De,Stream:()=>De,_createServerHandle:()=>De,_normalizeArgs:()=>De,_setSimultaneousAccepts:()=>De,connect:()=>De,createConnection:()=>De,createServer:()=>De,default:()=>Ks,isIP:()=>De,isIPv4:()=>De,isIPv6:()=>De});function De(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Ks,Qs=Ye(()=>{le(),ae(),se(),Ks={_createServerHandle:De,_normalizeArgs:De,_setSimultaneousAccepts:De,connect:De,createConnection:De,createServer:De,isIP:De,isIPv4:De,isIPv6:De,Server:De,Socket:De,Stream:De}}),Ys=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((Qs(),Le(kn))),l=r(St()),c=(0,l.default)("mqttjs:tcp"),o=(i,s)=>{s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";let{port:n,path:a}=s,f=s.hostname;return c("port %d and host %s",n,f),t.default.createConnection({port:n,host:f,path:a})};e.default=o}),Gs={};xt(Gs,{default:()=>Js});var Js,Jl=Ye(()=>{le(),ae(),se(),Js={}}),Xs=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((Jl(),Le(Gs))),l=r((Qs(),Le(kn))),c=r(St()),o=(0,c.default)("mqttjs:tls"),i=(s,n)=>{n.port=n.port||8883,n.host=n.hostname||n.host||"localhost",l.default.isIP(n.host)===0&&(n.servername=n.host),n.rejectUnauthorized=n.rejectUnauthorized!==!1,delete n.path,o("port %d host %s rejectUnauthorized %b",n.port,n.host,n.rejectUnauthorized);let a=t.default.connect(n);a.on("secureConnect",()=>{n.rejectUnauthorized&&!a.authorized?a.emit("error",new Error("TLS not authorized")):a.removeListener("error",f)});function f(p){n.rejectUnauthorized&&s.emit("error",p),a.end()}return a.on("error",f),a};e.default=i}),Tn=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var r=Vt(),t=(Je(),Le(Ge));function l(o,i){let s=new Array(o.length);for(let n=0;n<o.length;n++)typeof o[n].chunk=="string"?s[n]=t.Buffer.from(o[n].chunk,"utf8"):s[n]=o[n].chunk;this._write(t.Buffer.concat(s),"binary",i)}e.writev=l;var c=class extends r.Duplex{constructor(o,i,s){super({objectMode:!0}),this.proxy=i,this.socket=s,this.writeQueue=[],o.objectMode||(this._writev=l.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",n=>{this.push(n)})}_read(o){this.proxy.read(o)}_write(o,i,s){this.isSocketOpen?this.writeToProxy(o,i,s):this.writeQueue.push({chunk:o,encoding:i,cb:s})}_final(o){this.writeQueue=[],this.proxy.end(o)}_destroy(o,i){this.writeQueue=[],this.proxy.destroy(),i(o)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(o,i,s){this.proxy.write(o,i)===!1?this.proxy.once("drain",s):s()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:o,encoding:i,cb:s}=this.writeQueue.shift();this.writeToProxy(o,i,s)}}};e.BufferedDuplex=c}),Zs=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=(Je(),Le(Ge)),t=Vt(),l=Tn(),c,o,i;function s(){let g=new t.Transform;return g._write=(b,m,y)=>{c.send({data:b.buffer,success(){y()},fail(I){y(new Error(I))}})},g._flush=b=>{c.close({success(){b()}})},g}function n(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function a(g,b){let m=g.protocol==="wxs"?"wss":"ws",y=`${m}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(y=`${m}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(y=g.transformWsUrl(y,g,b)),y}function f(){c.onOpen(()=>{i.socketReady()}),c.onMessage(g=>{let{data:b}=g;b instanceof ArrayBuffer?b=r.Buffer.from(b):b=r.Buffer.from(b,"utf8"),o.push(b)}),c.onClose(()=>{i.emit("close"),i.end(),i.destroy()}),c.onError(g=>{let b=new Error(g.errMsg);i.destroy(b)})}var p=(g,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let m=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";n(b);let y=a(b,g);c=wx.connectSocket({url:y,protocols:[m]}),o=s(),i=new l.BufferedDuplex(b,o,c),i._destroy=(x,_)=>{c.close({success(){_&&_(x)}})};let I=i.destroy;return i.destroy=(x,_)=>(i.destroy=I,setTimeout(()=>{c.close({fail(){i._destroy(x,_)}})},0),i),f(),i};e.default=p}),ea=be(e=>{le(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=(Je(),Le(Ge)),t=Vt(),l=Tn(),c,o,i,s=!1;function n(){let b=new t.Transform;return b._write=(m,y,I)=>{c.sendSocketMessage({data:m.buffer,success(){I()},fail(){I(new Error)}})},b._flush=m=>{c.closeSocket({success(){m()}})},b}function a(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function f(b,m){let y=b.protocol==="alis"?"wss":"ws",I=`${y}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(I=`${y}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(I=b.transformWsUrl(I,b,m)),I}function p(){s||(s=!0,c.onSocketOpen(()=>{i.socketReady()}),c.onSocketMessage(b=>{if(typeof b.data=="string"){let m=r.Buffer.from(b.data,"base64");o.push(m)}else{let m=new FileReader;m.addEventListener("load",()=>{let y=m.result;y instanceof ArrayBuffer?y=r.Buffer.from(y):y=r.Buffer.from(y,"utf8"),o.push(y)}),m.readAsArrayBuffer(b.data)}}),c.onSocketClose(()=>{i.end(),i.destroy()}),c.onSocketError(b=>{i.destroy(b)}))}var g=(b,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let y=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";a(m);let I=f(m,b);return c=m.my,c.connectSocket({url:I,protocols:y}),o=n(),i=new l.BufferedDuplex(m,o,c),p(),i};e.default=g}),Xl=be((e,r)=>{le(),ae(),se(),r.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),ta=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var t=(Je(),Le(Ge)),l=r(Xl()),c=r(St()),o=Vt(),i=r(Ir()),s=Tn(),n=(0,c.default)("mqttjs:ws"),a=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function f(x,_){let A=`${x.protocol}://${x.hostname}:${x.port}${x.path}`;return typeof x.transformWsUrl=="function"&&(A=x.transformWsUrl(A,x,_)),A}function p(x){let _=x;return x.port||(x.protocol==="wss"?_.port=443:_.port=80),x.path||(_.path="/"),x.wsOptions||(_.wsOptions={}),!i.default&&x.protocol==="wss"&&a.forEach(A=>{Object.prototype.hasOwnProperty.call(x,A)&&!Object.prototype.hasOwnProperty.call(x.wsOptions,A)&&(_.wsOptions[A]=x[A])}),_}function g(x){let _=p(x);if(_.hostname||(_.hostname=_.host),!_.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let A=new URL(document.URL);_.hostname=A.hostname,_.port||(_.port=Number(A.port))}return _.objectMode===void 0&&(_.objectMode=!(_.binary===!0||_.binary===void 0)),_}function b(x,_,A){n("createWebSocket"),n(`protocol: ${A.protocolId} ${A.protocolVersion}`);let N=A.protocolId==="MQIsdp"&&A.protocolVersion===3?"mqttv3.1":"mqtt";n(`creating new Websocket for url: ${_} and protocol: ${N}`);let D;return A.createWebsocket?D=A.createWebsocket(_,[N],A):D=new l.default(_,[N],A.wsOptions),D}function m(x,_){let A=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt",N=f(_,x),D;return _.createWebsocket?D=_.createWebsocket(N,[A],_):D=new WebSocket(N,[A]),D.binaryType="arraybuffer",D}var y=(x,_)=>{n("streamBuilder");let A=p(_);A.hostname=A.hostname||A.host||"localhost";let N=f(A,x),D=b(x,N,A),C=l.default.createWebSocketStream(D,A.wsOptions);return C.url=N,D.on("close",()=>{C.destroy()}),C},I=(x,_)=>{n("browserStreamBuilder");let A,N=g(_).browserBufferSize||1024*512,D=_.browserBufferTimeout||1e3,C=!_.objectMode,T=m(x,_),M=G(_,Q,ge);_.objectMode||(M._writev=s.writev.bind(M)),M.on("close",()=>{T.close()});let $=typeof T.addEventListener<"u";T.readyState===T.OPEN?(A=M,A.socket=T):(A=new s.BufferedDuplex(_,M,T),$?T.addEventListener("open",re):T.onopen=re),$?(T.addEventListener("close",S),T.addEventListener("error",H),T.addEventListener("message",te)):(T.onclose=S,T.onerror=H,T.onmessage=te);function G(oe,V,me){let ne=new o.Transform({objectMode:oe.objectMode});return ne._write=V,ne._flush=me,ne}function re(){n("WebSocket onOpen"),A instanceof s.BufferedDuplex&&A.socketReady()}function S(oe){n("WebSocket onClose",oe),A.end(),A.destroy()}function H(oe){n("WebSocket onError",oe);let V=new Error("WebSocket error");V.event=oe,A.destroy(V)}function te(oe){let{data:V}=oe;V instanceof ArrayBuffer?V=t.Buffer.from(V):V=t.Buffer.from(V,"utf8"),M.push(V)}function Q(oe,V,me){if(T.bufferedAmount>N){setTimeout(Q,D,oe,V,me);return}C&&typeof oe=="string"&&(oe=t.Buffer.from(oe,"utf8"));try{T.send(oe)}catch(ne){return me(ne)}me()}function ge(oe){T.close(),oe()}return A};e.default=i.default?I:y}),Zl=be(e=>{le(),ae(),se();var r=e&&e.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=r(St()),l=r((Gl(),Le(us))),c=r(cn()),o=r(Ir());typeof(Be==null?void 0:Be.nextTick)!="function"&&(Be.nextTick=setImmediate);var i=(0,t.default)("mqttjs"),s={};o.default?(s.wx=Zs().default,s.wxs=Zs().default,s.ali=ea().default,s.alis=ea().default):(s.mqtt=Ys().default,s.tcp=Ys().default,s.ssl=Xs().default,s.tls=s.ssl,s.mqtts=Xs().default),s.ws=ta().default,s.wss=ta().default;function n(p){let g;p.auth&&(g=p.auth.match(/^(.+):(.+)$/),g?(p.username=g[1],p.password=g[2]):p.username=p.auth)}function a(p,g){var b,m,y;if(i("connecting to an MQTT broker..."),typeof p=="object"&&!g&&(g=p,p=""),g=g||{},p&&typeof p=="string"){let _=l.default.parse(p,!0),A={};if(_.port!=null&&(A.port=Number(_.port)),A.host=_.hostname,A.query=_.query,A.auth=_.auth,A.protocol=_.protocol,A.path=_.path,A.protocol=(b=A.protocol)===null||b===void 0?void 0:b.replace(/:$/,""),g=Object.assign(Object.assign({},A),g),!g.protocol)throw new Error("Missing protocol")}if(g.unixSocket=g.unixSocket||((m=g.protocol)===null||m===void 0?void 0:m.includes("+unix")),g.unixSocket?g.protocol=g.protocol.replace("+unix",""):!((y=g.protocol)===null||y===void 0)&&y.startsWith("ws")||delete g.path,n(g),g.query&&typeof g.query.clientId=="string"&&(g.clientId=g.query.clientId),g.cert&&g.key)if(g.protocol){if(["mqtts","wss","wxs","alis"].indexOf(g.protocol)===-1)switch(g.protocol){case"mqtt":g.protocol="mqtts";break;case"ws":g.protocol="wss";break;case"wx":g.protocol="wxs";break;case"ali":g.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${g.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(!s[g.protocol]){let _=["mqtts","wss"].indexOf(g.protocol)!==-1;g.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((A,N)=>_&&N%2===0?!1:typeof s[A]=="function")[0]}if(g.clean===!1&&!g.clientId)throw new Error("Missing clientId for unclean clients");g.protocol&&(g.defaultProtocol=g.protocol);function I(_){return g.servers&&((!_._reconnectCount||_._reconnectCount===g.servers.length)&&(_._reconnectCount=0),g.host=g.servers[_._reconnectCount].host,g.port=g.servers[_._reconnectCount].port,g.protocol=g.servers[_._reconnectCount].protocol?g.servers[_._reconnectCount].protocol:g.defaultProtocol,g.hostname=g.host,_._reconnectCount++),i("calling streambuilder for",g.protocol),s[g.protocol](_,g)}let x=new c.default(I,g);return x.on("error",()=>{}),x}function f(p,g,b=!0){return new Promise((m,y)=>{let I=a(p,g),x={connect:A=>{_(),m(I)},end:()=>{_(),m(I)},error:A=>{_(),I.end(),y(A)}};b===!1&&(x.close=()=>{x.error(new Error("Couldn't connect to server"))});function _(){Object.keys(x).forEach(A=>{I.off(A,x[A])})}Object.keys(x).forEach(A=>{I.on(A,x[A])})})}e.connectAsync=f,e.default=a}),ra=be(e=>{le(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(b,m,y,I){I===void 0&&(I=y);var x=Object.getOwnPropertyDescriptor(m,y);(!x||("get"in x?!m.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(b,I,x)}:function(b,m,y,I){I===void 0&&(I=y),b[I]=m[y]}),t=e&&e.__setModuleDefault||(Object.create?function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}:function(b,m){b.default=m}),l=e&&e.__importStar||function(b){if(b&&b.__esModule)return b;var m={};if(b!=null)for(var y in b)y!=="default"&&Object.prototype.hasOwnProperty.call(b,y)&&r(m,b,y);return t(m,b),m},c=e&&e.__exportStar||function(b,m){for(var y in b)y!=="default"&&!Object.prototype.hasOwnProperty.call(m,y)&&r(m,b,y)},o=e&&e.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var i=o(cn());e.MqttClient=i.default;var s=o(Wo());e.DefaultMessageIdProvider=s.default;var n=o(xl());e.UniqueMessageIdProvider=n.default;var a=o($o());e.Store=a.default;var f=l(Zl());e.connect=f.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return f.connectAsync}});var p=o(Yo());e.KeepaliveManager=p.default,e.Client=i.default,c(cn(),e),c(ur(),e);var g=Ar();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})}),eu=be(e=>{le(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(i,s,n,a){a===void 0&&(a=n);var f=Object.getOwnPropertyDescriptor(s,n);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[n]}}),Object.defineProperty(i,a,f)}:function(i,s,n,a){a===void 0&&(a=n),i[a]=s[n]}),t=e&&e.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),l=e&&e.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var n in i)n!=="default"&&Object.prototype.hasOwnProperty.call(i,n)&&r(s,i,n);return t(s,i),s},c=e&&e.__exportStar||function(i,s){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(s,n)&&r(s,i,n)};Object.defineProperty(e,"__esModule",{value:!0});var o=l(ra());e.default=o,c(ra(),e)});const tu=eu();/*! Bundled license information:

  @jspm/core/nodelibs/browser/buffer.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  */var ia=(e=>(e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e))(ia||{});class ru{constructor(r,t,l,c,o){Ee(this,"clientOptions");Ee(this,"client");Ee(this,"isOpen");Ee(this,"onConnectedCallbacks");Ee(this,"onDisconnectedCallbacks");Ee(this,"onMessageDict");Ee(this,"messageQueue");this.onConnectedCallbacks=[],this.onDisconnectedCallbacks=[],this.onMessageDict=new Map,this.messageQueue=[],this.isOpen=!1,this.clientOptions={host:r,port:t,clientId:l,username:c,password:o,manualConnect:!0,protocol:"wss",path:"/mqtt"},this.client=tu.connect(this.clientOptions),this.client.on("connect",()=>this.onConnect()),this.client.on("message",(i,s,n)=>this.onMessageArrived(i,s,n)),this.client.on("disconnect",i=>this.onDisconnect(i)),this.client.connect()}send(r,t,l,c=!1){if(this.isOpen)this.client.publish(r,t,{qos:l,retain:c});else{const o={topic:r,qos:l,retained:c,payload:t};this.messageQueue.push(o)}}subscribe(r,t){if(this.isOpen){const l={qos:1};this.client.subscribe(r,l,c=>{c?console.log(`Could not subscribe to topic: ${r} -> ${c.message}`):(this.onMessageDict.set(r,t),console.log(`Subscribed to topic: ${r}`))})}}registerOnConnected(r){this.onConnectedCallbacks.push(r)}registerOnDisconnected(r){this.onDisconnectedCallbacks.push(r)}onConnect(){console.log(`MQTT Client connected to ${this.clientOptions.host}:${this.clientOptions.port}`),this.triggerCallbacks(this.onConnectedCallbacks),this.isOpen=!0,this.messageQueue.forEach(r=>{this.send(r.topic,r.payload,r.qos,r.retained)}),this.messageQueue=[]}triggerCallbacks(r){r.forEach(t=>t())}onMessageArrived(r,t,l){if(this.onMessageDict.has(r)){const c=this.onMessageDict.get(r);c!=null?c(l.payload):console.log(`Received message ${t}, but no handler was given.`)}else console.log(`Received message for topic ${r}, but no listeners for the topic were found.`)}onDisconnect(r){var t;r.reasonCode!==0?console.log(`Connection lost because: ${(t=r.properties)==null?void 0:t.reasonString}`):(this.triggerCallbacks(this.onDisconnectedCallbacks),console.log("Connection to the MQTT broker was closed.")),this.isOpen=!1}}class iu{constructor(r,t){Ee(this,"joined");Ee(this,"beta");Ee(this,"gamma");Ee(this,"acceleration");Ee(this,"rotationRate");Ee(this,"lastMoving");Ee(this,"currentMoving");Ee(this,"lastTilted");Ee(this,"currentTilted");Ee(this,"onMotionChangedCallbacks");Ee(this,"status");this.joined=!1,this.beta=0,this.gamma=0,this.currentMoving=!0,this.lastMoving=!0,this.currentTilted=!0,this.lastTilted=!0,this.onMotionChangedCallbacks=[],this.status={device_id:r,device_movement:"moving",device_tilt:"tilted",metadata:t},this.init()}get isJoined(){return this.joined}get isMoving(){return this.currentMoving}get isTilted(){return this.currentTilted}updateStatus(){this.status.device_movement=this.isMoving?"moving":"stationary",this.status.device_tilt=this.isTilted?"tilted":"horizontal"}get getStatus(){return JSON.stringify(this.status)}registerOnMotionChanged(r){this.onMotionChangedCallbacks.push(r)}async init(){await this.requestMotion(),await this.requestOrientation(),setInterval(()=>this.update(),.016666666666666666)}update(){this.lastMoving=this.currentMoving,this.lastTilted=this.currentTilted,this.currentMoving=!1,this.currentTilted=!1,this.currentTilted=this._isTilted(5),this.currentMoving=this._isMoving(1,2),(!this.currentTilted&&this.currentMoving!==this.lastMoving||!this.currentMoving&&this.currentTilted!==this.lastTilted)&&this.triggerCallbacks(),this.updateStatus()}triggerCallbacks(){this.onMotionChangedCallbacks.forEach(r=>r())}_isMoving(r,t){if(this.acceleration==null||this.rotationRate==null)return!1;const{x:l=0,y:c=0,z:o=0}=this.acceleration,i=Math.max(Math.abs(l??0),Math.abs(c??0),Math.abs(o??0)),{alpha:s=0,beta:n=0,gamma:a=0}=this.rotationRate,f=Math.max(Math.abs(s??0),Math.abs(n??0),Math.abs(a??0));return i>r||f>t}_isTilted(r){return Math.max(Math.abs(this.beta),Math.abs(this.gamma))>r}async requestMotion(){const r=DeviceMotionEvent.requestPermission;typeof r=="function"?await r()==="granted"&&(window.addEventListener("devicemotion",l=>this.onMotion(l)),this.joined=!0):(window.addEventListener("devicemotion",t=>this.onMotion(t)),this.joined=!0)}async requestOrientation(){const r=DeviceOrientationEvent.requestPermission;typeof r=="function"?await r()==="granted"&&(window.addEventListener("deviceorientation",l=>this.onOrientation(l)),this.joined=!0):(window.addEventListener("deviceorientation",t=>this.onOrientation(t)),this.joined=!0)}onMotion(r){this.acceleration=r.acceleration,this.rotationRate=r.rotationRate}onOrientation(r){r.beta!=null&&(this.beta=r.beta),r.gamma!=null&&(this.gamma=r.gamma)}}const nu="device_uuid",ou="broker.hivemq.com",su=8884,au="room_uuid";class lu{constructor(r){Ee(this,"uuid","20");Ee(this,"_device");Ee(this,"client");Ee(this,"_brokerUrl","");Ee(this,"_brokerPort",-1);Ee(this,"_roomId","");Ee(this,"statusIntervalId");Ee(this,"startCallback");Ee(this,"shutdownCallback");Ee(this,"downCallback");Ee(this,"upCallback");this.brokerUrl=ou,this.brokerPort=su,this.roomId=r??au,this.getParameterFromUrl(),this.client=new ru(this.brokerUrl,this.brokerPort,this.uuid+"_capore"),this.startCallback=null,this.shutdownCallback=null,this.downCallback=null,this.upCallback=null,this.subscribeTopics()}start(r=200,t){this._device=new iu(this.uuid,t),this._device.registerOnMotionChanged(()=>this.sendStatus()),this.statusIntervalId=window.setInterval(()=>this.sendStatus(),r)}stop(){clearInterval(this.statusIntervalId)}set onStart(r){this.startCallback=r}set onShutdown(r){this.shutdownCallback=r}set onDown(r){this.downCallback=r}set onUp(r){this.upCallback=r}get device(){return this._device}get deviceId(){return this.uuid}get roomId(){return this._roomId}set roomId(r){this._roomId=r,console.log(`Set RoomId -> ${r}`)}get brokerUrl(){return this._brokerUrl}set brokerUrl(r){this._brokerUrl=r,console.log(`Set broker url -> ${r}`)}get brokerPort(){return this._brokerPort}set brokerPort(r){this._brokerPort=r,console.log(`Set broker port -> ${r}`)}subscribeTopics(){this.client.subscribe(`/sxm/${this.roomId}/start`,r=>this._onStart(r)),this.client.subscribe(`/sxm/${this.roomId}/shutdown`,r=>this._onShutdown(r)),this.client.subscribe(`/sxm/${this.roomId}/${this.uuid}/down`,r=>this._onDown(r)),this.client.subscribe(`/sxm/${this.roomId}/${this.uuid}/up`,r=>this._onUp(r))}_onStart(r){this.startCallback!=null&&r!=null&&this.startCallback(r)}_onShutdown(r){this.shutdownCallback!=null&&r!=null&&this.shutdownCallback(r)}_onDown(r){this.downCallback!=null&&r!=null&&this.downCallback(r)}_onUp(r){this.upCallback!=null&&r!=null&&this.upCallback(r)}getParameterFromUrl(){window.location.search.substring(1).split("&").forEach(l=>{const[c,o]=decodeURI(l).split("=");switch(c){case"u":const i=decodeURIComponent(o);if(i!=""){const[s,n]=i.split(":");this.brokerUrl=s,n!==void 0&&(this.brokerPort=Number(n))}break;case"r":this.roomId=decodeURIComponent(o);break;case nu:this.uuid=decodeURIComponent(o);break}})}sendStatus(){if(this.device!==void 0){const r=this.device.getStatus;this.client.send(`sxm/${this.roomId}/box`,r,ia.One,!1)}}}return Pe.SxmSession=lu,Object.defineProperty(Pe,Symbol.toStringTag,{value:"Module"}),Pe}({});
//# sourceMappingURL=sxm-web.iife.js.map
